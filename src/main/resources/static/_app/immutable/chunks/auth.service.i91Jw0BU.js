import{d as xt,w as _e}from"./index.9Rd9P6Ws.js";import{g as et}from"./entry.CjpRpNd8.js";function R(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n}var z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ve(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Oe(t,e){return t(e={exports:{}},e.exports),e.exports}var D=Oe(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function o(){var i=this;this.locked=new Map,this.addToLocked=function(r,s){var c=i.locked.get(r);c===void 0?s===void 0?i.locked.set(r,[]):i.locked.set(r,[s]):s!==void 0&&(c.unshift(s),i.locked.set(r,c))},this.isLocked=function(r){return i.locked.has(r)},this.lock=function(r){return new Promise(function(s,c){i.isLocked(r)?i.addToLocked(r,s):(i.addToLocked(r),s())})},this.unlock=function(r){var s=i.locked.get(r);if(s!==void 0&&s.length!==0){var c=s.pop();i.locked.set(r,s),c!==void 0&&setTimeout(c,0)}else i.locked.delete(r)}}return o.getInstance=function(){return o.instance===void 0&&(o.instance=new o),o.instance},o}();e.default=function(){return n.getInstance()}});ve(D);var jt=ve(Oe(function(t,e){var n=z&&z.__awaiter||function(u,a,h,w){return new(h||(h=Promise))(function(d,m){function g(k){try{S(w.next(k))}catch(y){m(y)}}function b(k){try{S(w.throw(k))}catch(y){m(y)}}function S(k){k.done?d(k.value):new h(function(y){y(k.value)}).then(g,b)}S((w=w.apply(u,a||[])).next())})},o=z&&z.__generator||function(u,a){var h,w,d,m,g={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return m={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function b(S){return function(k){return function(y){if(h)throw new TypeError("Generator is already executing.");for(;g;)try{if(h=1,w&&(d=2&y[0]?w.return:y[0]?w.throw||((d=w.return)&&d.call(w),0):w.next)&&!(d=d.call(w,y[1])).done)return d;switch(w=0,d&&(y=[2&y[0],d.value]),y[0]){case 0:case 1:d=y;break;case 4:return g.label++,{value:y[1],done:!1};case 5:g.label++,w=y[1],y=[0];continue;case 7:y=g.ops.pop(),g.trys.pop();continue;default:if(d=g.trys,!((d=d.length>0&&d[d.length-1])||y[0]!==6&&y[0]!==2)){g=0;continue}if(y[0]===3&&(!d||y[1]>d[0]&&y[1]<d[3])){g.label=y[1];break}if(y[0]===6&&g.label<d[1]){g.label=d[1],d=y;break}if(d&&g.label<d[2]){g.label=d[2],g.ops.push(y);break}d[2]&&g.ops.pop(),g.trys.pop();continue}y=a.call(u,g)}catch(E){y=[6,E],w=0}finally{h=d=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([S,k])}}},i=z;Object.defineProperty(e,"__esModule",{value:!0});var r="browser-tabs-lock-key",s={key:function(u){return n(i,void 0,void 0,function(){return o(this,function(a){throw new Error("Unsupported")})})},getItem:function(u){return n(i,void 0,void 0,function(){return o(this,function(a){throw new Error("Unsupported")})})},clear:function(){return n(i,void 0,void 0,function(){return o(this,function(u){return[2,window.localStorage.clear()]})})},removeItem:function(u){return n(i,void 0,void 0,function(){return o(this,function(a){throw new Error("Unsupported")})})},setItem:function(u,a){return n(i,void 0,void 0,function(){return o(this,function(h){throw new Error("Unsupported")})})},keySync:function(u){return window.localStorage.key(u)},getItemSync:function(u){return window.localStorage.getItem(u)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(u){return window.localStorage.removeItem(u)},setItemSync:function(u,a){return window.localStorage.setItem(u,a)}};function c(u){return new Promise(function(a){return setTimeout(a,u)})}function f(u){for(var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",h="",w=0;w<u;w++)h+=a[Math.floor(Math.random()*a.length)];return h}var p=function(){function u(a){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Date.now().toString()+f(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=a,u.waiters===void 0&&(u.waiters=[])}return u.prototype.acquireLock=function(a,h){return h===void 0&&(h=5e3),n(this,void 0,void 0,function(){var w,d,m,g,b,S,k;return o(this,function(y){switch(y.label){case 0:w=Date.now()+f(4),d=Date.now()+h,m=r+"-"+a,g=this.storageHandler===void 0?s:this.storageHandler,y.label=1;case 1:return Date.now()<d?[4,c(30)]:[3,8];case 2:return y.sent(),g.getItemSync(m)!==null?[3,5]:(b=this.id+"-"+a+"-"+w,[4,c(Math.floor(25*Math.random()))]);case 3:return y.sent(),g.setItemSync(m,JSON.stringify({id:this.id,iat:w,timeoutKey:b,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,c(30)];case 4:return y.sent(),(S=g.getItemSync(m))!==null&&(k=JSON.parse(S)).id===this.id&&k.iat===w?(this.acquiredIatSet.add(w),this.refreshLockWhileAcquired(m,w),[2,!0]):[3,7];case 5:return u.lockCorrector(this.storageHandler===void 0?s:this.storageHandler),[4,this.waitForSomethingToChange(d)];case 6:y.sent(),y.label=7;case 7:return w=Date.now()+f(4),[3,1];case 8:return[2,!1]}})})},u.prototype.refreshLockWhileAcquired=function(a,h){return n(this,void 0,void 0,function(){var w=this;return o(this,function(d){return setTimeout(function(){return n(w,void 0,void 0,function(){var m,g,b;return o(this,function(S){switch(S.label){case 0:return[4,D.default().lock(h)];case 1:return S.sent(),this.acquiredIatSet.has(h)?(m=this.storageHandler===void 0?s:this.storageHandler,(g=m.getItemSync(a))===null?(D.default().unlock(h),[2]):((b=JSON.parse(g)).timeRefreshed=Date.now(),m.setItemSync(a,JSON.stringify(b)),D.default().unlock(h),this.refreshLockWhileAcquired(a,h),[2])):(D.default().unlock(h),[2])}})})},1e3),[2]})})},u.prototype.waitForSomethingToChange=function(a){return n(this,void 0,void 0,function(){return o(this,function(h){switch(h.label){case 0:return[4,new Promise(function(w){var d=!1,m=Date.now(),g=!1;function b(){if(g||(window.removeEventListener("storage",b),u.removeFromWaiting(b),clearTimeout(S),g=!0),!d){d=!0;var k=50-(Date.now()-m);k>0?setTimeout(w,k):w(null)}}window.addEventListener("storage",b),u.addToWaiting(b);var S=setTimeout(b,Math.max(0,a-Date.now()))})];case 1:return h.sent(),[2]}})})},u.addToWaiting=function(a){this.removeFromWaiting(a),u.waiters!==void 0&&u.waiters.push(a)},u.removeFromWaiting=function(a){u.waiters!==void 0&&(u.waiters=u.waiters.filter(function(h){return h!==a}))},u.notifyWaiters=function(){u.waiters!==void 0&&u.waiters.slice().forEach(function(a){return a()})},u.prototype.releaseLock=function(a){return n(this,void 0,void 0,function(){return o(this,function(h){switch(h.label){case 0:return[4,this.releaseLock__private__(a)];case 1:return[2,h.sent()]}})})},u.prototype.releaseLock__private__=function(a){return n(this,void 0,void 0,function(){var h,w,d,m;return o(this,function(g){switch(g.label){case 0:return h=this.storageHandler===void 0?s:this.storageHandler,w=r+"-"+a,(d=h.getItemSync(w))===null?[2]:(m=JSON.parse(d)).id!==this.id?[3,2]:[4,D.default().lock(m.iat)];case 1:g.sent(),this.acquiredIatSet.delete(m.iat),h.removeItemSync(w),D.default().unlock(m.iat),u.notifyWaiters(),g.label=2;case 2:return[2]}})})},u.lockCorrector=function(a){for(var h=Date.now()-5e3,w=a,d=[],m=0;;){var g=w.keySync(m);if(g===null)break;d.push(g),m++}for(var b=!1,S=0;S<d.length;S++){var k=d[S];if(k.includes(r)){var y=w.getItemSync(k);if(y!==null){var E=JSON.parse(y);(E.timeRefreshed===void 0&&E.timeAcquired<h||E.timeRefreshed!==void 0&&E.timeRefreshed<h)&&(w.removeItemSync(k),b=!0)}}}b&&u.notifyWaiters()},u.waiters=void 0,u}();e.default=p}));const At={timeoutInSeconds:60},tt={name:"auth0-spa-js",version:"2.1.3"},nt=()=>Date.now();class O extends Error{constructor(e,n){super(n),this.error=e,this.error_description=n,Object.setPrototypeOf(this,O.prototype)}static fromPayload({error:e,error_description:n}){return new O(e,n)}}class Ee extends O{constructor(e,n,o,i=null){super(e,n),this.state=o,this.appState=i,Object.setPrototypeOf(this,Ee.prototype)}}class J extends O{constructor(){super("timeout","Timeout"),Object.setPrototypeOf(this,J.prototype)}}class Te extends J{constructor(e){super(),this.popup=e,Object.setPrototypeOf(this,Te.prototype)}}class Ie extends O{constructor(e){super("cancelled","Popup closed"),this.popup=e,Object.setPrototypeOf(this,Ie.prototype)}}class Re extends O{constructor(e,n,o){super(e,n),this.mfa_token=o,Object.setPrototypeOf(this,Re.prototype)}}class oe extends O{constructor(e,n){super("missing_refresh_token",`Missing Refresh Token (audience: '${Ae(e,["default"])}', scope: '${Ae(n)}')`),this.audience=e,this.scope=n,Object.setPrototypeOf(this,oe.prototype)}}function Ae(t,e=[]){return t&&!e.includes(t)?t:""}const ee=()=>window.crypto,ce=()=>{const t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.";let e="";return Array.from(ee().getRandomValues(new Uint8Array(43))).forEach(n=>e+=t[n%t.length]),e},Ne=t=>btoa(t),we=t=>{var{clientId:e}=t,n=R(t,["clientId"]);return new URLSearchParams((o=>Object.keys(o).filter(i=>o[i]!==void 0).reduce((i,r)=>Object.assign(Object.assign({},i),{[r]:o[r]}),{}))(Object.assign({client_id:e},n))).toString()},Ue=t=>(e=>decodeURIComponent(atob(e).split("").map(n=>"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)).join("")))(t.replace(/_/g,"/").replace(/-/g,"+")),Nt=async(t,e)=>{const n=await fetch(t,e);return{ok:n.ok,json:await n.json()}},Ut=async(t,e,n)=>{const o=new AbortController;let i;return e.signal=o.signal,Promise.race([Nt(t,e),new Promise((r,s)=>{i=setTimeout(()=>{o.abort(),s(new Error("Timeout when executing 'fetch'"))},n)})]).finally(()=>{clearTimeout(i)})},Dt=async(t,e,n,o,i,r,s)=>{return c={auth:{audience:e,scope:n},timeout:i,fetchUrl:t,fetchOptions:o,useFormData:s},f=r,new Promise(function(p,u){const a=new MessageChannel;a.port1.onmessage=function(h){h.data.error?u(new Error(h.data.error)):p(h.data),a.port1.close()},f.postMessage(c,[a.port2])});var c,f},zt=async(t,e,n,o,i,r,s=1e4)=>i?Dt(t,e,n,o,s,i,r):Ut(t,o,s);async function Lt(t,e){var{baseUrl:n,timeout:o,audience:i,scope:r,auth0Client:s,useFormData:c}=t,f=R(t,["baseUrl","timeout","audience","scope","auth0Client","useFormData"]);const p=c?we(f):JSON.stringify(f);return await async function(u,a,h,w,d,m,g){let b,S=null;for(let A=0;A<3;A++)try{b=await zt(u,h,w,d,m,g,a),S=null;break}catch(Ct){S=Ct}if(S)throw S;const k=b.json,{error:y,error_description:E}=k,$=R(k,["error","error_description"]),{ok:j}=b;if(!j){const A=E||`HTTP error. Unable to fetch ${u}`;throw y==="mfa_required"?new Re(y,A,$.mfa_token):y==="missing_refresh_token"?new oe(h,w):new O(y||"request_error",A)}return $}(`${n}/oauth/token`,o,i||"default",r,{method:"POST",body:p,headers:{"Content-Type":c?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(s||tt))}},e,c)}const Q=(...t)=>{return(e=t.filter(Boolean).join(" ").trim().split(/\s+/),Array.from(new Set(e))).join(" ");var e};class P{constructor(e,n="@@auth0spajs@@",o){this.prefix=n,this.suffix=o,this.clientId=e.clientId,this.scope=e.scope,this.audience=e.audience}toKey(){return[this.prefix,this.clientId,this.audience,this.scope,this.suffix].filter(Boolean).join("::")}static fromKey(e){const[n,o,i,r]=e.split("::");return new P({clientId:o,scope:r,audience:i},n)}static fromCacheEntry(e){const{scope:n,audience:o,client_id:i}=e;return new P({scope:n,audience:o,clientId:i})}}class Ft{set(e,n){localStorage.setItem(e,JSON.stringify(n))}get(e){const n=window.localStorage.getItem(e);if(n)try{return JSON.parse(n)}catch{return}}remove(e){localStorage.removeItem(e)}allKeys(){return Object.keys(window.localStorage).filter(e=>e.startsWith("@@auth0spajs@@"))}}class ot{constructor(){this.enclosedCache=function(){let e={};return{set(n,o){e[n]=o},get(n){const o=e[n];if(o)return o},remove(n){delete e[n]},allKeys:()=>Object.keys(e)}}()}}class Wt{constructor(e,n,o){this.cache=e,this.keyManifest=n,this.nowProvider=o||nt}async setIdToken(e,n,o){var i;const r=this.getIdTokenCacheKey(e);await this.cache.set(r,{id_token:n,decodedToken:o}),await((i=this.keyManifest)===null||i===void 0?void 0:i.add(r))}async getIdToken(e){const n=await this.cache.get(this.getIdTokenCacheKey(e.clientId));if(!n&&e.scope&&e.audience){const o=await this.get(e);return!o||!o.id_token||!o.decodedToken?void 0:{id_token:o.id_token,decodedToken:o.decodedToken}}if(n)return{id_token:n.id_token,decodedToken:n.decodedToken}}async get(e,n=0){var o;let i=await this.cache.get(e.toKey());if(!i){const c=await this.getCacheKeys();if(!c)return;const f=this.matchExistingCacheKey(e,c);f&&(i=await this.cache.get(f))}if(!i)return;const r=await this.nowProvider(),s=Math.floor(r/1e3);return i.expiresAt-n<s?i.body.refresh_token?(i.body={refresh_token:i.body.refresh_token},await this.cache.set(e.toKey(),i),i.body):(await this.cache.remove(e.toKey()),void await((o=this.keyManifest)===null||o===void 0?void 0:o.remove(e.toKey()))):i.body}async set(e){var n;const o=new P({clientId:e.client_id,scope:e.scope,audience:e.audience}),i=await this.wrapCacheEntry(e);await this.cache.set(o.toKey(),i),await((n=this.keyManifest)===null||n===void 0?void 0:n.add(o.toKey()))}async clear(e){var n;const o=await this.getCacheKeys();o&&(await o.filter(i=>!e||i.includes(e)).reduce(async(i,r)=>{await i,await this.cache.remove(r)},Promise.resolve()),await((n=this.keyManifest)===null||n===void 0?void 0:n.clear()))}async wrapCacheEntry(e){const n=await this.nowProvider();return{body:e,expiresAt:Math.floor(n/1e3)+e.expires_in}}async getCacheKeys(){var e;return this.keyManifest?(e=await this.keyManifest.get())===null||e===void 0?void 0:e.keys:this.cache.allKeys?this.cache.allKeys():void 0}getIdTokenCacheKey(e){return new P({clientId:e},"@@auth0spajs@@","@@user@@").toKey()}matchExistingCacheKey(e,n){return n.filter(o=>{var i;const r=P.fromKey(o),s=new Set(r.scope&&r.scope.split(" ")),c=((i=e.scope)===null||i===void 0?void 0:i.split(" "))||[],f=r.scope&&c.reduce((p,u)=>p&&s.has(u),!0);return r.prefix==="@@auth0spajs@@"&&r.clientId===e.clientId&&r.audience===e.audience&&f})[0]}}class Bt{constructor(e,n,o){this.storage=e,this.clientId=n,this.cookieDomain=o,this.storageKey=`a0.spajs.txs.${this.clientId}`}create(e){this.storage.save(this.storageKey,e,{daysUntilExpire:1,cookieDomain:this.cookieDomain})}get(){return this.storage.get(this.storageKey)}remove(){this.storage.remove(this.storageKey,{cookieDomain:this.cookieDomain})}}const Z=t=>typeof t=="number",Kt=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],Zt=t=>{if(!t.id_token)throw new Error("ID token is required but missing");const e=(r=>{const s=r.split("."),[c,f,p]=s;if(s.length!==3||!c||!f||!p)throw new Error("ID token could not be decoded");const u=JSON.parse(Ue(f)),a={__raw:r},h={};return Object.keys(u).forEach(w=>{a[w]=u[w],Kt.includes(w)||(h[w]=u[w])}),{encoded:{header:c,payload:f,signature:p},header:JSON.parse(Ue(c)),claims:a,user:h}})(t.id_token);if(!e.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(e.claims.iss!==t.iss)throw new Error(`Issuer (iss) claim mismatch in the ID token; expected "${t.iss}", found "${e.claims.iss}"`);if(!e.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if(e.header.alg!=="RS256")throw new Error(`Signature algorithm of "${e.header.alg}" is not supported. Expected the ID token to be signed with "RS256".`);if(!e.claims.aud||typeof e.claims.aud!="string"&&!Array.isArray(e.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(e.claims.aud)){if(!e.claims.aud.includes(t.aud))throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${t.aud}" but was not one of "${e.claims.aud.join(", ")}"`);if(e.claims.aud.length>1){if(!e.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(e.claims.azp!==t.aud)throw new Error(`Authorized Party (azp) claim mismatch in the ID token; expected "${t.aud}", found "${e.claims.azp}"`)}}else if(e.claims.aud!==t.aud)throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${t.aud}" but found "${e.claims.aud}"`);if(t.nonce){if(!e.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(e.claims.nonce!==t.nonce)throw new Error(`Nonce (nonce) claim mismatch in the ID token; expected "${t.nonce}", found "${e.claims.nonce}"`)}if(t.max_age&&!Z(e.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(e.claims.exp==null||!Z(e.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!Z(e.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");const n=t.leeway||60,o=new Date(t.now||Date.now()),i=new Date(0);if(i.setUTCSeconds(e.claims.exp+n),o>i)throw new Error(`Expiration Time (exp) claim error in the ID token; current time (${o}) is after expiration time (${i})`);if(e.claims.nbf!=null&&Z(e.claims.nbf)){const r=new Date(0);if(r.setUTCSeconds(e.claims.nbf-n),o<r)throw new Error(`Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Current time (${o}) is before ${r}`)}if(e.claims.auth_time!=null&&Z(e.claims.auth_time)){const r=new Date(0);if(r.setUTCSeconds(parseInt(e.claims.auth_time)+t.max_age+n),o>r)throw new Error(`Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time (${o}) is after last auth at ${r}`)}if(t.organization){const r=t.organization.trim();if(r.startsWith("org_")){const s=r;if(!e.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(s!==e.claims.org_id)throw new Error(`Organization ID (org_id) claim mismatch in the ID token; expected "${s}", found "${e.claims.org_id}"`)}else{const s=r.toLowerCase();if(!e.claims.org_name)throw new Error("Organization Name (org_name) claim must be a string present in the ID token");if(s!==e.claims.org_name)throw new Error(`Organization Name (org_name) claim mismatch in the ID token; expected "${s}", found "${e.claims.org_name}"`)}}return e};var L=Oe(function(t,e){var n=z&&z.__assign||function(){return n=Object.assign||function(f){for(var p,u=1,a=arguments.length;u<a;u++)for(var h in p=arguments[u])Object.prototype.hasOwnProperty.call(p,h)&&(f[h]=p[h]);return f},n.apply(this,arguments)};function o(f,p){if(!p)return"";var u="; "+f;return p===!0?u:u+"="+p}function i(f,p,u){return encodeURIComponent(f).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(p).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(a){if(typeof a.expires=="number"){var h=new Date;h.setMilliseconds(h.getMilliseconds()+864e5*a.expires),a.expires=h}return o("Expires",a.expires?a.expires.toUTCString():"")+o("Domain",a.domain)+o("Path",a.path)+o("Secure",a.secure)+o("SameSite",a.sameSite)}(u)}function r(f){for(var p={},u=f?f.split("; "):[],a=/(%[\dA-F]{2})+/gi,h=0;h<u.length;h++){var w=u[h].split("="),d=w.slice(1).join("=");d.charAt(0)==='"'&&(d=d.slice(1,-1));try{p[w[0].replace(a,decodeURIComponent)]=d.replace(a,decodeURIComponent)}catch{}}return p}function s(){return r(document.cookie)}function c(f,p,u){document.cookie=i(f,p,n({path:"/"},u))}e.__esModule=!0,e.encode=i,e.parse=r,e.getAll=s,e.get=function(f){return s()[f]},e.set=c,e.remove=function(f,p){c(f,"",n(n({},p),{expires:-1}))}});ve(L),L.encode,L.parse,L.getAll;var Ht=L.get,it=L.set,rt=L.remove;const W={get(t){const e=Ht(t);if(e!==void 0)return JSON.parse(e)},save(t,e,n){let o={};window.location.protocol==="https:"&&(o={secure:!0,sameSite:"none"}),n!=null&&n.daysUntilExpire&&(o.expires=n.daysUntilExpire),n!=null&&n.cookieDomain&&(o.domain=n.cookieDomain),it(t,JSON.stringify(e),o)},remove(t,e){let n={};e!=null&&e.cookieDomain&&(n.domain=e.cookieDomain),rt(t,n)}},Jt={get(t){return W.get(t)||W.get(`_legacy_${t}`)},save(t,e,n){let o={};window.location.protocol==="https:"&&(o={secure:!0}),n!=null&&n.daysUntilExpire&&(o.expires=n.daysUntilExpire),n!=null&&n.cookieDomain&&(o.domain=n.cookieDomain),it(`_legacy_${t}`,JSON.stringify(e),o),W.save(t,e,n)},remove(t,e){let n={};e!=null&&e.cookieDomain&&(n.domain=e.cookieDomain),rt(t,n),W.remove(t,e),W.remove(`_legacy_${t}`,e)}},Mt={get(t){if(typeof sessionStorage>"u")return;const e=sessionStorage.getItem(t);return e!=null?JSON.parse(e):void 0},save(t,e){sessionStorage.setItem(t,JSON.stringify(e))},remove(t){sessionStorage.removeItem(t)}};function Xt(t,e,n){var o=e===void 0?null:e,i=function(f,p){var u=atob(f);if(p){for(var a=new Uint8Array(u.length),h=0,w=u.length;h<w;++h)a[h]=u.charCodeAt(h);return String.fromCharCode.apply(null,new Uint16Array(a.buffer))}return u}(t,n!==void 0&&n),r=i.indexOf(`
`,10)+1,s=i.substring(r)+(o?"//# sourceMappingURL="+o:""),c=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(c)}var De,ze,Le,ue,Vt=(De="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgZSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQscil7c3VwZXIociksdGhpcy5lcnJvcj10LHRoaXMuZXJyb3JfZGVzY3JpcHRpb249cixPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxlLnByb3RvdHlwZSl9c3RhdGljIGZyb21QYXlsb2FkKHtlcnJvcjp0LGVycm9yX2Rlc2NyaXB0aW9uOnJ9KXtyZXR1cm4gbmV3IGUodCxyKX19Y2xhc3MgdCBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSxzKXtzdXBlcigibWlzc2luZ19yZWZyZXNoX3Rva2VuIixgTWlzc2luZyBSZWZyZXNoIFRva2VuIChhdWRpZW5jZTogJyR7cihlLFsiZGVmYXVsdCJdKX0nLCBzY29wZTogJyR7cihzKX0nKWApLHRoaXMuYXVkaWVuY2U9ZSx0aGlzLnNjb3BlPXMsT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsdC5wcm90b3R5cGUpfX1mdW5jdGlvbiByKGUsdD1bXSl7cmV0dXJuIGUmJiF0LmluY2x1ZGVzKGUpP2U6IiJ9ImZ1bmN0aW9uIj09dHlwZW9mIFN1cHByZXNzZWRFcnJvciYmU3VwcHJlc3NlZEVycm9yO2NvbnN0IHM9ZT0+e3ZhcntjbGllbnRJZDp0fT1lLHI9ZnVuY3Rpb24oZSx0KXt2YXIgcj17fTtmb3IodmFyIHMgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSYmdC5pbmRleE9mKHMpPDAmJihyW3NdPWVbc10pO2lmKG51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz0wO2ZvcihzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7bzxzLmxlbmd0aDtvKyspdC5pbmRleE9mKHNbb10pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHNbb10pJiYocltzW29dXT1lW3Nbb11dKX1yZXR1cm4gcn0oZSxbImNsaWVudElkIl0pO3JldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKChlPT5PYmplY3Qua2V5cyhlKS5maWx0ZXIoKHQ9PnZvaWQgMCE9PWVbdF0pKS5yZWR1Y2UoKCh0LHIpPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse1tyXTplW3JdfSkpLHt9KSkoT2JqZWN0LmFzc2lnbih7Y2xpZW50X2lkOnR9LHIpKSkudG9TdHJpbmcoKX07bGV0IG89e307Y29uc3Qgbj0oZSx0KT0+YCR7ZX18JHt0fWA7YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGFzeW5jKHtkYXRhOnt0aW1lb3V0OmUsYXV0aDpyLGZldGNoVXJsOmksZmV0Y2hPcHRpb25zOmMsdXNlRm9ybURhdGE6YX0scG9ydHM6W3BdfSk9PntsZXQgZjtjb25zdHthdWRpZW5jZTp1LHNjb3BlOmx9PXJ8fHt9O3RyeXtjb25zdCByPWE/KGU9Pntjb25zdCB0PW5ldyBVUkxTZWFyY2hQYXJhbXMoZSkscj17fTtyZXR1cm4gdC5mb3JFYWNoKCgoZSx0KT0+e3JbdF09ZX0pKSxyfSkoYy5ib2R5KTpKU09OLnBhcnNlKGMuYm9keSk7aWYoIXIucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09ci5ncmFudF90eXBlKXtjb25zdCBlPSgoZSx0KT0+b1tuKGUsdCldKSh1LGwpO2lmKCFlKXRocm93IG5ldyB0KHUsbCk7Yy5ib2R5PWE/cyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKTpKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKX1sZXQgaCxnOyJmdW5jdGlvbiI9PXR5cGVvZiBBYm9ydENvbnRyb2xsZXImJihoPW5ldyBBYm9ydENvbnRyb2xsZXIsYy5zaWduYWw9aC5zaWduYWwpO3RyeXtnPWF3YWl0IFByb21pc2UucmFjZShbKGQ9ZSxuZXcgUHJvbWlzZSgoZT0+c2V0VGltZW91dChlLGQpKSkpLGZldGNoKGksT2JqZWN0LmFzc2lnbih7fSxjKSldKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBwLnBvc3RNZXNzYWdlKHtlcnJvcjplLm1lc3NhZ2V9KX1pZighZylyZXR1cm4gaCYmaC5hYm9ydCgpLHZvaWQgcC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KTtmPWF3YWl0IGcuanNvbigpLGYucmVmcmVzaF90b2tlbj8oKChlLHQscik9PntvW24odCxyKV09ZX0pKGYucmVmcmVzaF90b2tlbix1LGwpLGRlbGV0ZSBmLnJlZnJlc2hfdG9rZW4pOigoZSx0KT0+e2RlbGV0ZSBvW24oZSx0KV19KSh1LGwpLHAucG9zdE1lc3NhZ2Uoe29rOmcub2ssanNvbjpmfSl9Y2F0Y2goZSl7cC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3I6ZS5lcnJvcixlcnJvcl9kZXNjcmlwdGlvbjplLm1lc3NhZ2V9fSl9dmFyIGR9KSl9KCk7Cgo=",ze=null,Le=!1,function(t){return ue=ue||Xt(De,ze,Le),new Worker(ue,t)});const le={};class Gt{constructor(e,n){this.cache=e,this.clientId=n,this.manifestKey=this.createManifestKeyFrom(this.clientId)}async add(e){var n;const o=new Set(((n=await this.cache.get(this.manifestKey))===null||n===void 0?void 0:n.keys)||[]);o.add(e),await this.cache.set(this.manifestKey,{keys:[...o]})}async remove(e){const n=await this.cache.get(this.manifestKey);if(n){const o=new Set(n.keys);return o.delete(e),o.size>0?await this.cache.set(this.manifestKey,{keys:[...o]}):await this.cache.remove(this.manifestKey)}}get(){return this.cache.get(this.manifestKey)}clear(){return this.cache.remove(this.manifestKey)}createManifestKeyFrom(e){return`@@auth0spajs@@::${e}`}}const qt={memory:()=>new ot().enclosedCache,localstorage:()=>new Ft},Fe=t=>qt[t],We=t=>{const{openUrl:e,onRedirect:n}=t,o=R(t,["openUrl","onRedirect"]);return Object.assign(Object.assign({},o),{openUrl:e===!1||e?e:n})},de=new jt;class Yt{constructor(e){let n,o;if(this.userCache=new ot().enclosedCache,this.defaultOptions={authorizationParams:{scope:"openid profile email"},useRefreshTokensFallback:!1,useFormData:!0},this._releaseLockOnPageHide=async()=>{await de.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)},this.options=Object.assign(Object.assign(Object.assign({},this.defaultOptions),e),{authorizationParams:Object.assign(Object.assign({},this.defaultOptions.authorizationParams),e.authorizationParams)}),typeof window<"u"&&(()=>{if(!ee())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(ee().subtle===void 0)throw new Error(`
      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/main/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.
    `)})(),e.cache&&e.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),e.cache)o=e.cache;else{if(n=e.cacheLocation||"memory",!Fe(n))throw new Error(`Invalid cache location "${n}"`);o=Fe(n)()}this.httpTimeoutMs=e.httpTimeoutInSeconds?1e3*e.httpTimeoutInSeconds:1e4,this.cookieStorage=e.legacySameSiteCookie===!1?W:Jt,this.orgHintCookieName=`auth0.${this.options.clientId}.organization_hint`,this.isAuthenticatedCookieName=(s=>`auth0.${s}.is.authenticated`)(this.options.clientId),this.sessionCheckExpiryDays=e.sessionCheckExpiryDays||1;const i=e.useCookiesForTransactions?this.cookieStorage:Mt;var r;this.scope=Q("openid",this.options.authorizationParams.scope,this.options.useRefreshTokens?"offline_access":""),this.transactionManager=new Bt(i,this.options.clientId,this.options.cookieDomain),this.nowProvider=this.options.nowProvider||nt,this.cacheManager=new Wt(o,o.allKeys?void 0:new Gt(o,this.options.clientId),this.nowProvider),this.domainUrl=(r=this.options.domain,/^https?:\/\//.test(r)?r:`https://${r}`),this.tokenIssuer=((s,c)=>s?s.startsWith("https://")?s:`https://${s}/`:`${c}/`)(this.options.issuer,this.domainUrl),typeof window<"u"&&window.Worker&&this.options.useRefreshTokens&&n==="memory"&&(this.options.workerUrl?this.worker=new Worker(this.options.workerUrl):this.worker=new Vt)}_url(e){const n=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||tt)));return`${this.domainUrl}${e}&auth0Client=${n}`}_authorizeUrl(e){return this._url(`/authorize?${we(e)}`)}async _verifyIdToken(e,n,o){const i=await this.nowProvider();return Zt({iss:this.tokenIssuer,aud:this.options.clientId,id_token:e,nonce:n,organization:o,leeway:this.options.leeway,max_age:(r=this.options.authorizationParams.max_age,typeof r!="string"?r:parseInt(r,10)||void 0),now:i});var r}_processOrgHint(e){e?this.cookieStorage.save(this.orgHintCookieName,e,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}):this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain})}async _prepareAuthorizeUrl(e,n,o){const i=Ne(ce()),r=Ne(ce()),s=ce(),c=(u=>{const a=new Uint8Array(u);return(h=>{const w={"+":"-","/":"_","=":""};return h.replace(/[+/=]/g,d=>w[d])})(window.btoa(String.fromCharCode(...Array.from(a))))})(await(async u=>await ee().subtle.digest({name:"SHA-256"},new TextEncoder().encode(u)))(s)),f=((u,a,h,w,d,m,g,b)=>Object.assign(Object.assign(Object.assign({client_id:u.clientId},u.authorizationParams),h),{scope:Q(a,h.scope),response_type:"code",response_mode:b||"query",state:w,nonce:d,redirect_uri:g||u.authorizationParams.redirect_uri,code_challenge:m,code_challenge_method:"S256"}))(this.options,this.scope,e,i,r,c,e.redirect_uri||this.options.authorizationParams.redirect_uri||o,n==null?void 0:n.response_mode),p=this._authorizeUrl(f);return{nonce:r,code_verifier:s,scope:f.scope,audience:f.audience||"default",redirect_uri:f.redirect_uri,state:i,url:p}}async loginWithPopup(e,n){var o;if(e=e||{},!(n=n||{}).popup&&(n.popup=(c=>{const f=window.screenX+(window.innerWidth-400)/2,p=window.screenY+(window.innerHeight-600)/2;return window.open(c,"auth0:authorize:popup",`left=${f},top=${p},width=400,height=600,resizable,scrollbars=yes,status=1`)})(""),!n.popup))throw new Error("Unable to open a popup for loginWithPopup - window.open returned `null`");const i=await this._prepareAuthorizeUrl(e.authorizationParams||{},{response_mode:"web_message"},window.location.origin);n.popup.location.href=i.url;const r=await(c=>new Promise((f,p)=>{let u;const a=setInterval(()=>{c.popup&&c.popup.closed&&(clearInterval(a),clearTimeout(h),window.removeEventListener("message",u,!1),p(new Ie(c.popup)))},1e3),h=setTimeout(()=>{clearInterval(a),p(new Te(c.popup)),window.removeEventListener("message",u,!1)},1e3*(c.timeoutInSeconds||60));u=function(w){if(w.data&&w.data.type==="authorization_response"){if(clearTimeout(h),clearInterval(a),window.removeEventListener("message",u,!1),c.popup.close(),w.data.response.error)return p(O.fromPayload(w.data.response));f(w.data.response)}},window.addEventListener("message",u)}))(Object.assign(Object.assign({},n),{timeoutInSeconds:n.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}));if(i.state!==r.state)throw new O("state_mismatch","Invalid state");const s=((o=e.authorizationParams)===null||o===void 0?void 0:o.organization)||this.options.authorizationParams.organization;await this._requestToken({audience:i.audience,scope:i.scope,code_verifier:i.code_verifier,grant_type:"authorization_code",code:r.code,redirect_uri:i.redirect_uri},{nonceIn:i.nonce,organization:s})}async getUser(){var e;const n=await this._getIdTokenFromCache();return(e=n==null?void 0:n.decodedToken)===null||e===void 0?void 0:e.user}async getIdTokenClaims(){var e;const n=await this._getIdTokenFromCache();return(e=n==null?void 0:n.decodedToken)===null||e===void 0?void 0:e.claims}async loginWithRedirect(e={}){var n;const o=We(e),{openUrl:i,fragment:r,appState:s}=o,c=R(o,["openUrl","fragment","appState"]),f=((n=c.authorizationParams)===null||n===void 0?void 0:n.organization)||this.options.authorizationParams.organization,p=await this._prepareAuthorizeUrl(c.authorizationParams||{}),{url:u}=p,a=R(p,["url"]);this.transactionManager.create(Object.assign(Object.assign(Object.assign({},a),{appState:s}),f&&{organization:f}));const h=r?`${u}#${r}`:u;i?await i(h):window.location.assign(h)}async handleRedirectCallback(e=window.location.href){const n=e.split("?").slice(1);if(n.length===0)throw new Error("There are no query params available for parsing.");const{state:o,code:i,error:r,error_description:s}=(a=>{a.indexOf("#")>-1&&(a=a.substring(0,a.indexOf("#")));const h=new URLSearchParams(a);return{state:h.get("state"),code:h.get("code")||void 0,error:h.get("error")||void 0,error_description:h.get("error_description")||void 0}})(n.join("")),c=this.transactionManager.get();if(!c)throw new O("missing_transaction","Invalid state");if(this.transactionManager.remove(),r)throw new Ee(r,s||r,o,c.appState);if(!c.code_verifier||c.state&&c.state!==o)throw new O("state_mismatch","Invalid state");const f=c.organization,p=c.nonce,u=c.redirect_uri;return await this._requestToken(Object.assign({audience:c.audience,scope:c.scope,code_verifier:c.code_verifier,grant_type:"authorization_code",code:i},u?{redirect_uri:u}:{}),{nonceIn:p,organization:f}),{appState:c.appState}}async checkSession(e){if(!this.cookieStorage.get(this.isAuthenticatedCookieName)){if(!this.cookieStorage.get("auth0.is.authenticated"))return;this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove("auth0.is.authenticated")}try{await this.getTokenSilently(e)}catch{}}async getTokenSilently(e={}){var n;const o=Object.assign(Object.assign({cacheMode:"on"},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:Q(this.scope,(n=e.authorizationParams)===null||n===void 0?void 0:n.scope)})}),i=await((r,s)=>{let c=le[s];return c||(c=r().finally(()=>{delete le[s],c=null}),le[s]=c),c})(()=>this._getTokenSilently(o),`${this.options.clientId}::${o.authorizationParams.audience}::${o.authorizationParams.scope}`);return e.detailedResponse?i:i==null?void 0:i.access_token}async _getTokenSilently(e){const{cacheMode:n}=e,o=R(e,["cacheMode"]);if(n!=="off"){const i=await this._getEntryFromCache({scope:o.authorizationParams.scope,audience:o.authorizationParams.audience||"default",clientId:this.options.clientId});if(i)return i}if(n!=="cache-only"){if(!await(async(i,r=3)=>{for(let s=0;s<r;s++)if(await i())return!0;return!1})(()=>de.acquireLock("auth0.lock.getTokenSilently",5e3),10))throw new J;try{if(window.addEventListener("pagehide",this._releaseLockOnPageHide),n!=="off"){const p=await this._getEntryFromCache({scope:o.authorizationParams.scope,audience:o.authorizationParams.audience||"default",clientId:this.options.clientId});if(p)return p}const i=this.options.useRefreshTokens?await this._getTokenUsingRefreshToken(o):await this._getTokenFromIFrame(o),{id_token:r,access_token:s,oauthTokenScope:c,expires_in:f}=i;return Object.assign(Object.assign({id_token:r,access_token:s},c?{scope:c}:null),{expires_in:f})}finally{await de.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)}}}async getTokenWithPopup(e={},n={}){var o;const i=Object.assign(Object.assign({},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:Q(this.scope,(o=e.authorizationParams)===null||o===void 0?void 0:o.scope)})});return n=Object.assign(Object.assign({},At),n),await this.loginWithPopup(i,n),(await this.cacheManager.get(new P({scope:i.authorizationParams.scope,audience:i.authorizationParams.audience||"default",clientId:this.options.clientId}))).access_token}async isAuthenticated(){return!!await this.getUser()}_buildLogoutUrl(e){e.clientId!==null?e.clientId=e.clientId||this.options.clientId:delete e.clientId;const n=e.logoutParams||{},{federated:o}=n,i=R(n,["federated"]),r=o?"&federated":"";return this._url(`/v2/logout?${we(Object.assign({clientId:e.clientId},i))}`)+r}async logout(e={}){const n=We(e),{openUrl:o}=n,i=R(n,["openUrl"]);e.clientId===null?await this.cacheManager.clear():await this.cacheManager.clear(e.clientId||this.options.clientId),this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove(this.isAuthenticatedCookieName,{cookieDomain:this.options.cookieDomain}),this.userCache.remove("@@user@@");const r=this._buildLogoutUrl(i);o?await o(r):o!==!1&&window.location.assign(r)}async _getTokenFromIFrame(e){const n=Object.assign(Object.assign({},e.authorizationParams),{prompt:"none"}),o=this.cookieStorage.get(this.orgHintCookieName);o&&!n.organization&&(n.organization=o);const{url:i,state:r,nonce:s,code_verifier:c,redirect_uri:f,scope:p,audience:u}=await this._prepareAuthorizeUrl(n,{response_mode:"web_message"},window.location.origin);try{if(window.crossOriginIsolated)throw new O("login_required","The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.");const a=e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,h=await((d,m,g=60)=>new Promise((b,S)=>{const k=window.document.createElement("iframe");k.setAttribute("width","0"),k.setAttribute("height","0"),k.style.display="none";const y=()=>{window.document.body.contains(k)&&(window.document.body.removeChild(k),window.removeEventListener("message",E,!1))};let E;const $=setTimeout(()=>{S(new J),y()},1e3*g);E=function(j){if(j.origin!=m||!j.data||j.data.type!=="authorization_response")return;const A=j.source;A&&A.close(),j.data.response.error?S(O.fromPayload(j.data.response)):b(j.data.response),clearTimeout($),window.removeEventListener("message",E,!1),setTimeout(y,2e3)},window.addEventListener("message",E,!1),window.document.body.appendChild(k),k.setAttribute("src",d)}))(i,this.domainUrl,a);if(r!==h.state)throw new O("state_mismatch","Invalid state");const w=await this._requestToken(Object.assign(Object.assign({},e.authorizationParams),{code_verifier:c,code:h.code,grant_type:"authorization_code",redirect_uri:f,timeout:e.authorizationParams.timeout||this.httpTimeoutMs}),{nonceIn:s,organization:n.organization});return Object.assign(Object.assign({},w),{scope:p,oauthTokenScope:w.scope,audience:u})}catch(a){throw a.error==="login_required"&&this.logout({openUrl:!1}),a}}async _getTokenUsingRefreshToken(e){const n=await this.cacheManager.get(new P({scope:e.authorizationParams.scope,audience:e.authorizationParams.audience||"default",clientId:this.options.clientId}));if(!(n&&n.refresh_token||this.worker)){if(this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw new oe(e.authorizationParams.audience||"default",e.authorizationParams.scope)}const o=e.authorizationParams.redirect_uri||this.options.authorizationParams.redirect_uri||window.location.origin,i=typeof e.timeoutInSeconds=="number"?1e3*e.timeoutInSeconds:null;try{const r=await this._requestToken(Object.assign(Object.assign(Object.assign({},e.authorizationParams),{grant_type:"refresh_token",refresh_token:n&&n.refresh_token,redirect_uri:o}),i&&{timeout:i}));return Object.assign(Object.assign({},r),{scope:e.authorizationParams.scope,oauthTokenScope:r.scope,audience:e.authorizationParams.audience||"default"})}catch(r){if((r.message.indexOf("Missing Refresh Token")>-1||r.message&&r.message.indexOf("invalid refresh token")>-1)&&this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw r}}async _saveEntryInCache(e){const{id_token:n,decodedToken:o}=e,i=R(e,["id_token","decodedToken"]);this.userCache.set("@@user@@",{id_token:n,decodedToken:o}),await this.cacheManager.setIdToken(this.options.clientId,e.id_token,e.decodedToken),await this.cacheManager.set(i)}async _getIdTokenFromCache(){const e=this.options.authorizationParams.audience||"default",n=await this.cacheManager.getIdToken(new P({clientId:this.options.clientId,audience:e,scope:this.scope})),o=this.userCache.get("@@user@@");return n&&n.id_token===(o==null?void 0:o.id_token)?o:(this.userCache.set("@@user@@",n),n)}async _getEntryFromCache({scope:e,audience:n,clientId:o}){const i=await this.cacheManager.get(new P({scope:e,audience:n,clientId:o}),60);if(i&&i.access_token){const{access_token:r,oauthTokenScope:s,expires_in:c}=i,f=await this._getIdTokenFromCache();return f&&Object.assign(Object.assign({id_token:f.id_token,access_token:r},s?{scope:s}:null),{expires_in:c})}}async _requestToken(e,n){const{nonceIn:o,organization:i}=n||{},r=await Lt(Object.assign({baseUrl:this.domainUrl,client_id:this.options.clientId,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},e),this.worker),s=await this._verifyIdToken(r.id_token,o,i);return await this._saveEntryInCache(Object.assign(Object.assign(Object.assign(Object.assign({},r),{decodedToken:s,scope:e.scope,audience:e.audience||"default"}),r.scope?{oauthTokenScope:r.scope}:null),{client_id:this.options.clientId})),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgHint(i||s.claims.org_id),Object.assign(Object.assign({},r),{decodedToken:s})}}async function $t(t){const e=new Yt(t);return await e.checkSession(),e}const X=_e({});let Be=sessionStorage.getItem("user");Be?X.set(JSON.parse(Be)):sessionStorage.setItem("user",JSON.stringify({}));X.subscribe(t=>sessionStorage.setItem("user",JSON.stringify(t)));const vo=xt(X,t=>t&&t.name),V=_e("");let Ke=sessionStorage.getItem("jwt_token");Ke?V.set(Ke):sessionStorage.setItem("jwt_token","");V.subscribe(t=>sessionStorage.setItem("jwt_token",t));function st(t,e){return function(){return t.apply(e,arguments)}}const{toString:Qt}=Object.prototype,{getPrototypeOf:Pe}=Object,ie=(t=>e=>{const n=Qt.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),x=t=>(t=t.toLowerCase(),e=>ie(e)===t),re=t=>e=>typeof e===t,{isArray:K}=Array,M=re("undefined");function en(t){return t!==null&&!M(t)&&t.constructor!==null&&!M(t.constructor)&&T(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const at=x("ArrayBuffer");function tn(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&at(t.buffer),e}const nn=re("string"),T=re("function"),ct=re("number"),se=t=>t!==null&&typeof t=="object",on=t=>t===!0||t===!1,te=t=>{if(ie(t)!=="object")return!1;const e=Pe(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},rn=x("Date"),sn=x("File"),an=x("Blob"),cn=x("FileList"),un=t=>se(t)&&T(t.pipe),ln=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||T(t.append)&&((e=ie(t))==="formdata"||e==="object"&&T(t.toString)&&t.toString()==="[object FormData]"))},dn=x("URLSearchParams"),hn=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function G(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let o,i;if(typeof t!="object"&&(t=[t]),K(t))for(o=0,i=t.length;o<i;o++)e.call(null,t[o],o,t);else{const r=n?Object.getOwnPropertyNames(t):Object.keys(t),s=r.length;let c;for(o=0;o<s;o++)c=r[o],e.call(null,t[c],c,t)}}function ut(t,e){e=e.toLowerCase();const n=Object.keys(t);let o=n.length,i;for(;o-- >0;)if(i=n[o],e===i.toLowerCase())return i;return null}const lt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,dt=t=>!M(t)&&t!==lt;function ge(){const{caseless:t}=dt(this)&&this||{},e={},n=(o,i)=>{const r=t&&ut(e,i)||i;te(e[r])&&te(o)?e[r]=ge(e[r],o):te(o)?e[r]=ge({},o):K(o)?e[r]=o.slice():e[r]=o};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&G(arguments[o],n);return e}const fn=(t,e,n,{allOwnKeys:o}={})=>(G(e,(i,r)=>{n&&T(i)?t[r]=st(i,n):t[r]=i},{allOwnKeys:o}),t),pn=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),mn=(t,e,n,o)=>{t.prototype=Object.create(e.prototype,o),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},wn=(t,e,n,o)=>{let i,r,s;const c={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),r=i.length;r-- >0;)s=i[r],(!o||o(s,t,e))&&!c[s]&&(e[s]=t[s],c[s]=!0);t=n!==!1&&Pe(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},gn=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const o=t.indexOf(e,n);return o!==-1&&o===n},yn=t=>{if(!t)return null;if(K(t))return t;let e=t.length;if(!ct(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},bn=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Pe(Uint8Array)),kn=(t,e)=>{const o=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=o.next())&&!i.done;){const r=i.value;e.call(t,r[0],r[1])}},Sn=(t,e)=>{let n;const o=[];for(;(n=t.exec(e))!==null;)o.push(n);return o},_n=x("HTMLFormElement"),vn=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,i){return o.toUpperCase()+i}),Ze=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),On=x("RegExp"),ht=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),o={};G(n,(i,r)=>{let s;(s=e(i,r,t))!==!1&&(o[r]=s||i)}),Object.defineProperties(t,o)},En=t=>{ht(t,(e,n)=>{if(T(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=t[n];if(T(o)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Tn=(t,e)=>{const n={},o=i=>{i.forEach(r=>{n[r]=!0})};return K(t)?o(t):o(String(t).split(e)),n},In=()=>{},Rn=(t,e)=>(t=+t,Number.isFinite(t)?t:e),he="abcdefghijklmnopqrstuvwxyz",He="0123456789",ft={DIGIT:He,ALPHA:he,ALPHA_DIGIT:he+he.toUpperCase()+He},Pn=(t=16,e=ft.ALPHA_DIGIT)=>{let n="";const{length:o}=e;for(;t--;)n+=e[Math.random()*o|0];return n};function Cn(t){return!!(t&&T(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const xn=t=>{const e=new Array(10),n=(o,i)=>{if(se(o)){if(e.indexOf(o)>=0)return;if(!("toJSON"in o)){e[i]=o;const r=K(o)?[]:{};return G(o,(s,c)=>{const f=n(s,i+1);!M(f)&&(r[c]=f)}),e[i]=void 0,r}}return o};return n(t,0)},jn=x("AsyncFunction"),An=t=>t&&(se(t)||T(t))&&T(t.then)&&T(t.catch),l={isArray:K,isArrayBuffer:at,isBuffer:en,isFormData:ln,isArrayBufferView:tn,isString:nn,isNumber:ct,isBoolean:on,isObject:se,isPlainObject:te,isUndefined:M,isDate:rn,isFile:sn,isBlob:an,isRegExp:On,isFunction:T,isStream:un,isURLSearchParams:dn,isTypedArray:bn,isFileList:cn,forEach:G,merge:ge,extend:fn,trim:hn,stripBOM:pn,inherits:mn,toFlatObject:wn,kindOf:ie,kindOfTest:x,endsWith:gn,toArray:yn,forEachEntry:kn,matchAll:Sn,isHTMLForm:_n,hasOwnProperty:Ze,hasOwnProp:Ze,reduceDescriptors:ht,freezeMethods:En,toObjectSet:Tn,toCamelCase:vn,noop:In,toFiniteNumber:Rn,findKey:ut,global:lt,isContextDefined:dt,ALPHABET:ft,generateString:Pn,isSpecCompliantForm:Cn,toJSONObject:xn,isAsyncFn:jn,isThenable:An};function _(t,e,n,o,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),o&&(this.request=o),i&&(this.response=i)}l.inherits(_,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:l.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const pt=_.prototype,mt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{mt[t]={value:t}});Object.defineProperties(_,mt);Object.defineProperty(pt,"isAxiosError",{value:!0});_.from=(t,e,n,o,i,r)=>{const s=Object.create(pt);return l.toFlatObject(t,s,function(f){return f!==Error.prototype},c=>c!=="isAxiosError"),_.call(s,t.message,e,n,o,i),s.cause=t,s.name=t.name,r&&Object.assign(s,r),s};const Nn=null;function ye(t){return l.isPlainObject(t)||l.isArray(t)}function wt(t){return l.endsWith(t,"[]")?t.slice(0,-2):t}function Je(t,e,n){return t?t.concat(e).map(function(i,r){return i=wt(i),!n&&r?"["+i+"]":i}).join(n?".":""):e}function Un(t){return l.isArray(t)&&!t.some(ye)}const Dn=l.toFlatObject(l,{},null,function(e){return/^is[A-Z]/.test(e)});function ae(t,e,n){if(!l.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=l.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!l.isUndefined(g[m])});const o=n.metaTokens,i=n.visitor||u,r=n.dots,s=n.indexes,f=(n.Blob||typeof Blob<"u"&&Blob)&&l.isSpecCompliantForm(e);if(!l.isFunction(i))throw new TypeError("visitor must be a function");function p(d){if(d===null)return"";if(l.isDate(d))return d.toISOString();if(!f&&l.isBlob(d))throw new _("Blob is not supported. Use a Buffer instead.");return l.isArrayBuffer(d)||l.isTypedArray(d)?f&&typeof Blob=="function"?new Blob([d]):Buffer.from(d):d}function u(d,m,g){let b=d;if(d&&!g&&typeof d=="object"){if(l.endsWith(m,"{}"))m=o?m:m.slice(0,-2),d=JSON.stringify(d);else if(l.isArray(d)&&Un(d)||(l.isFileList(d)||l.endsWith(m,"[]"))&&(b=l.toArray(d)))return m=wt(m),b.forEach(function(k,y){!(l.isUndefined(k)||k===null)&&e.append(s===!0?Je([m],y,r):s===null?m:m+"[]",p(k))}),!1}return ye(d)?!0:(e.append(Je(g,m,r),p(d)),!1)}const a=[],h=Object.assign(Dn,{defaultVisitor:u,convertValue:p,isVisitable:ye});function w(d,m){if(!l.isUndefined(d)){if(a.indexOf(d)!==-1)throw Error("Circular reference detected in "+m.join("."));a.push(d),l.forEach(d,function(b,S){(!(l.isUndefined(b)||b===null)&&i.call(e,b,l.isString(S)?S.trim():S,m,h))===!0&&w(b,m?m.concat(S):[S])}),a.pop()}}if(!l.isObject(t))throw new TypeError("data must be an object");return w(t),e}function Me(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(o){return e[o]})}function Ce(t,e){this._pairs=[],t&&ae(t,this,e)}const gt=Ce.prototype;gt.append=function(e,n){this._pairs.push([e,n])};gt.toString=function(e){const n=e?function(o){return e.call(this,o,Me)}:Me;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function zn(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function yt(t,e,n){if(!e)return t;const o=n&&n.encode||zn,i=n&&n.serialize;let r;if(i?r=i(e,n):r=l.isURLSearchParams(e)?e.toString():new Ce(e,n).toString(o),r){const s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t}class Xe{constructor(){this.handlers=[]}use(e,n,o){return this.handlers.push({fulfilled:e,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){l.forEach(this.handlers,function(o){o!==null&&e(o)})}}const bt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ln=typeof URLSearchParams<"u"?URLSearchParams:Ce,Fn=typeof FormData<"u"?FormData:null,Wn=typeof Blob<"u"?Blob:null,Bn={isBrowser:!0,classes:{URLSearchParams:Ln,FormData:Fn,Blob:Wn},protocols:["http","https","file","blob","url","data"]},kt=typeof window<"u"&&typeof document<"u",Kn=(t=>kt&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),Zn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Hn=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:kt,hasStandardBrowserEnv:Kn,hasStandardBrowserWebWorkerEnv:Zn},Symbol.toStringTag,{value:"Module"})),C={...Hn,...Bn};function Jn(t,e){return ae(t,new C.classes.URLSearchParams,Object.assign({visitor:function(n,o,i,r){return C.isNode&&l.isBuffer(n)?(this.append(o,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function Mn(t){return l.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Xn(t){const e={},n=Object.keys(t);let o;const i=n.length;let r;for(o=0;o<i;o++)r=n[o],e[r]=t[r];return e}function St(t){function e(n,o,i,r){let s=n[r++];if(s==="__proto__")return!0;const c=Number.isFinite(+s),f=r>=n.length;return s=!s&&l.isArray(i)?i.length:s,f?(l.hasOwnProp(i,s)?i[s]=[i[s],o]:i[s]=o,!c):((!i[s]||!l.isObject(i[s]))&&(i[s]=[]),e(n,o,i[s],r)&&l.isArray(i[s])&&(i[s]=Xn(i[s])),!c)}if(l.isFormData(t)&&l.isFunction(t.entries)){const n={};return l.forEachEntry(t,(o,i)=>{e(Mn(o),i,n,0)}),n}return null}function Vn(t,e,n){if(l.isString(t))try{return(e||JSON.parse)(t),l.trim(t)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(t)}const q={transitional:bt,adapter:["xhr","http"],transformRequest:[function(e,n){const o=n.getContentType()||"",i=o.indexOf("application/json")>-1,r=l.isObject(e);if(r&&l.isHTMLForm(e)&&(e=new FormData(e)),l.isFormData(e))return i?JSON.stringify(St(e)):e;if(l.isArrayBuffer(e)||l.isBuffer(e)||l.isStream(e)||l.isFile(e)||l.isBlob(e))return e;if(l.isArrayBufferView(e))return e.buffer;if(l.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(r){if(o.indexOf("application/x-www-form-urlencoded")>-1)return Jn(e,this.formSerializer).toString();if((c=l.isFileList(e))||o.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return ae(c?{"files[]":e}:e,f&&new f,this.formSerializer)}}return r||i?(n.setContentType("application/json",!1),Vn(e)):e}],transformResponse:[function(e){const n=this.transitional||q.transitional,o=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&l.isString(e)&&(o&&!this.responseType||i)){const s=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(c){if(s)throw c.name==="SyntaxError"?_.from(c,_.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:C.classes.FormData,Blob:C.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};l.forEach(["delete","get","head","post","put","patch"],t=>{q.headers[t]={}});const Gn=l.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),qn=t=>{const e={};let n,o,i;return t&&t.split(`
`).forEach(function(s){i=s.indexOf(":"),n=s.substring(0,i).trim().toLowerCase(),o=s.substring(i+1).trim(),!(!n||e[n]&&Gn[n])&&(n==="set-cookie"?e[n]?e[n].push(o):e[n]=[o]:e[n]=e[n]?e[n]+", "+o:o)}),e},Ve=Symbol("internals");function H(t){return t&&String(t).trim().toLowerCase()}function ne(t){return t===!1||t==null?t:l.isArray(t)?t.map(ne):String(t)}function Yn(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(t);)e[o[1]]=o[2];return e}const $n=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function fe(t,e,n,o,i){if(l.isFunction(o))return o.call(this,e,n);if(i&&(e=n),!!l.isString(e)){if(l.isString(o))return e.indexOf(o)!==-1;if(l.isRegExp(o))return o.test(e)}}function Qn(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,o)=>n.toUpperCase()+o)}function eo(t,e){const n=l.toCamelCase(" "+e);["get","set","has"].forEach(o=>{Object.defineProperty(t,o+n,{value:function(i,r,s){return this[o].call(this,e,i,r,s)},configurable:!0})})}class I{constructor(e){e&&this.set(e)}set(e,n,o){const i=this;function r(c,f,p){const u=H(f);if(!u)throw new Error("header name must be a non-empty string");const a=l.findKey(i,u);(!a||i[a]===void 0||p===!0||p===void 0&&i[a]!==!1)&&(i[a||f]=ne(c))}const s=(c,f)=>l.forEach(c,(p,u)=>r(p,u,f));return l.isPlainObject(e)||e instanceof this.constructor?s(e,n):l.isString(e)&&(e=e.trim())&&!$n(e)?s(qn(e),n):e!=null&&r(n,e,o),this}get(e,n){if(e=H(e),e){const o=l.findKey(this,e);if(o){const i=this[o];if(!n)return i;if(n===!0)return Yn(i);if(l.isFunction(n))return n.call(this,i,o);if(l.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=H(e),e){const o=l.findKey(this,e);return!!(o&&this[o]!==void 0&&(!n||fe(this,this[o],o,n)))}return!1}delete(e,n){const o=this;let i=!1;function r(s){if(s=H(s),s){const c=l.findKey(o,s);c&&(!n||fe(o,o[c],c,n))&&(delete o[c],i=!0)}}return l.isArray(e)?e.forEach(r):r(e),i}clear(e){const n=Object.keys(this);let o=n.length,i=!1;for(;o--;){const r=n[o];(!e||fe(this,this[r],r,e,!0))&&(delete this[r],i=!0)}return i}normalize(e){const n=this,o={};return l.forEach(this,(i,r)=>{const s=l.findKey(o,r);if(s){n[s]=ne(i),delete n[r];return}const c=e?Qn(r):String(r).trim();c!==r&&delete n[r],n[c]=ne(i),o[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return l.forEach(this,(o,i)=>{o!=null&&o!==!1&&(n[i]=e&&l.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const o=new this(e);return n.forEach(i=>o.set(i)),o}static accessor(e){const o=(this[Ve]=this[Ve]={accessors:{}}).accessors,i=this.prototype;function r(s){const c=H(s);o[c]||(eo(i,s),o[c]=!0)}return l.isArray(e)?e.forEach(r):r(e),this}}I.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);l.reduceDescriptors(I.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(o){this[n]=o}}});l.freezeMethods(I);function pe(t,e){const n=this||q,o=e||n,i=I.from(o.headers);let r=o.data;return l.forEach(t,function(c){r=c.call(n,r,i.normalize(),e?e.status:void 0)}),i.normalize(),r}function _t(t){return!!(t&&t.__CANCEL__)}function Y(t,e,n){_.call(this,t??"canceled",_.ERR_CANCELED,e,n),this.name="CanceledError"}l.inherits(Y,_,{__CANCEL__:!0});function to(t,e,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?t(n):e(new _("Request failed with status code "+n.status,[_.ERR_BAD_REQUEST,_.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const no=C.hasStandardBrowserEnv?{write(t,e,n,o,i,r){const s=[t+"="+encodeURIComponent(e)];l.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),l.isString(o)&&s.push("path="+o),l.isString(i)&&s.push("domain="+i),r===!0&&s.push("secure"),document.cookie=s.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function oo(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function io(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function vt(t,e){return t&&!oo(e)?io(t,e):e}const ro=C.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let o;function i(r){let s=r;return e&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return o=i(window.location.href),function(s){const c=l.isString(s)?i(s):s;return c.protocol===o.protocol&&c.host===o.host}}():function(){return function(){return!0}}();function so(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function ao(t,e){t=t||10;const n=new Array(t),o=new Array(t);let i=0,r=0,s;return e=e!==void 0?e:1e3,function(f){const p=Date.now(),u=o[r];s||(s=p),n[i]=f,o[i]=p;let a=r,h=0;for(;a!==i;)h+=n[a++],a=a%t;if(i=(i+1)%t,i===r&&(r=(r+1)%t),p-s<e)return;const w=u&&p-u;return w?Math.round(h*1e3/w):void 0}}function Ge(t,e){let n=0;const o=ao(50,250);return i=>{const r=i.loaded,s=i.lengthComputable?i.total:void 0,c=r-n,f=o(c),p=r<=s;n=r;const u={loaded:r,total:s,progress:s?r/s:void 0,bytes:c,rate:f||void 0,estimated:f&&s&&p?(s-r)/f:void 0,event:i};u[e?"download":"upload"]=!0,t(u)}}const co=typeof XMLHttpRequest<"u",uo=co&&function(t){return new Promise(function(n,o){let i=t.data;const r=I.from(t.headers).normalize();let{responseType:s,withXSRFToken:c}=t,f;function p(){t.cancelToken&&t.cancelToken.unsubscribe(f),t.signal&&t.signal.removeEventListener("abort",f)}let u;if(l.isFormData(i)){if(C.hasStandardBrowserEnv||C.hasStandardBrowserWebWorkerEnv)r.setContentType(!1);else if((u=r.getContentType())!==!1){const[m,...g]=u?u.split(";").map(b=>b.trim()).filter(Boolean):[];r.setContentType([m||"multipart/form-data",...g].join("; "))}}let a=new XMLHttpRequest;if(t.auth){const m=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";r.set("Authorization","Basic "+btoa(m+":"+g))}const h=vt(t.baseURL,t.url);a.open(t.method.toUpperCase(),yt(h,t.params,t.paramsSerializer),!0),a.timeout=t.timeout;function w(){if(!a)return;const m=I.from("getAllResponseHeaders"in a&&a.getAllResponseHeaders()),b={data:!s||s==="text"||s==="json"?a.responseText:a.response,status:a.status,statusText:a.statusText,headers:m,config:t,request:a};to(function(k){n(k),p()},function(k){o(k),p()},b),a=null}if("onloadend"in a?a.onloadend=w:a.onreadystatechange=function(){!a||a.readyState!==4||a.status===0&&!(a.responseURL&&a.responseURL.indexOf("file:")===0)||setTimeout(w)},a.onabort=function(){a&&(o(new _("Request aborted",_.ECONNABORTED,t,a)),a=null)},a.onerror=function(){o(new _("Network Error",_.ERR_NETWORK,t,a)),a=null},a.ontimeout=function(){let g=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const b=t.transitional||bt;t.timeoutErrorMessage&&(g=t.timeoutErrorMessage),o(new _(g,b.clarifyTimeoutError?_.ETIMEDOUT:_.ECONNABORTED,t,a)),a=null},C.hasStandardBrowserEnv&&(c&&l.isFunction(c)&&(c=c(t)),c||c!==!1&&ro(h))){const m=t.xsrfHeaderName&&t.xsrfCookieName&&no.read(t.xsrfCookieName);m&&r.set(t.xsrfHeaderName,m)}i===void 0&&r.setContentType(null),"setRequestHeader"in a&&l.forEach(r.toJSON(),function(g,b){a.setRequestHeader(b,g)}),l.isUndefined(t.withCredentials)||(a.withCredentials=!!t.withCredentials),s&&s!=="json"&&(a.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&a.addEventListener("progress",Ge(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&a.upload&&a.upload.addEventListener("progress",Ge(t.onUploadProgress)),(t.cancelToken||t.signal)&&(f=m=>{a&&(o(!m||m.type?new Y(null,t,a):m),a.abort(),a=null)},t.cancelToken&&t.cancelToken.subscribe(f),t.signal&&(t.signal.aborted?f():t.signal.addEventListener("abort",f)));const d=so(h);if(d&&C.protocols.indexOf(d)===-1){o(new _("Unsupported protocol "+d+":",_.ERR_BAD_REQUEST,t));return}a.send(i||null)})},be={http:Nn,xhr:uo};l.forEach(be,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const qe=t=>`- ${t}`,lo=t=>l.isFunction(t)||t===null||t===!1,Ot={getAdapter:t=>{t=l.isArray(t)?t:[t];const{length:e}=t;let n,o;const i={};for(let r=0;r<e;r++){n=t[r];let s;if(o=n,!lo(n)&&(o=be[(s=String(n)).toLowerCase()],o===void 0))throw new _(`Unknown adapter '${s}'`);if(o)break;i[s||"#"+r]=o}if(!o){const r=Object.entries(i).map(([c,f])=>`adapter ${c} `+(f===!1?"is not supported by the environment":"is not available in the build"));let s=e?r.length>1?`since :
`+r.map(qe).join(`
`):" "+qe(r[0]):"as no adapter specified";throw new _("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return o},adapters:be};function me(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Y(null,t)}function Ye(t){return me(t),t.headers=I.from(t.headers),t.data=pe.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ot.getAdapter(t.adapter||q.adapter)(t).then(function(o){return me(t),o.data=pe.call(t,t.transformResponse,o),o.headers=I.from(o.headers),o},function(o){return _t(o)||(me(t),o&&o.response&&(o.response.data=pe.call(t,t.transformResponse,o.response),o.response.headers=I.from(o.response.headers))),Promise.reject(o)})}const $e=t=>t instanceof I?{...t}:t;function B(t,e){e=e||{};const n={};function o(p,u,a){return l.isPlainObject(p)&&l.isPlainObject(u)?l.merge.call({caseless:a},p,u):l.isPlainObject(u)?l.merge({},u):l.isArray(u)?u.slice():u}function i(p,u,a){if(l.isUndefined(u)){if(!l.isUndefined(p))return o(void 0,p,a)}else return o(p,u,a)}function r(p,u){if(!l.isUndefined(u))return o(void 0,u)}function s(p,u){if(l.isUndefined(u)){if(!l.isUndefined(p))return o(void 0,p)}else return o(void 0,u)}function c(p,u,a){if(a in e)return o(p,u);if(a in t)return o(void 0,p)}const f={url:r,method:r,data:r,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c,headers:(p,u)=>i($e(p),$e(u),!0)};return l.forEach(Object.keys(Object.assign({},t,e)),function(u){const a=f[u]||i,h=a(t[u],e[u],u);l.isUndefined(h)&&a!==c||(n[u]=h)}),n}const Et="1.6.8",xe={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{xe[t]=function(o){return typeof o===t||"a"+(e<1?"n ":" ")+t}});const Qe={};xe.transitional=function(e,n,o){function i(r,s){return"[Axios v"+Et+"] Transitional option '"+r+"'"+s+(o?". "+o:"")}return(r,s,c)=>{if(e===!1)throw new _(i(s," has been removed"+(n?" in "+n:"")),_.ERR_DEPRECATED);return n&&!Qe[s]&&(Qe[s]=!0,console.warn(i(s," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(r,s,c):!0}};function ho(t,e,n){if(typeof t!="object")throw new _("options must be an object",_.ERR_BAD_OPTION_VALUE);const o=Object.keys(t);let i=o.length;for(;i-- >0;){const r=o[i],s=e[r];if(s){const c=t[r],f=c===void 0||s(c,r,t);if(f!==!0)throw new _("option "+r+" must be "+f,_.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new _("Unknown option "+r,_.ERR_BAD_OPTION)}}const ke={assertOptions:ho,validators:xe},N=ke.validators;class F{constructor(e){this.defaults=e,this.interceptors={request:new Xe,response:new Xe}}async request(e,n){try{return await this._request(e,n)}catch(o){if(o instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";o.stack?r&&!String(o.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+r):o.stack=r}throw o}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=B(this.defaults,n);const{transitional:o,paramsSerializer:i,headers:r}=n;o!==void 0&&ke.assertOptions(o,{silentJSONParsing:N.transitional(N.boolean),forcedJSONParsing:N.transitional(N.boolean),clarifyTimeoutError:N.transitional(N.boolean)},!1),i!=null&&(l.isFunction(i)?n.paramsSerializer={serialize:i}:ke.assertOptions(i,{encode:N.function,serialize:N.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=r&&l.merge(r.common,r[n.method]);r&&l.forEach(["delete","get","head","post","put","patch","common"],d=>{delete r[d]}),n.headers=I.concat(s,r);const c=[];let f=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(f=f&&m.synchronous,c.unshift(m.fulfilled,m.rejected))});const p=[];this.interceptors.response.forEach(function(m){p.push(m.fulfilled,m.rejected)});let u,a=0,h;if(!f){const d=[Ye.bind(this),void 0];for(d.unshift.apply(d,c),d.push.apply(d,p),h=d.length,u=Promise.resolve(n);a<h;)u=u.then(d[a++],d[a++]);return u}h=c.length;let w=n;for(a=0;a<h;){const d=c[a++],m=c[a++];try{w=d(w)}catch(g){m.call(this,g);break}}try{u=Ye.call(this,w)}catch(d){return Promise.reject(d)}for(a=0,h=p.length;a<h;)u=u.then(p[a++],p[a++]);return u}getUri(e){e=B(this.defaults,e);const n=vt(e.baseURL,e.url);return yt(n,e.params,e.paramsSerializer)}}l.forEach(["delete","get","head","options"],function(e){F.prototype[e]=function(n,o){return this.request(B(o||{},{method:e,url:n,data:(o||{}).data}))}});l.forEach(["post","put","patch"],function(e){function n(o){return function(r,s,c){return this.request(B(c||{},{method:e,headers:o?{"Content-Type":"multipart/form-data"}:{},url:r,data:s}))}}F.prototype[e]=n(),F.prototype[e+"Form"]=n(!0)});class je{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(r){n=r});const o=this;this.promise.then(i=>{if(!o._listeners)return;let r=o._listeners.length;for(;r-- >0;)o._listeners[r](i);o._listeners=null}),this.promise.then=i=>{let r;const s=new Promise(c=>{o.subscribe(c),r=c}).then(i);return s.cancel=function(){o.unsubscribe(r)},s},e(function(r,s,c){o.reason||(o.reason=new Y(r,s,c),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new je(function(i){e=i}),cancel:e}}}function fo(t){return function(n){return t.apply(null,n)}}function po(t){return l.isObject(t)&&t.isAxiosError===!0}const Se={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Se).forEach(([t,e])=>{Se[e]=t});function Tt(t){const e=new F(t),n=st(F.prototype.request,e);return l.extend(n,F.prototype,e,{allOwnKeys:!0}),l.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return Tt(B(t,i))},n}const v=Tt(q);v.Axios=F;v.CanceledError=Y;v.CancelToken=je;v.isCancel=_t;v.VERSION=Et;v.toFormData=ae;v.AxiosError=_;v.Cancel=v.CanceledError;v.all=function(e){return Promise.all(e)};v.spread=fo;v.isAxiosError=po;v.mergeConfig=B;v.AxiosHeaders=I;v.formToJSON=t=>St(l.isHTMLForm(t)?new FormData(t):t);v.getAdapter=Ot.getAdapter;v.HttpStatusCode=Se;v.default=v;const U={auth0_domain:"dev-s7l02gby3olradaj.us.auth0.com",auth0_client_id:"zVJq0X5dmu4EPMAuDnJbSDgIIyPbg4Wg"},It=_e(localStorage.getItem("userId")),Oo=V,mo="http://localhost:8080";let Rt;async function wo(){Rt=await $t({domain:U.auth0_domain,clientId:U.auth0_client_id})}async function go(t,e,n=null,o=null){const i={method:"post",url:`https://${U.auth0_domain}/dbconnections/signup`,data:{client_id:U.auth0_client_id,email:t,password:e,connection:"Username-Password-Authentication",given_name:n,family_name:o}};try{const r=await v(i);console.log("Signup successful",r),setTimeout(async()=>{await ko(r.data),await Pt(t,e,!0)},2e3)}catch(r){alert("Signup failed: "+r),console.log(r)}}function Pt(t,e,n=!1){const o={method:"post",url:`https://${U.auth0_domain}/oauth/token`,data:{grant_type:"password",username:t,password:e,audience:`https://${U.auth0_domain}/api/v2/`,scope:"openid profile email",client_id:U.auth0_client_id}};v(o).then(i=>{const{id_token:r,access_token:s}=i.data;V.set(r),localStorage.setItem("jwt_token",r),yo(s),n&&setTimeout(()=>{et("/")},500)}).catch(function(i){alert("Login failed"),console.log(i)})}function yo(t){const e={method:"get",url:`https://${U.auth0_domain}/oauth/userinfo`,headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}};v(e).then(n=>{const o=n.data;X.set(o),o.sub&&(It.set(o.sub),localStorage.setItem("userId",o.sub))}).catch(function(n){alert("Get user info failed"),console.log(n)})}async function bo(){try{await wo(),X.set({}),V.set(""),It.set(null),localStorage.removeItem("userId"),await Rt.logout({logoutParams:{returnTo:window.location.origin}})}catch(t){console.error(t)}et("/")}async function ko(t){try{const e=await fetch(`${mo}/api/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:`${t.given_name} ${t.family_name}`,email:t.email,id:`auth0|${t._id}`})});if(e.ok)console.log("User saved to DB");else{const n=await e.json();console.error("Failed to save user to DB",n)}}catch(e){console.error("Error saving user to DB",e)}}const Eo={signup:go,login:Pt,logout:bo};export{Eo as a,vo as i,Oo as j,It as u};
