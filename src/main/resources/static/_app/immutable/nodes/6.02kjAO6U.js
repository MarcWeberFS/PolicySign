import{s as re,n as Z,c as Y,r as ne}from"../chunks/scheduler.Cu15T-2q.js";import{S as ue,i as de,s as U,v as $,a as V,d as A,f as b,e as h,c as m,h as x,g as R,b as i,j as d,l as O,k as H,p as ce,w as L,t as fe,m as pe,n as he,q as me}from"../chunks/index.Cx9YqTjb.js";import{w as q}from"../chunks/index.BQQFQYTz.js";function ee(r){let e,l,f="Upload Document",a,t,o,s,n="Upload PDF",p,u,N,C,D,_=r[7]&&te(r);return{c(){e=h("div"),l=h("h1"),l.textContent=f,a=U(),t=h("div"),o=h("div"),s=h("label"),s.textContent=n,p=U(),u=h("input"),N=U(),_&&_.c(),this.h()},l(k){e=m(k,"DIV",{class:!0});var v=x(e);l=m(v,"H1",{class:!0,"data-svelte-h":!0}),R(l)!=="svelte-1dbxkce"&&(l.textContent=f),a=V(v),t=m(v,"DIV",{class:!0});var B=x(t);o=m(B,"DIV",{class:!0});var w=x(o);s=m(w,"LABEL",{class:!0,"data-svelte-h":!0}),R(s)!=="svelte-113yvb9"&&(s.textContent=n),p=V(w),u=m(w,"INPUT",{type:!0,accept:!0,class:!0}),w.forEach(b),N=V(B),_&&_.l(B),B.forEach(b),v.forEach(b),this.h()},h(){i(l,"class","text-3xl font-bold text-center mb-6"),i(s,"class","block text-gray-700 text-sm font-bold mb-2"),i(u,"type","file"),i(u,"accept","application/pdf"),i(u,"class","shadow border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),i(o,"class","mb-4"),i(t,"class","bg-white shadow-md rounded px-6 pt-6 pb-8 mb-4"),i(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12")},m(k,v){A(k,e,v),d(e,l),d(e,a),d(e,t),d(t,o),d(o,s),d(o,p),d(o,u),d(t,N),_&&_.m(t,null),C||(D=O(u,"change",r[17]),C=!0)},p(k,v){k[7]?_?_.p(k,v):(_=te(k),_.c(),_.m(t,null)):_&&(_.d(1),_=null)},d(k){k&&b(e),_&&_.d(),C=!1,D()}}}function te(r){let e,l,f="Next",a,t;return{c(){e=h("div"),l=h("button"),l.textContent=f,this.h()},l(o){e=m(o,"DIV",{class:!0});var s=x(e);l=m(s,"BUTTON",{class:!0,"data-svelte-h":!0}),R(l)!=="svelte-lly8x1"&&(l.textContent=f),s.forEach(b),this.h()},h(){i(l,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"),i(e,"class","flex items-center justify-between")},m(o,s){A(o,e,s),d(e,l),a||(t=O(l,"click",r[19]),a=!0)},p:Z,d(o){o&&b(e),a=!1,t()}}}function le(r){let e,l,f="Complete the Form",a,t,o,s,n="E-Mail of the signee",p,u,N,C,D,_="Title",k,v,B,w,P,X="Description",M,I,J,z,F,G='<button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Submit</button>',W,K,y=r[7]&&se(r);return{c(){e=h("div"),l=h("h1"),l.textContent=f,a=U(),t=h("form"),o=h("div"),s=h("label"),s.textContent=n,p=U(),u=h("input"),N=U(),C=h("div"),D=h("label"),D.textContent=_,k=U(),v=h("input"),B=U(),w=h("div"),P=h("label"),P.textContent=X,M=U(),I=h("textarea"),J=U(),y&&y.c(),z=U(),F=h("div"),F.innerHTML=G,this.h()},l(j){e=m(j,"DIV",{class:!0});var T=x(e);l=m(T,"H1",{class:!0,"data-svelte-h":!0}),R(l)!=="svelte-5iv4uu"&&(l.textContent=f),a=V(T),t=m(T,"FORM",{class:!0});var S=x(t);o=m(S,"DIV",{class:!0});var c=x(o);s=m(c,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(s)!=="svelte-1pq9vec"&&(s.textContent=n),p=V(c),u=m(c,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),c.forEach(b),N=V(S),C=m(S,"DIV",{class:!0});var E=x(C);D=m(E,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(D)!=="svelte-1hfxn5w"&&(D.textContent=_),k=V(E),v=m(E,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),E.forEach(b),B=V(S),w=m(S,"DIV",{class:!0});var g=x(w);P=m(g,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(P)!=="svelte-199vnqc"&&(P.textContent=X),M=V(g),I=m(g,"TEXTAREA",{id:!0,placeholder:!0,class:!0}),x(I).forEach(b),g.forEach(b),J=V(S),y&&y.l(S),z=V(S),F=m(S,"DIV",{class:!0,"data-svelte-h":!0}),R(F)!=="svelte-13i0lts"&&(F.innerHTML=G),S.forEach(b),T.forEach(b),this.h()},h(){i(l,"class","text-3xl font-bold text-center mb-6"),i(s,"for","email"),i(s,"class","block text-gray-700 text-sm font-bold mb-2"),i(u,"type","text"),i(u,"id","email"),i(u,"placeholder","E-Mail"),i(u,"class","shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),u.required=!0,i(o,"class","mb-4"),i(D,"for","title"),i(D,"class","block text-gray-700 text-sm font-bold mb-2"),i(v,"type","text"),i(v,"id","title"),i(v,"placeholder","Title"),i(v,"class","shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),v.required=!0,i(C,"class","mb-4"),i(P,"for","description"),i(P,"class","block text-gray-700 text-sm font-bold mb-2"),i(I,"id","description"),i(I,"placeholder","Description"),i(I,"class","shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),i(w,"class","mb-4"),i(F,"class","flex items-center justify-between"),i(t,"class","bg-white shadow-md rounded px-6 pt-6 pb-8 mb-4"),i(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12")},m(j,T){A(j,e,T),d(e,l),d(e,a),d(e,t),d(t,o),d(o,s),d(o,p),d(o,u),H(u,r[0]),d(t,N),d(t,C),d(C,D),d(C,k),d(C,v),H(v,r[1]),d(t,B),d(t,w),d(w,P),d(w,M),d(w,I),H(I,r[2]),d(t,J),y&&y.m(t,null),d(t,z),d(t,F),W||(K=[O(u,"input",r[21]),O(v,"input",r[22]),O(I,"input",r[23]),O(t,"submit",ce(r[20]))],W=!0)},p(j,T){T&1&&u.value!==j[0]&&H(u,j[0]),T&2&&v.value!==j[1]&&H(v,j[1]),T&4&&H(I,j[2]),j[7]?y?y.p(j,T):(y=se(j),y.c(),y.m(t,z)):y&&(y.d(1),y=null)},d(j){j&&b(e),y&&y.d(),W=!1,ne(K)}}}function se(r){let e,l,f,a,t,o,s,n=r[5]!==null&&r[4]!==null&&oe(r);return{c(){e=h("div"),l=h("object"),f=U(),a=h("div"),t=U(),n&&n.c(),this.h()},l(p){e=m(p,"DIV",{class:!0,style:!0});var u=x(e);l=m(u,"OBJECT",{data:!0,type:!0,class:!0}),x(l).forEach(b),f=V(u),a=m(u,"DIV",{class:!0}),x(a).forEach(b),t=V(u),n&&n.l(u),u.forEach(b),this.h()},h(){i(l,"data",r[7]),i(l,"type","application/pdf"),i(l,"class","w-full h-full svelte-1knbwuc"),i(a,"class","absolute top-0 left-0 w-full h-full cursor-crosshair"),i(e,"class","relative overflow-auto mb-4"),L(e,"height",r[8])},m(p,u){A(p,e,u),d(e,l),d(e,f),d(e,a),d(e,t),n&&n.m(e,null),o||(s=O(a,"click",r[18]),o=!0)},p(p,u){u&128&&i(l,"data",p[7]),p[5]!==null&&p[4]!==null?n?n.p(p,u):(n=oe(p),n.c(),n.m(e,null)):n&&(n.d(1),n=null),u&256&&L(e,"height",p[8])},d(p){p&&b(e),n&&n.d(),o=!1,s()}}}function oe(r){let e,l,f,a,t,o,s;return{c(){e=h("div"),l=h("div"),f=U(),a=h("div"),t=h("input"),this.h()},l(n){e=m(n,"DIV",{class:!0,style:!0});var p=x(e);l=m(p,"DIV",{class:!0,style:!0}),x(l).forEach(b),f=V(p),a=m(p,"DIV",{class:!0,style:!0});var u=x(a);t=m(u,"INPUT",{type:!0,min:!0,max:!0,class:!0}),u.forEach(b),p.forEach(b),this.h()},h(){i(l,"class","bg-red-500 rounded-full"),L(l,"width",r[3]+"px"),L(l,"height",r[3]/2+"px"),i(t,"type","range"),i(t,"min","10"),i(t,"max","200"),i(t,"class","w-full"),i(a,"class","absolute bg-white p-2 border rounded shadow-md"),L(a,"top","-60px"),L(a,"left","0"),L(a,"width","200px"),i(e,"class","absolute"),L(e,"top",r[4]+"px"),L(e,"left",r[5]+"px")},m(n,p){A(n,e,p),d(e,l),d(e,f),d(e,a),d(a,t),H(t,r[3]),o||(s=[O(t,"change",r[24]),O(t,"input",r[24])],o=!0)},p(n,p){p&8&&L(l,"width",n[3]+"px"),p&8&&L(l,"height",n[3]/2+"px"),p&8&&H(t,n[3]),p&16&&L(e,"top",n[4]+"px"),p&32&&L(e,"left",n[5]+"px")},d(n){n&&b(e),o=!1,ne(s)}}}function ae(r){let e,l,f,a;return{c(){e=h("div"),l=h("div"),f=h("span"),a=fe(r[9]),this.h()},l(t){e=m(t,"DIV",{class:!0});var o=x(e);l=m(o,"DIV",{class:!0,role:!0});var s=x(l);f=m(s,"SPAN",{class:!0});var n=x(f);a=pe(n,r[9]),n.forEach(b),s.forEach(b),o.forEach(b),this.h()},h(){i(f,"class","block sm:inline"),i(l,"class","bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative"),i(l,"role","alert"),i(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4")},m(t,o){A(t,e,o),d(e,l),d(l,f),d(f,a)},p(t,o){o&512&&he(a,t[9])},d(t){t&&b(e)}}}function be(r){let e,l,f,a=r[6]===1&&ee(r),t=r[6]===2&&le(r),o=r[6]===3&&ae(r);return{c(){a&&a.c(),e=U(),t&&t.c(),l=U(),o&&o.c(),f=$()},l(s){a&&a.l(s),e=V(s),t&&t.l(s),l=V(s),o&&o.l(s),f=$()},m(s,n){a&&a.m(s,n),A(s,e,n),t&&t.m(s,n),A(s,l,n),o&&o.m(s,n),A(s,f,n)},p(s,[n]){s[6]===1?a?a.p(s,n):(a=ee(s),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),s[6]===2?t?t.p(s,n):(t=le(s),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null),s[6]===3?o?o.p(s,n):(o=ae(s),o.c(),o.m(f.parentNode,f)):o&&(o.d(1),o=null)},i:Z,o:Z,d(s){s&&(b(e),b(l),b(f)),a&&a.d(s),t&&t.d(s),o&&o.d(s)}}}const ve="http://localhost:8080";function _e(r,e,l){let f,a,t,o,s,n,p,u,N=q("");Y(r,N,c=>l(7,s=c));let C=q("500px");Y(r,C,c=>l(8,n=c));let D=q(1);Y(r,D,c=>l(6,o=c));let _=q(null);Y(r,_,c=>l(5,t=c));let k=q(null);Y(r,k,c=>l(4,a=c));let v=q(50);Y(r,v,c=>l(3,f=c));const B=q("");let w="",P="",X="",M,I=q("");Y(r,I,c=>l(9,p=c));const J=sessionStorage.getItem("user");J?(M=JSON.parse(J).sub,console.log("User ID retrieved from session storage:",M)):console.log("No user found in session storage.");const z=()=>new Promise((c,E)=>{if(window.pdfjsLib){c();return}const g=document.createElement("script");g.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js",g.onload=()=>c(),g.onerror=()=>E(new Error("Failed to load PDF.js")),document.head.appendChild(g)}),F=async c=>{const E=c.target.files;if(E.length>0){u=E[0];const g=URL.createObjectURL(u);N.set(g),await z();const ie=(await pdfjsLib.getDocument(g).promise).numPages;C.set(`${ie*1100}px`)}};function G(c){const E=c.currentTarget.getBoundingClientRect(),g=c.clientX-E.left,Q=c.clientY-E.top;console.log(`Clicked coordinates: X=${g}, Y=${Q}`),_.set(g),k.set(Q)}const W=()=>{D.set(2)},K=async()=>{if(D.set(3),!M){alert("User ID is not set. Please login again.");return}const c=new FormData;c.append("file",u),c.append("signedByEmail",w),c.append("xSignature",t),c.append("ySignature",a),c.append("signatureWidth",f.toString()),c.append("title",P),c.append("description",X),c.append("userId",M);try{const E=await fetch(ve+"/api/upload",{method:"POST",body:c});if(E.ok){const g=await E.json();B.set(g.fileUrl),I.set("File uploaded successfully!"),console.log("Upload successful:",g)}else{const g=await E.json();I.set(`Error: ${g.message}`)}}catch(E){console.error("Error uploading file:",E),I.set("Error uploading file. Please try again.")}};function y(){w=this.value,l(0,w)}function j(){P=this.value,l(1,P)}function T(){X=this.value,l(2,X)}function S(){f=me(this.value),v.set(f)}return[w,P,X,f,a,t,o,s,n,p,N,C,D,_,k,v,I,F,G,W,K,y,j,T,S]}class ye extends ue{constructor(e){super(),de(this,e,_e,be,re,{})}}export{ye as component};
