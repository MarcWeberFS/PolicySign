import{s as fe,n as te,c as q,r as ce}from"../chunks/scheduler.Cu15T-2q.js";import{S as he,i as me,s as T,x as se,a as V,d as F,f as b,e as h,c as m,h as x,g as z,b as r,j as c,l as O,k as X,p as be,z as N,t as ve,m as ge,n as _e,q as ye}from"../chunks/index.B14TFfsA.js";import{w as J}from"../chunks/index.BQQFQYTz.js";let Z;const xe=new Uint8Array(16);function we(){if(!Z&&(Z=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Z))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Z(xe)}const E=[];for(let t=0;t<256;++t)E.push((t+256).toString(16).slice(1));function De(t,e=0){return E[t[e+0]]+E[t[e+1]]+E[t[e+2]]+E[t[e+3]]+"-"+E[t[e+4]]+E[t[e+5]]+"-"+E[t[e+6]]+E[t[e+7]]+"-"+E[t[e+8]]+E[t[e+9]]+"-"+E[t[e+10]]+E[t[e+11]]+E[t[e+12]]+E[t[e+13]]+E[t[e+14]]+E[t[e+15]]}const ke=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ne={randomUUID:ke};function Ee(t,e,s){if(ne.randomUUID&&!e&&!t)return ne.randomUUID();t=t||{};const d=t.random||(t.rng||we)();return d[6]=d[6]&15|64,d[8]=d[8]&63|128,De(d)}function oe(t){let e,s,d="Upload Document",a,l,o,n,i="Upload PDF",f,u,R,C,I,g=t[7]&&ae(t);return{c(){e=h("div"),s=h("h1"),s.textContent=d,a=T(),l=h("div"),o=h("div"),n=h("label"),n.textContent=i,f=T(),u=h("input"),R=T(),g&&g.c(),this.h()},l(k){e=m(k,"DIV",{class:!0});var v=x(e);s=m(v,"H1",{class:!0,"data-svelte-h":!0}),z(s)!=="svelte-1dbxkce"&&(s.textContent=d),a=V(v),l=m(v,"DIV",{class:!0});var j=x(l);o=m(j,"DIV",{class:!0});var w=x(o);n=m(w,"LABEL",{class:!0,"data-svelte-h":!0}),z(n)!=="svelte-113yvb9"&&(n.textContent=i),f=V(w),u=m(w,"INPUT",{type:!0,accept:!0,class:!0}),w.forEach(b),R=V(j),g&&g.l(j),j.forEach(b),v.forEach(b),this.h()},h(){r(s,"class","text-3xl font-bold text-center mb-6"),r(n,"class","block text-gray-700 text-sm font-bold mb-2"),r(u,"type","file"),r(u,"accept","application/pdf"),r(u,"class","shadow border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),r(o,"class","mb-4"),r(l,"class","bg-white shadow-md rounded px-6 pt-6 pb-8 mb-4"),r(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12")},m(k,v){F(k,e,v),c(e,s),c(e,a),c(e,l),c(l,o),c(o,n),c(o,f),c(o,u),c(l,R),g&&g.m(l,null),C||(I=O(u,"change",t[17]),C=!0)},p(k,v){k[7]?g?g.p(k,v):(g=ae(k),g.c(),g.m(l,null)):g&&(g.d(1),g=null)},d(k){k&&b(e),g&&g.d(),C=!1,I()}}}function ae(t){let e,s,d="Next",a,l;return{c(){e=h("div"),s=h("button"),s.textContent=d,this.h()},l(o){e=m(o,"DIV",{class:!0});var n=x(e);s=m(n,"BUTTON",{class:!0,"data-svelte-h":!0}),z(s)!=="svelte-lly8x1"&&(s.textContent=d),n.forEach(b),this.h()},h(){r(s,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"),r(e,"class","flex items-center justify-between")},m(o,n){F(o,e,n),c(e,s),a||(l=O(s,"click",t[19]),a=!0)},p:te,d(o){o&&b(e),a=!1,l()}}}function ie(t){let e,s,d="Complete the Form",a,l,o,n,i="E-Mail of the signee",f,u,R,C,I,g="Title",k,v,j,w,P,M="Description",H,S,K,Y,B,G='<button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Submit</button>',W,Q,D=t[7]&&re(t);return{c(){e=h("div"),s=h("h1"),s.textContent=d,a=T(),l=h("form"),o=h("div"),n=h("label"),n.textContent=i,f=T(),u=h("input"),R=T(),C=h("div"),I=h("label"),I.textContent=g,k=T(),v=h("input"),j=T(),w=h("div"),P=h("label"),P.textContent=M,H=T(),S=h("textarea"),K=T(),D&&D.c(),Y=T(),B=h("div"),B.innerHTML=G,this.h()},l(U){e=m(U,"DIV",{class:!0});var L=x(e);s=m(L,"H1",{class:!0,"data-svelte-h":!0}),z(s)!=="svelte-5iv4uu"&&(s.textContent=d),a=V(L),l=m(L,"FORM",{class:!0});var p=x(l);o=m(p,"DIV",{class:!0});var _=x(o);n=m(_,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(n)!=="svelte-1pq9vec"&&(n.textContent=i),f=V(_),u=m(_,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),_.forEach(b),R=V(p),C=m(p,"DIV",{class:!0});var y=x(C);I=m(y,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(I)!=="svelte-1hfxn5w"&&(I.textContent=g),k=V(y),v=m(y,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),y.forEach(b),j=V(p),w=m(p,"DIV",{class:!0});var A=x(w);P=m(A,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(P)!=="svelte-199vnqc"&&(P.textContent=M),H=V(A),S=m(A,"TEXTAREA",{id:!0,placeholder:!0,class:!0}),x(S).forEach(b),A.forEach(b),K=V(p),D&&D.l(p),Y=V(p),B=m(p,"DIV",{class:!0,"data-svelte-h":!0}),z(B)!=="svelte-13i0lts"&&(B.innerHTML=G),p.forEach(b),L.forEach(b),this.h()},h(){r(s,"class","text-3xl font-bold text-center mb-6"),r(n,"for","email"),r(n,"class","block text-gray-700 text-sm font-bold mb-2"),r(u,"type","text"),r(u,"id","email"),r(u,"placeholder","E-Mail"),r(u,"class","shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),u.required=!0,r(o,"class","mb-4"),r(I,"for","title"),r(I,"class","block text-gray-700 text-sm font-bold mb-2"),r(v,"type","text"),r(v,"id","title"),r(v,"placeholder","Title"),r(v,"class","shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),v.required=!0,r(C,"class","mb-4"),r(P,"for","description"),r(P,"class","block text-gray-700 text-sm font-bold mb-2"),r(S,"id","description"),r(S,"placeholder","Description"),r(S,"class","shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),r(w,"class","mb-4"),r(B,"class","flex items-center justify-between"),r(l,"class","bg-white shadow-md rounded px-6 pt-6 pb-8 mb-4"),r(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12")},m(U,L){F(U,e,L),c(e,s),c(e,a),c(e,l),c(l,o),c(o,n),c(o,f),c(o,u),X(u,t[0]),c(l,R),c(l,C),c(C,I),c(C,k),c(C,v),X(v,t[1]),c(l,j),c(l,w),c(w,P),c(w,H),c(w,S),X(S,t[2]),c(l,K),D&&D.m(l,null),c(l,Y),c(l,B),W||(Q=[O(u,"input",t[21]),O(v,"input",t[22]),O(S,"input",t[23]),O(l,"submit",be(t[20]))],W=!0)},p(U,L){L&1&&u.value!==U[0]&&X(u,U[0]),L&2&&v.value!==U[1]&&X(v,U[1]),L&4&&X(S,U[2]),U[7]?D?D.p(U,L):(D=re(U),D.c(),D.m(l,Y)):D&&(D.d(1),D=null)},d(U){U&&b(e),D&&D.d(),W=!1,ce(Q)}}}function re(t){let e,s,d,a,l,o,n,i=t[5]!==null&&t[4]!==null&&ue(t);return{c(){e=h("div"),s=h("object"),d=T(),a=h("div"),l=T(),i&&i.c(),this.h()},l(f){e=m(f,"DIV",{class:!0,style:!0});var u=x(e);s=m(u,"OBJECT",{data:!0,type:!0,class:!0}),x(s).forEach(b),d=V(u),a=m(u,"DIV",{class:!0}),x(a).forEach(b),l=V(u),i&&i.l(u),u.forEach(b),this.h()},h(){r(s,"data",t[7]),r(s,"type","application/pdf"),r(s,"class","w-full h-full svelte-1knbwuc"),r(a,"class","absolute top-0 left-0 w-full h-full cursor-crosshair"),r(e,"class","relative overflow-auto mb-4"),N(e,"height",t[8])},m(f,u){F(f,e,u),c(e,s),c(e,d),c(e,a),c(e,l),i&&i.m(e,null),o||(n=O(a,"click",t[18]),o=!0)},p(f,u){u&128&&r(s,"data",f[7]),f[5]!==null&&f[4]!==null?i?i.p(f,u):(i=ue(f),i.c(),i.m(e,null)):i&&(i.d(1),i=null),u&256&&N(e,"height",f[8])},d(f){f&&b(e),i&&i.d(),o=!1,n()}}}function ue(t){let e,s,d,a,l,o,n;return{c(){e=h("div"),s=h("div"),d=T(),a=h("div"),l=h("input"),this.h()},l(i){e=m(i,"DIV",{class:!0,style:!0});var f=x(e);s=m(f,"DIV",{class:!0,style:!0}),x(s).forEach(b),d=V(f),a=m(f,"DIV",{class:!0,style:!0});var u=x(a);l=m(u,"INPUT",{type:!0,min:!0,max:!0,class:!0}),u.forEach(b),f.forEach(b),this.h()},h(){r(s,"class","bg-red-500 rounded-full"),N(s,"width",t[3]+"px"),N(s,"height",t[3]/2+"px"),r(l,"type","range"),r(l,"min","10"),r(l,"max","200"),r(l,"class","w-full"),r(a,"class","absolute bg-white p-2 border rounded shadow-md"),N(a,"top","-60px"),N(a,"left","0"),N(a,"width","200px"),r(e,"class","absolute"),N(e,"top",t[4]+"px"),N(e,"left",t[5]+"px")},m(i,f){F(i,e,f),c(e,s),c(e,d),c(e,a),c(a,l),X(l,t[3]),o||(n=[O(l,"change",t[24]),O(l,"input",t[24])],o=!0)},p(i,f){f&8&&N(s,"width",i[3]+"px"),f&8&&N(s,"height",i[3]/2+"px"),f&8&&X(l,i[3]),f&16&&N(e,"top",i[4]+"px"),f&32&&N(e,"left",i[5]+"px")},d(i){i&&b(e),o=!1,ce(n)}}}function de(t){let e,s,d,a;return{c(){e=h("div"),s=h("div"),d=h("span"),a=ve(t[9]),this.h()},l(l){e=m(l,"DIV",{class:!0});var o=x(e);s=m(o,"DIV",{class:!0,role:!0});var n=x(s);d=m(n,"SPAN",{class:!0});var i=x(d);a=ge(i,t[9]),i.forEach(b),n.forEach(b),o.forEach(b),this.h()},h(){r(d,"class","block sm:inline"),r(s,"class","bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative"),r(s,"role","alert"),r(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4")},m(l,o){F(l,e,o),c(e,s),c(s,d),c(d,a)},p(l,o){o&512&&_e(a,l[9])},d(l){l&&b(e)}}}function Ce(t){let e,s,d,a=t[6]===1&&oe(t),l=t[6]===2&&ie(t),o=t[6]===3&&de(t);return{c(){a&&a.c(),e=T(),l&&l.c(),s=T(),o&&o.c(),d=se()},l(n){a&&a.l(n),e=V(n),l&&l.l(n),s=V(n),o&&o.l(n),d=se()},m(n,i){a&&a.m(n,i),F(n,e,i),l&&l.m(n,i),F(n,s,i),o&&o.m(n,i),F(n,d,i)},p(n,[i]){n[6]===1?a?a.p(n,i):(a=oe(n),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),n[6]===2?l?l.p(n,i):(l=ie(n),l.c(),l.m(s.parentNode,s)):l&&(l.d(1),l=null),n[6]===3?o?o.p(n,i):(o=de(n),o.c(),o.m(d.parentNode,d)):o&&(o.d(1),o=null)},i:te,o:te,d(n){n&&(b(e),b(s),b(d)),a&&a.d(n),l&&l.d(n),o&&o.d(n)}}}const Ie="http://localhost:8080";function Ue(t,e,s){let d,a,l,o,n,i,f,u,R=J("");q(t,R,p=>s(7,n=p));let C=J("500px");q(t,C,p=>s(8,i=p));let I=J(1);q(t,I,p=>s(6,o=p));let g=J(null);q(t,g,p=>s(5,l=p));let k=J(null);q(t,k,p=>s(4,a=p));let v=J(50);q(t,v,p=>s(3,d=p));let j="",w="",P="",M,H=J("");q(t,H,p=>s(9,f=p));const S=sessionStorage.getItem("user");S?(M=JSON.parse(S).sub,console.log("User ID retrieved from session storage:",M)):console.log("No user found in session storage.");const K=()=>new Promise((p,_)=>{if(window.pdfjsLib){p();return}const y=document.createElement("script");y.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js",y.onload=()=>p(),y.onerror=()=>_(new Error("Failed to load PDF.js")),document.head.appendChild(y)}),Y=async p=>{const _=p.target.files;if(_.length>0){u=_[0];const y=URL.createObjectURL(u);R.set(y),await K();const $=(await pdfjsLib.getDocument(y).promise).numPages;C.set(`${$*1100}px`)}};function B(p){const _=p.currentTarget.getBoundingClientRect(),y=p.clientX-_.left,A=p.clientY-_.top;console.log(`Clicked coordinates: X=${y}, Y=${A}`),g.set(y),k.set(A)}const G=()=>{I.set(2)},W=async()=>{if(I.set(3),!M){alert("User ID is not set. Please login again.");return}const p=Ee(),_=new FormData;_.append("files",u),_.append("name",u.name),_.append("size",u.size),_.append("type",u.type),_.append("customId",p),_.append("acl","public-read"),_.append("metadata",null),_.append("contentDisposition","inline"),u.name,u.size,u.type;try{const y=await fetch("https://uploadthing.com/api/uploadFiles",{method:"POST",headers:{"Content-Type":"application/json","X-Uploadthing-Api-Key":"sk_live_2363a711d4e24092166444bd64cd77152f35a439088498e01c12fc08c94da1dd","X-Uploadthing-Be-Adapter":"express","X-Uploadthing-Fe-Package":"@uploadthing/react","X-Uploadthing-Version":"6.4.0"},body:_});if(!y.ok)throw new Error(`HTTP error! status: ${y.status}`);const A=await y.json();console.log("Upload successful:",A);const $=A.data[0].fileUrl,le={id:p,userId:M,signedByEmail:j,title:w,description:P,xlocation:l,ylocation:a,signatureWidth:d,url:$};console.log("Document Data:",le);const ee=await fetch(Ie+"/api/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(le)});if(!ee.ok)throw new Error(`HTTP error! status: ${ee.status}`);const pe=await ee.json();console.log("Backend response:",pe),H.set("Document uploaded successfully!")}catch(y){console.error("Error uploading file:",y),H.set("Error uploading file. Please try again.")}};function Q(){j=this.value,s(0,j)}function D(){w=this.value,s(1,w)}function U(){P=this.value,s(2,P)}function L(){d=ye(this.value),v.set(d)}return[j,w,P,d,a,l,o,n,i,f,R,C,I,g,k,v,H,Y,B,G,W,Q,D,U,L]}class Pe extends he{constructor(e){super(),me(this,e,Ue,Ce,fe,{})}}export{Pe as component};
