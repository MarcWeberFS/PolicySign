import{s as be,n as pe,o as Ce,g as _e}from"../chunks/scheduler.Dw9uJjIS.js";import{S as Ie,i as ke,e as u,s as b,c as h,g as W,a as C,h as m,f as r,b as f,d as B,k as s,n as Pe,o as A,p as L,q as j}from"../chunks/index.3R_Ud9pO.js";import{e as me}from"../chunks/each.D6YF6ztN.js";import{j as Se,u as ge}from"../chunks/auth.service.C2raG7Il.js";function De(c,t,i){const l=c.slice();return l[3]=t[i],l}function Ee(c){let t,i;return{c(){t=u("p"),i=A(c[2]),this.h()},l(l){t=h(l,"P",{class:!0});var o=m(t);i=L(o,c[2]),o.forEach(r),this.h()},h(){f(t,"class","text-red-500 text-center")},m(l,o){B(l,t,o),s(t,i)},p(l,o){o&4&&j(i,l[2])},d(l){l&&r(t)}}}function we(c){let t,i,l,o,p=c[3].title+"",_,n,w,d,e,v,a,D,oe="Signed by:",X,G=c[3].signedByEmail+"",H,Y,x,k,M=c[3].status+"",T,F,Z,$,P,S,ne="Created on:",ee,y=new Date(c[3].creationDate).toLocaleDateString()+"",U,te,q,V,N,ie="Last updated:",se,z=new Date(c[3].updateDate).toLocaleDateString()+"",J,ae;return{c(){t=u("div"),i=u("div"),l=u("h2"),o=u("a"),_=A(p),d=b(),e=u("div"),v=u("div"),a=u("p"),D=u("span"),D.textContent=oe,X=b(),H=A(G),Y=b(),x=u("div"),k=u("p"),T=A(M),Z=b(),$=u("div"),P=u("p"),S=u("span"),S.textContent=ne,ee=b(),U=A(y),te=b(),q=u("div"),V=u("p"),N=u("span"),N.textContent=ie,se=b(),J=A(z),ae=b(),this.h()},l(g){t=h(g,"DIV",{class:!0});var E=m(t);i=h(E,"DIV",{class:!0});var K=m(i);l=h(K,"H2",{class:!0});var re=m(l);o=h(re,"A",{href:!0,download:!0});var ce=m(o);_=L(ce,p),ce.forEach(r),re.forEach(r),d=C(K),e=h(K,"DIV",{class:!0});var I=m(e);v=h(I,"DIV",{class:!0});var de=m(v);a=h(de,"P",{});var O=m(a);D=h(O,"SPAN",{class:!0,"data-svelte-h":!0}),W(D)!=="svelte-13c10p6"&&(D.textContent=oe),X=C(O),H=L(O,G),O.forEach(r),de.forEach(r),Y=C(I),x=h(I,"DIV",{class:!0});var fe=m(x);k=h(fe,"P",{class:!0});var ue=m(k);T=L(ue,M),ue.forEach(r),fe.forEach(r),Z=C(I),$=h(I,"DIV",{class:!0});var he=m($);P=h(he,"P",{});var Q=m(P);S=h(Q,"SPAN",{class:!0,"data-svelte-h":!0}),W(S)!=="svelte-1qy30zs"&&(S.textContent=ne),ee=C(Q),U=L(Q,y),Q.forEach(r),he.forEach(r),te=C(I),q=h(I,"DIV",{class:!0});var ve=m(q);V=h(ve,"P",{});var R=m(V);N=h(R,"SPAN",{class:!0,"data-svelte-h":!0}),W(N)!=="svelte-1hton06"&&(N.textContent=ie),se=C(R),J=L(R,z),R.forEach(r),ve.forEach(r),I.forEach(r),K.forEach(r),ae=C(E),E.forEach(r),this.h()},h(){f(o,"href",n=`${le}/api/upload/download/${c[3].id}?token=${c[0]}`),f(o,"download",w=c[3].title+".pdf"),f(l,"class","text-xl font-bold mb-2"),f(D,"class","label svelte-u0fci"),f(v,"class","svelte-u0fci"),f(k,"class",F="status-label "+(c[3].status==="PENDING"?"status-pending":"status-signed")+" svelte-u0fci"),f(x,"class","svelte-u0fci"),f(S,"class","label svelte-u0fci"),f($,"class","svelte-u0fci"),f(N,"class","label svelte-u0fci"),f(q,"class","svelte-u0fci"),f(e,"class","document-details svelte-u0fci"),f(i,"class","bg-white shadow-md rounded-lg p-6"),f(t,"class","document-card w-full p-4 svelte-u0fci")},m(g,E){B(g,t,E),s(t,i),s(i,l),s(l,o),s(o,_),s(i,d),s(i,e),s(e,v),s(v,a),s(a,D),s(a,X),s(a,H),s(e,Y),s(e,x),s(x,k),s(k,T),s(e,Z),s(e,$),s($,P),s(P,S),s(P,ee),s(P,U),s(e,te),s(e,q),s(q,V),s(V,N),s(V,se),s(V,J),s(t,ae)},p(g,E){E&2&&p!==(p=g[3].title+"")&&j(_,p),E&3&&n!==(n=`${le}/api/upload/download/${g[3].id}?token=${g[0]}`)&&f(o,"href",n),E&2&&w!==(w=g[3].title+".pdf")&&f(o,"download",w),E&2&&G!==(G=g[3].signedByEmail+"")&&j(H,G),E&2&&M!==(M=g[3].status+"")&&j(T,M),E&2&&F!==(F="status-label "+(g[3].status==="PENDING"?"status-pending":"status-signed")+" svelte-u0fci")&&f(k,"class",F),E&2&&y!==(y=new Date(g[3].creationDate).toLocaleDateString()+"")&&j(U,y),E&2&&z!==(z=new Date(g[3].updateDate).toLocaleDateString()+"")&&j(J,z)},d(g){g&&r(t)}}}function Ve(c){let t,i="My Documents",l,o,p,_,n=c[2]&&Ee(c),w=me(c[1]),d=[];for(let e=0;e<w.length;e+=1)d[e]=we(De(c,w,e));return{c(){t=u("h1"),t.textContent=i,l=b(),n&&n.c(),o=b(),p=u("div"),_=u("div");for(let e=0;e<d.length;e+=1)d[e].c();this.h()},l(e){t=h(e,"H1",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-1fqlqb2"&&(t.textContent=i),l=C(e),n&&n.l(e),o=C(e),p=h(e,"DIV",{class:!0});var v=m(p);_=h(v,"DIV",{class:!0});var a=m(_);for(let D=0;D<d.length;D+=1)d[D].l(a);a.forEach(r),v.forEach(r),this.h()},h(){f(t,"class","text-3xl font-bold text-center mb-6"),f(_,"class","flex flex-wrap -mx-4"),f(p,"class","container mx-auto px-4")},m(e,v){B(e,t,v),B(e,l,v),n&&n.m(e,v),B(e,o,v),B(e,p,v),s(p,_);for(let a=0;a<d.length;a+=1)d[a]&&d[a].m(_,null)},p(e,[v]){if(e[2]?n?n.p(e,v):(n=Ee(e),n.c(),n.m(o.parentNode,o)):n&&(n.d(1),n=null),v&3){w=me(e[1]);let a;for(a=0;a<w.length;a+=1){const D=De(e,w,a);d[a]?d[a].p(D,v):(d[a]=we(D),d[a].c(),d[a].m(_,null))}for(;a<d.length;a+=1)d[a].d(1);d.length=w.length}},i:pe,o:pe,d(e){e&&(r(t),r(l),r(o),r(p)),n&&n.d(e),Pe(d,e)}}}const le="http://localhost:8080";function Ne(c,t,i){let l;Se.subscribe(_=>{i(0,l=_)});let o=[],p="";return Ce(async()=>{const _=_e(ge);if(_)try{const n=await fetch(`${le}/api/upload/user/${_}`,{method:"GET",headers:{Authorization:`Bearer ${l}`}});n.ok?i(1,o=await n.json()):i(2,p="Failed to fetch documents")}catch(n){console.error("Error fetching documents:",n),i(2,p="Error fetching documents")}}),_e(ge)||(window.location.href="/login"),[l,o,p]}class Le extends Ie{constructor(t){super(),ke(this,t,Ne,Ve,be,{})}}export{Le as component};
