import{s as _e,n as K,c as R,o as ge,f as we,r as oe,g as W,d as xe}from"../chunks/scheduler.Dw9uJjIS.js";import{S as ye,i as ke,s as C,v as Z,a as D,d as N,f as b,e as h,c as m,h as w,g as B,b as r,k as f,m as A,j as z,u as Ee,w as V,o as Ce,p as De,q as Ie,t as Te}from"../chunks/index.Bg7T64vi.js";import{w as X}from"../chunks/index.CdM32__g.js";import{u as je}from"../chunks/auth.service.BEM3U0rA.js";function $(i){let e,l,d="Upload Template",o,t,a,s,n="Upload PDF",c,u,P,k,x,v=i[5]&&ee(i);return{c(){e=h("div"),l=h("h1"),l.textContent=d,o=C(),t=h("div"),a=h("div"),s=h("label"),s.textContent=n,c=C(),u=h("input"),P=C(),v&&v.c(),this.h()},l(y){e=m(y,"DIV",{class:!0});var _=w(e);l=m(_,"H1",{class:!0,"data-svelte-h":!0}),B(l)!=="svelte-16savsz"&&(l.textContent=d),o=D(_),t=m(_,"DIV",{class:!0});var I=w(t);a=m(I,"DIV",{class:!0});var T=w(a);s=m(T,"LABEL",{class:!0,"data-svelte-h":!0}),B(s)!=="svelte-113yvb9"&&(s.textContent=n),c=D(T),u=m(T,"INPUT",{type:!0,accept:!0,class:!0}),T.forEach(b),P=D(I),v&&v.l(I),I.forEach(b),_.forEach(b),this.h()},h(){r(l,"class","text-3xl font-bold text-center mb-6"),r(s,"class","block text-gray-700 text-sm font-bold mb-2"),r(u,"type","file"),r(u,"accept","application/pdf"),r(u,"class","shadow border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),r(a,"class","mb-4"),r(t,"class","bg-white shadow-md rounded px-6 pt-6 pb-8 mb-4"),r(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12")},m(y,_){N(y,e,_),f(e,l),f(e,o),f(e,t),f(t,a),f(a,s),f(a,c),f(a,u),i[21](u),f(t,P),v&&v.m(t,null),k||(x=A(u,"change",i[17]),k=!0)},p(y,_){y[5]?v?v.p(y,_):(v=ee(y),v.c(),v.m(t,null)):v&&(v.d(1),v=null)},d(y){y&&b(e),i[21](null),v&&v.d(),k=!1,x()}}}function ee(i){let e,l,d="Next",o,t;return{c(){e=h("div"),l=h("button"),l.textContent=d,this.h()},l(a){e=m(a,"DIV",{class:!0});var s=w(e);l=m(s,"BUTTON",{class:!0,"data-svelte-h":!0}),B(l)!=="svelte-lly8x1"&&(l.textContent=d),s.forEach(b),this.h()},h(){r(l,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"),r(e,"class","flex items-center justify-between")},m(a,s){N(a,e,s),f(e,l),o||(t=A(l,"click",i[19]),o=!0)},p:K,d(a){a&&b(e),o=!1,t()}}}function te(i){let e,l,d="Complete the Form",o,t,a,s,n="Title",c,u,P,k,x,v="Description",y,_,I,T,j,F='<button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Submit</button>',H,O,g=i[5]&&le(i);return{c(){e=h("div"),l=h("h1"),l.textContent=d,o=C(),t=h("form"),a=h("div"),s=h("label"),s.textContent=n,c=C(),u=h("input"),P=C(),k=h("div"),x=h("label"),x.textContent=v,y=C(),_=h("textarea"),I=C(),g&&g.c(),T=C(),j=h("div"),j.innerHTML=F,this.h()},l(E){e=m(E,"DIV",{class:!0});var U=w(e);l=m(U,"H1",{class:!0,"data-svelte-h":!0}),B(l)!=="svelte-5iv4uu"&&(l.textContent=d),o=D(U),t=m(U,"FORM",{class:!0});var S=w(t);a=m(S,"DIV",{class:!0});var Y=w(a);s=m(Y,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),B(s)!=="svelte-1hfxn5w"&&(s.textContent=n),c=D(Y),u=m(Y,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),Y.forEach(b),P=D(S),k=m(S,"DIV",{class:!0});var q=w(k);x=m(q,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),B(x)!=="svelte-199vnqc"&&(x.textContent=v),y=D(q),_=m(q,"TEXTAREA",{id:!0,placeholder:!0,class:!0}),w(_).forEach(b),q.forEach(b),I=D(S),g&&g.l(S),T=D(S),j=m(S,"DIV",{class:!0,"data-svelte-h":!0}),B(j)!=="svelte-13i0lts"&&(j.innerHTML=F),S.forEach(b),U.forEach(b),this.h()},h(){r(l,"class","text-3xl font-bold text-center mb-6"),r(s,"for","title"),r(s,"class","block text-gray-700 text-sm font-bold mb-2"),r(u,"type","text"),r(u,"id","title"),r(u,"placeholder","Title"),r(u,"class","shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),u.required=!0,r(a,"class","mb-4"),r(x,"for","description"),r(x,"class","block text-gray-700 text-sm font-bold mb-2"),r(_,"id","description"),r(_,"placeholder","Description"),r(_,"class","shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),r(k,"class","mb-4"),r(j,"class","flex items-center justify-between"),r(t,"class","bg-white shadow-md rounded px-6 pt-6 pb-8 mb-4"),r(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12")},m(E,U){N(E,e,U),f(e,l),f(e,o),f(e,t),f(t,a),f(a,s),f(a,c),f(a,u),z(u,i[1]),f(t,P),f(t,k),f(k,x),f(k,y),f(k,_),z(_,i[2]),f(t,I),g&&g.m(t,null),f(t,T),f(t,j),H||(O=[A(u,"input",i[22]),A(_,"input",i[23]),A(t,"submit",Ee(i[20]))],H=!0)},p(E,U){U&2&&u.value!==E[1]&&z(u,E[1]),U&4&&z(_,E[2]),E[5]?g?g.p(E,U):(g=le(E),g.c(),g.m(t,T)):g&&(g.d(1),g=null)},d(E){E&&b(e),g&&g.d(),H=!1,oe(O)}}}function le(i){let e,l,d,o,t,a,s,n=i[7]!==null&&i[8]!==null&&se(i);return{c(){e=h("div"),l=h("object"),d=C(),o=h("div"),t=C(),n&&n.c(),this.h()},l(c){e=m(c,"DIV",{class:!0,style:!0});var u=w(e);l=m(u,"OBJECT",{data:!0,type:!0,class:!0}),w(l).forEach(b),d=D(u),o=m(u,"DIV",{class:!0}),w(o).forEach(b),t=D(u),n&&n.l(u),u.forEach(b),this.h()},h(){r(l,"data",i[5]),r(l,"type","application/pdf"),r(l,"class","w-full h-full svelte-1k2ncur"),r(o,"class","absolute top-0 left-0 w-full h-full cursor-crosshair svelte-1k2ncur"),r(e,"class","relative overflow-auto mb-4 svelte-1k2ncur"),V(e,"height",i[6])},m(c,u){N(c,e,u),f(e,l),f(e,d),f(e,o),f(e,t),n&&n.m(e,null),a||(s=A(o,"click",i[18]),a=!0)},p(c,u){u&32&&r(l,"data",c[5]),c[7]!==null&&c[8]!==null?n?n.p(c,u):(n=se(c),n.c(),n.m(e,null)):n&&(n.d(1),n=null),u&64&&V(e,"height",c[6])},d(c){c&&b(e),n&&n.d(),a=!1,s()}}}function se(i){let e,l,d,o,t,a,s;return{c(){e=h("div"),l=h("div"),d=C(),o=h("div"),t=h("input"),this.h()},l(n){e=m(n,"DIV",{class:!0,style:!0});var c=w(e);l=m(c,"DIV",{class:!0,style:!0}),w(l).forEach(b),d=D(c),o=m(c,"DIV",{class:!0,style:!0});var u=w(o);t=m(u,"INPUT",{type:!0,min:!0,max:!0,class:!0}),u.forEach(b),c.forEach(b),this.h()},h(){r(l,"class","bg-red-500 rounded-full"),V(l,"width",i[3]+"px"),V(l,"height",i[3]/2+"px"),r(t,"type","range"),r(t,"min","10"),r(t,"max","200"),r(t,"class","w-full"),r(o,"class","absolute bg-white p-2 border rounded shadow-md svelte-1k2ncur"),V(o,"top","-60px"),V(o,"left","0"),V(o,"width","200px"),r(e,"class","absolute svelte-1k2ncur"),V(e,"top",i[8]+"px"),V(e,"left",i[7]+"px")},m(n,c){N(n,e,c),f(e,l),f(e,d),f(e,o),f(o,t),z(t,i[3]),a||(s=[A(t,"change",i[24]),A(t,"input",i[24])],a=!0)},p(n,c){c&8&&V(l,"width",n[3]+"px"),c&8&&V(l,"height",n[3]/2+"px"),c&8&&z(t,n[3]),c&256&&V(e,"top",n[8]+"px"),c&128&&V(e,"left",n[7]+"px")},d(n){n&&b(e),a=!1,oe(s)}}}function ae(i){let e,l,d,o;return{c(){e=h("div"),l=h("div"),d=h("span"),o=Ce(i[9]),this.h()},l(t){e=m(t,"DIV",{class:!0});var a=w(e);l=m(a,"DIV",{class:!0,role:!0});var s=w(l);d=m(s,"SPAN",{class:!0});var n=w(d);o=De(n,i[9]),n.forEach(b),s.forEach(b),a.forEach(b),this.h()},h(){r(d,"class","block sm:inline"),r(l,"class","bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative svelte-1k2ncur"),r(l,"role","alert"),r(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4")},m(t,a){N(t,e,a),f(e,l),f(l,d),f(d,o)},p(t,a){a&512&&Ie(o,t[9])},d(t){t&&b(e)}}}function Ve(i){let e,l,d,o=i[4]===1&&$(i),t=i[4]===2&&te(i),a=i[4]===3&&ae(i);return{c(){o&&o.c(),e=C(),t&&t.c(),l=C(),a&&a.c(),d=Z()},l(s){o&&o.l(s),e=D(s),t&&t.l(s),l=D(s),a&&a.l(s),d=Z()},m(s,n){o&&o.m(s,n),N(s,e,n),t&&t.m(s,n),N(s,l,n),a&&a.m(s,n),N(s,d,n)},p(s,[n]){s[4]===1?o?o.p(s,n):(o=$(s),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),s[4]===2?t?t.p(s,n):(t=te(s),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null),s[4]===3?a?a.p(s,n):(a=ae(s),a.c(),a.m(d.parentNode,d)):a&&(a.d(1),a=null)},i:K,o:K,d(s){s&&(b(e),b(l),b(d)),o&&o.d(s),t&&t.d(s),a&&a.d(s)}}}const Ue="http://localhost:8080";function Le(i,e,l){let d,o,t,a,s,n,c;const u=X(1);R(i,u,p=>l(4,o=p));const P=X("");R(i,P,p=>l(5,t=p));const k=X("500px");R(i,k,p=>l(6,a=p));const x=X(null);R(i,x,p=>l(7,s=p));const v=X(null);R(i,v,p=>l(8,n=p));const y=X(50);R(i,y,p=>l(3,d=p));const _=X("");R(i,_,p=>l(9,c=p));let I,T,j="",F="",H="",O;ge(()=>{O=W(je),O||(window.location.href="/login")});const g=()=>new Promise((p,L)=>{if(window.pdfjsLib){p();return}const M=document.createElement("script");M.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js",M.onload=()=>p(),M.onerror=()=>L(new Error("Failed to load PDF.js")),document.head.appendChild(M)}),E=async p=>{const L=p.target.files;if(L.length>0){I=L[0];const M=URL.createObjectURL(I);P.set(M),await g();const J=(await(await pdfjsLib.getDocument(M).promise).getPage(1)).getViewport({scale:1});k.set(`${J.height}px`)}};function U(p){const L=p.currentTarget.getBoundingClientRect(),M=p.clientX-L.left,Q=p.clientY-L.top,G=595.28,J=841.89,de=L.width,ce=L.height,fe=G/de,pe=J/ce,he=M*fe,me=Q*pe,be=Math.min(Math.max(he,0),G),ve=Math.min(Math.max(me,0),J);x.set(be),v.set(ve)}async function S(){if(!I||!j||!F||W(x)===null||W(v)===null){H="All fields are required";return}const p=new FormData;p.append("file",I),p.append("title",j),p.append("description",F),p.append("xSignature",W(x)),p.append("ySignature",W(v)),p.append("signatureWidth",d.toString()),p.append("userId",O);try{(await fetch(`${Ue}/api/templates`,{method:"POST",body:p})).ok?(_.set("Template uploaded successfully"),H="",await new Promise(M=>setTimeout(M,2e3))):H="Failed to upload template"}catch(L){console.error("Error uploading template:",L),H="Error uploading template"}}we(()=>{fileUrl&&URL.revokeObjectURL(fileUrl)});const Y=()=>{u.set(2)},q=async()=>{await S(),u.set(3)};function ne(p){xe[p?"unshift":"push"](()=>{T=p,l(0,T)})}function ie(){j=this.value,l(1,j)}function re(){F=this.value,l(2,F)}function ue(){d=Te(this.value),y.set(d)}return[T,j,F,d,o,t,a,s,n,c,u,P,k,x,v,y,_,E,U,Y,q,ne,ie,re,ue]}class Fe extends ye{constructor(e){super(),ke(this,e,Le,Ve,_e,{})}}export{Fe as component};
