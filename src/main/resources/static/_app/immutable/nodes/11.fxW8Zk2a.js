import{s as ge,n as $,c as z,r as pe}from"../chunks/scheduler.Dw9uJjIS.js";import{S as _e,i as xe,s as C,v as ie,a as D,d as F,f as b,e as h,c as m,h as x,g as q,b as n,k as d,m as A,j as Y,u as we,w as L,o as ye,p as ke,q as Ee,t as Ce}from"../chunks/index.3R_Ud9pO.js";import{w as X}from"../chunks/index.CdM32__g.js";import{j as De}from"../chunks/auth.service.BmE_0tw5.js";function ne(r){let e,l,f="Upload Document",a,t,o,s,i="Upload PDF",p,c,M,k,I,g=r[7]&&re(r);return{c(){e=h("div"),l=h("h1"),l.textContent=f,a=C(),t=h("div"),o=h("div"),s=h("label"),s.textContent=i,p=C(),c=h("input"),M=C(),g&&g.c(),this.h()},l(y){e=m(y,"DIV",{class:!0});var v=x(e);l=m(v,"H1",{class:!0,"data-svelte-h":!0}),q(l)!=="svelte-1dbxkce"&&(l.textContent=f),a=D(v),t=m(v,"DIV",{class:!0});var S=x(t);o=m(S,"DIV",{class:!0});var j=x(o);s=m(j,"LABEL",{class:!0,"data-svelte-h":!0}),q(s)!=="svelte-113yvb9"&&(s.textContent=i),p=D(j),c=m(j,"INPUT",{type:!0,accept:!0,class:!0}),j.forEach(b),M=D(S),g&&g.l(S),S.forEach(b),v.forEach(b),this.h()},h(){n(l,"class","text-3xl font-bold text-center mb-6"),n(s,"class","block text-gray-700 text-sm font-bold mb-2"),n(c,"type","file"),n(c,"accept","application/pdf"),n(c,"class","shadow border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),n(o,"class","mb-4"),n(t,"class","bg-white shadow-md rounded px-6 pt-6 pb-8 mb-4"),n(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12")},m(y,v){F(y,e,v),d(e,l),d(e,a),d(e,t),d(t,o),d(o,s),d(o,p),d(o,c),d(t,M),g&&g.m(t,null),k||(I=A(c,"change",r[17]),k=!0)},p(y,v){y[7]?g?g.p(y,v):(g=re(y),g.c(),g.m(t,null)):g&&(g.d(1),g=null)},d(y){y&&b(e),g&&g.d(),k=!1,I()}}}function re(r){let e,l,f="Next",a,t;return{c(){e=h("div"),l=h("button"),l.textContent=f,this.h()},l(o){e=m(o,"DIV",{class:!0});var s=x(e);l=m(s,"BUTTON",{class:!0,"data-svelte-h":!0}),q(l)!=="svelte-lly8x1"&&(l.textContent=f),s.forEach(b),this.h()},h(){n(l,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"),n(e,"class","flex items-center justify-between")},m(o,s){F(o,e,s),d(e,l),a||(t=A(l,"click",r[19]),a=!0)},p:$,d(o){o&&b(e),a=!1,t()}}}function ue(r){let e,l,f="Complete the Form",a,t,o,s,i="E-Mail of the signee",p,c,M,k,I,g="Title",y,v,S,j,T,R="Description",O,U,B,W,H,K='<button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Submit</button>',G,Q,w=r[7]&&de(r);return{c(){e=h("div"),l=h("h1"),l.textContent=f,a=C(),t=h("form"),o=h("div"),s=h("label"),s.textContent=i,p=C(),c=h("input"),M=C(),k=h("div"),I=h("label"),I.textContent=g,y=C(),v=h("input"),S=C(),j=h("div"),T=h("label"),T.textContent=R,O=C(),U=h("textarea"),B=C(),w&&w.c(),W=C(),H=h("div"),H.innerHTML=K,this.h()},l(E){e=m(E,"DIV",{class:!0});var P=x(e);l=m(P,"H1",{class:!0,"data-svelte-h":!0}),q(l)!=="svelte-5iv4uu"&&(l.textContent=f),a=D(P),t=m(P,"FORM",{class:!0});var N=x(t);o=m(N,"DIV",{class:!0});var J=x(o);s=m(J,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),q(s)!=="svelte-1pq9vec"&&(s.textContent=i),p=D(J),c=m(J,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),J.forEach(b),M=D(N),k=m(N,"DIV",{class:!0});var u=x(k);I=m(u,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),q(I)!=="svelte-1hfxn5w"&&(I.textContent=g),y=D(u),v=m(u,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),u.forEach(b),S=D(N),j=m(N,"DIV",{class:!0});var _=x(j);T=m(_,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),q(T)!=="svelte-199vnqc"&&(T.textContent=R),O=D(_),U=m(_,"TEXTAREA",{id:!0,placeholder:!0,class:!0}),x(U).forEach(b),_.forEach(b),B=D(N),w&&w.l(N),W=D(N),H=m(N,"DIV",{class:!0,"data-svelte-h":!0}),q(H)!=="svelte-13i0lts"&&(H.innerHTML=K),N.forEach(b),P.forEach(b),this.h()},h(){n(l,"class","text-3xl font-bold text-center mb-6"),n(s,"for","email"),n(s,"class","block text-gray-700 text-sm font-bold mb-2"),n(c,"type","text"),n(c,"id","email"),n(c,"placeholder","E-Mail"),n(c,"class","shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),c.required=!0,n(o,"class","mb-4"),n(I,"for","title"),n(I,"class","block text-gray-700 text-sm font-bold mb-2"),n(v,"type","text"),n(v,"id","title"),n(v,"placeholder","Title"),n(v,"class","shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),v.required=!0,n(k,"class","mb-4"),n(T,"for","description"),n(T,"class","block text-gray-700 text-sm font-bold mb-2"),n(U,"id","description"),n(U,"placeholder","Description"),n(U,"class","shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),n(j,"class","mb-4"),n(H,"class","flex items-center justify-between"),n(t,"class","bg-white shadow-md rounded px-6 pt-6 pb-8 mb-4"),n(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12")},m(E,P){F(E,e,P),d(e,l),d(e,a),d(e,t),d(t,o),d(o,s),d(o,p),d(o,c),Y(c,r[0]),d(t,M),d(t,k),d(k,I),d(k,y),d(k,v),Y(v,r[1]),d(t,S),d(t,j),d(j,T),d(j,O),d(j,U),Y(U,r[2]),d(t,B),w&&w.m(t,null),d(t,W),d(t,H),G||(Q=[A(c,"input",r[21]),A(v,"input",r[22]),A(U,"input",r[23]),A(t,"submit",we(r[20]))],G=!0)},p(E,P){P&1&&c.value!==E[0]&&Y(c,E[0]),P&2&&v.value!==E[1]&&Y(v,E[1]),P&4&&Y(U,E[2]),E[7]?w?w.p(E,P):(w=de(E),w.c(),w.m(t,W)):w&&(w.d(1),w=null)},d(E){E&&b(e),w&&w.d(),G=!1,pe(Q)}}}function de(r){let e,l,f,a,t,o,s,i=r[5]!==null&&r[4]!==null&&ce(r);return{c(){e=h("div"),l=h("object"),f=C(),a=h("div"),t=C(),i&&i.c(),this.h()},l(p){e=m(p,"DIV",{class:!0,style:!0});var c=x(e);l=m(c,"OBJECT",{data:!0,type:!0,class:!0}),x(l).forEach(b),f=D(c),a=m(c,"DIV",{class:!0}),x(a).forEach(b),t=D(c),i&&i.l(c),c.forEach(b),this.h()},h(){n(l,"data",r[7]),n(l,"type","application/pdf"),n(l,"class","w-full h-full svelte-1g2kwbp"),n(a,"class","absolute top-0 left-0 w-full h-full cursor-crosshair"),n(e,"class","relative overflow-auto mb-4"),L(e,"height",r[8])},m(p,c){F(p,e,c),d(e,l),d(e,f),d(e,a),d(e,t),i&&i.m(e,null),o||(s=A(a,"click",r[18]),o=!0)},p(p,c){c&128&&n(l,"data",p[7]),p[5]!==null&&p[4]!==null?i?i.p(p,c):(i=ce(p),i.c(),i.m(e,null)):i&&(i.d(1),i=null),c&256&&L(e,"height",p[8])},d(p){p&&b(e),i&&i.d(),o=!1,s()}}}function ce(r){let e,l,f,a,t,o,s;return{c(){e=h("div"),l=h("div"),f=C(),a=h("div"),t=h("input"),this.h()},l(i){e=m(i,"DIV",{class:!0,style:!0});var p=x(e);l=m(p,"DIV",{class:!0,style:!0}),x(l).forEach(b),f=D(p),a=m(p,"DIV",{class:!0,style:!0});var c=x(a);t=m(c,"INPUT",{type:!0,min:!0,max:!0,class:!0}),c.forEach(b),p.forEach(b),this.h()},h(){n(l,"class","bg-red-500 rounded-full"),L(l,"width",r[3]+"px"),L(l,"height",r[3]/2+"px"),n(t,"type","range"),n(t,"min","10"),n(t,"max","200"),n(t,"class","w-full"),n(a,"class","absolute bg-white p-2 border rounded shadow-md"),L(a,"top","-60px"),L(a,"left","0"),L(a,"width","200px"),n(e,"class","absolute"),L(e,"top",r[4]+"px"),L(e,"left",r[5]+"px")},m(i,p){F(i,e,p),d(e,l),d(e,f),d(e,a),d(a,t),Y(t,r[3]),o||(s=[A(t,"change",r[24]),A(t,"input",r[24])],o=!0)},p(i,p){p&8&&L(l,"width",i[3]+"px"),p&8&&L(l,"height",i[3]/2+"px"),p&8&&Y(t,i[3]),p&16&&L(e,"top",i[4]+"px"),p&32&&L(e,"left",i[5]+"px")},d(i){i&&b(e),o=!1,pe(s)}}}function fe(r){let e,l,f,a;return{c(){e=h("div"),l=h("div"),f=h("span"),a=ye(r[9]),this.h()},l(t){e=m(t,"DIV",{class:!0});var o=x(e);l=m(o,"DIV",{class:!0,role:!0});var s=x(l);f=m(s,"SPAN",{class:!0});var i=x(f);a=ke(i,r[9]),i.forEach(b),s.forEach(b),o.forEach(b),this.h()},h(){n(f,"class","block sm:inline"),n(l,"class","bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative"),n(l,"role","alert"),n(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4")},m(t,o){F(t,e,o),d(e,l),d(l,f),d(f,a)},p(t,o){o&512&&Ee(a,t[9])},d(t){t&&b(e)}}}function Ie(r){let e,l,f,a=r[6]===1&&ne(r),t=r[6]===2&&ue(r),o=r[6]===3&&fe(r);return{c(){a&&a.c(),e=C(),t&&t.c(),l=C(),o&&o.c(),f=ie()},l(s){a&&a.l(s),e=D(s),t&&t.l(s),l=D(s),o&&o.l(s),f=ie()},m(s,i){a&&a.m(s,i),F(s,e,i),t&&t.m(s,i),F(s,l,i),o&&o.m(s,i),F(s,f,i)},p(s,[i]){s[6]===1?a?a.p(s,i):(a=ne(s),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),s[6]===2?t?t.p(s,i):(t=ue(s),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null),s[6]===3?o?o.p(s,i):(o=fe(s),o.c(),o.m(f.parentNode,f)):o&&(o.d(1),o=null)},i:$,o:$,d(s){s&&(b(e),b(l),b(f)),a&&a.d(s),t&&t.d(s),o&&o.d(s)}}}const je="http://localhost:8080";function Ue(r,e,l){let f,a,t,o,s,i,p,c;De.subscribe(u=>{c=u});let M,k=X("");z(r,k,u=>l(7,s=u));let I=X("500px");z(r,I,u=>l(8,i=u));let g=X(1);z(r,g,u=>l(6,o=u));let y=X(null);z(r,y,u=>l(5,t=u));let v=X(null);z(r,v,u=>l(4,a=u));let S=X(50);z(r,S,u=>l(3,f=u));const j=X("");let T="",R="",O="",U,B=X("");z(r,B,u=>l(9,p=u));const W=sessionStorage.getItem("user");W?(U=JSON.parse(W).sub,console.log("User ID retrieved from session storage:",U)):console.log("No user found in session storage.");const H=()=>new Promise((u,_)=>{if(window.pdfjsLib){u();return}const V=document.createElement("script");V.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js",V.onload=()=>u(),V.onerror=()=>_(new Error("Failed to load PDF.js")),document.head.appendChild(V)}),K=async u=>{const _=u.target.files;if(_.length>0){M=_[0];const V=URL.createObjectURL(M);k.set(V),await H();const Z=(await pdfjsLib.getDocument(V).promise).numPages;I.set(`${Z*842+60}px`)}};function G(u){const _=u.currentTarget.getBoundingClientRect(),V=u.clientX-_.left,ee=u.clientY-_.top,Z=595.28,te=841.89,le=_.width,se=_.height;console.log("displayedWidth",le),console.log("displayedHeight",se);const he=Z/le,me=te/se,be=V*he,ve=ee*me,oe=Math.min(Math.max(be,0),Z),ae=Math.min(Math.max(ve,0),te);console.log(`Clicked coordinates: X=${oe}, Y=${ae}`),y.set(oe),v.set(ae)}const Q=()=>{g.set(2)},w=async()=>{if(g.set(3),!U){alert("User ID is not set. Please login again.");return}const u=new FormData;u.append("file",M),u.append("signedByEmail",T),u.append("xSignature",t),u.append("ySignature",a),u.append("signatureWidth",f.toString()),u.append("title",R),u.append("description",O),u.append("userId",U);try{const _=await fetch(je+"/api/upload",{method:"POST",body:u,headers:{Authorization:"Bearer "+c}});if(_.ok){const V=await _.json();j.set(V.fileUrl),B.set("File uploaded successfully!"),console.log("Upload successful:",V)}else{const V=await _.json();B.set(`Error: ${V.message}`)}}catch(_){console.error("Error uploading file:",_),B.set("Error uploading file. Please try again.")}};function E(){T=this.value,l(0,T)}function P(){R=this.value,l(1,R)}function N(){O=this.value,l(2,O)}function J(){f=Ce(this.value),S.set(f)}return[T,R,O,f,a,t,o,s,i,p,k,I,g,y,v,S,B,K,G,Q,w,E,P,N,J]}class Se extends _e{constructor(e){super(),xe(this,e,Ue,Ie,ge,{})}}export{Se as component};
