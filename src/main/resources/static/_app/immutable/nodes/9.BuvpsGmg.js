import{s as je,n as K,c as X,o as Ue,f as Le,r as pe,g as z,d as Pe}from"../chunks/scheduler.Dw9uJjIS.js";import{S as Me,i as Se,s as I,v as te,a as T,d as M,f as h,e as b,c as v,h as y,g as O,b as c,k as f,m as R,n as He,o as Q,p as Z,q as $,j as W,u as Ne,w as P,t as Fe}from"../chunks/index.LMNcmw-L.js";import{e as le}from"../chunks/each.D6YF6ztN.js";import{w as B}from"../chunks/index.CdM32__g.js";import{u as Ae}from"../chunks/auth.service.CeFBHbrE.js";function se(n,e,s){const u=n.slice();return u[34]=e[s],u}function ae(n){let e,s,u="Upload Template",o,a,l,t,i="Upload PDF",r,d,j,C,_,k,U,m=n[4]&&oe(n),g=n[4]&&ie(n);return{c(){e=b("div"),s=b("h1"),s.textContent=u,o=I(),a=b("div"),l=b("div"),t=b("label"),t.textContent=i,r=I(),d=b("input"),j=I(),m&&m.c(),C=I(),_=b("div"),g&&g.c(),this.h()},l(E){e=v(E,"DIV",{class:!0});var w=y(e);s=v(w,"H1",{class:!0,"data-svelte-h":!0}),O(s)!=="svelte-16savsz"&&(s.textContent=u),o=T(w),a=v(w,"DIV",{class:!0});var H=y(a);l=v(H,"DIV",{class:!0});var L=y(l);t=v(L,"LABEL",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-113yvb9"&&(t.textContent=i),r=T(L),d=v(L,"INPUT",{type:!0,accept:!0,class:!0}),L.forEach(h),j=T(H),m&&m.l(H),H.forEach(h),C=T(w),_=v(w,"DIV",{class:!0});var N=y(_);g&&g.l(N),N.forEach(h),w.forEach(h),this.h()},h(){c(s,"class","text-3xl font-bold text-center mb-6"),c(t,"class","block text-gray-700 text-sm font-bold mb-2"),c(d,"type","file"),c(d,"accept","application/pdf"),c(d,"class","shadow border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),c(l,"class","mb-4"),c(a,"class","bg-white shadow-md rounded px-6 pt-6 pb-8 mb-4"),c(_,"class","mt-4"),c(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12")},m(E,w){M(E,e,w),f(e,s),f(e,o),f(e,a),f(a,l),f(l,t),f(l,r),f(l,d),n[23](d),f(a,j),m&&m.m(a,null),f(e,C),f(e,_),g&&g.m(_,null),k||(U=R(d,"change",n[19]),k=!0)},p(E,w){E[4]?m?m.p(E,w):(m=oe(E),m.c(),m.m(a,null)):m&&(m.d(1),m=null),E[4]?g?g.p(E,w):(g=ie(E),g.c(),g.m(_,null)):g&&(g.d(1),g=null)},d(E){E&&h(e),n[23](null),m&&m.d(),g&&g.d(),k=!1,U()}}}function oe(n){let e,s,u="Next",o,a;return{c(){e=b("div"),s=b("button"),s.textContent=u,this.h()},l(l){e=v(l,"DIV",{class:!0});var t=y(e);s=v(t,"BUTTON",{class:!0,"data-svelte-h":!0}),O(s)!=="svelte-lly8x1"&&(s.textContent=u),t.forEach(h),this.h()},h(){c(s,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"),c(e,"class","flex items-center justify-between")},m(l,t){M(l,e,t),f(e,s),o||(a=R(s,"click",n[21]),o=!0)},p:K,d(l){l&&h(e),o=!1,a()}}}function ie(n){let e,s="My Templates",u,o,a=le(n[5]),l=[];for(let t=0;t<a.length;t+=1)l[t]=ne(se(n,a,t));return{c(){e=b("h1"),e.textContent=s,u=I(),o=b("div");for(let t=0;t<l.length;t+=1)l[t].c();this.h()},l(t){e=v(t,"H1",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1h1cu73"&&(e.textContent=s),u=T(t),o=v(t,"DIV",{class:!0});var i=y(o);for(let r=0;r<l.length;r+=1)l[r].l(i);i.forEach(h),this.h()},h(){c(e,"class","text-3xl font-bold text-center mb-6"),c(o,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4")},m(t,i){M(t,e,i),M(t,u,i),M(t,o,i);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(o,null)},p(t,i){if(i[0]&32){a=le(t[5]);let r;for(r=0;r<a.length;r+=1){const d=se(t,a,r);l[r]?l[r].p(d,i):(l[r]=ne(d),l[r].c(),l[r].m(o,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=a.length}},d(t){t&&(h(e),h(u),h(o)),He(l,t)}}}function ne(n){let e,s,u=n[34].title+"",o,a,l,t=n[34].description+"",i,r,d,j;function C(){return n[24](n[34])}return{c(){e=b("div"),s=b("h2"),o=Q(u),a=I(),l=b("p"),i=Q(t),r=I(),this.h()},l(_){e=v(_,"DIV",{class:!0});var k=y(e);s=v(k,"H2",{class:!0});var U=y(s);o=Z(U,u),U.forEach(h),a=T(k),l=v(k,"P",{class:!0});var m=y(l);i=Z(m,t),m.forEach(h),r=T(k),k.forEach(h),this.h()},h(){c(s,"class","text-xl font-bold mb-2"),c(l,"class","text-gray-600"),c(e,"class","bg-white shadow-md rounded px-6 pt-6 pb-8 mb-4 cursor-pointer")},m(_,k){M(_,e,k),f(e,s),f(s,o),f(e,a),f(e,l),f(l,i),f(e,r),d||(j=R(e,"click",C),d=!0)},p(_,k){n=_,k[0]&32&&u!==(u=n[34].title+"")&&$(o,u),k[0]&32&&t!==(t=n[34].description+"")&&$(i,t)},d(_){_&&h(e),d=!1,j()}}}function re(n){let e,s,u="Complete the Form",o,a,l,t,i="Title",r,d,j,C,_,k="Description",U,m,g,E,w,H='<button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Submit</button>',L,N,x=n[4]&&ce(n);return{c(){e=b("div"),s=b("h1"),s.textContent=u,o=I(),a=b("form"),l=b("div"),t=b("label"),t.textContent=i,r=I(),d=b("input"),j=I(),C=b("div"),_=b("label"),_.textContent=k,U=I(),m=b("textarea"),g=I(),x&&x.c(),E=I(),w=b("div"),w.innerHTML=H,this.h()},l(D){e=v(D,"DIV",{class:!0});var S=y(e);s=v(S,"H1",{class:!0,"data-svelte-h":!0}),O(s)!=="svelte-5iv4uu"&&(s.textContent=u),o=T(S),a=v(S,"FORM",{class:!0});var F=y(a);l=v(F,"DIV",{class:!0});var Y=y(l);t=v(Y,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(t)!=="svelte-1hfxn5w"&&(t.textContent=i),r=T(Y),d=v(Y,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),Y.forEach(h),j=T(F),C=v(F,"DIV",{class:!0});var q=y(C);_=v(q,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(_)!=="svelte-199vnqc"&&(_.textContent=k),U=T(q),m=v(q,"TEXTAREA",{id:!0,placeholder:!0,class:!0}),y(m).forEach(h),q.forEach(h),g=T(F),x&&x.l(F),E=T(F),w=v(F,"DIV",{class:!0,"data-svelte-h":!0}),O(w)!=="svelte-13i0lts"&&(w.innerHTML=H),F.forEach(h),S.forEach(h),this.h()},h(){c(s,"class","text-3xl font-bold text-center mb-6"),c(t,"for","title"),c(t,"class","block text-gray-700 text-sm font-bold mb-2"),c(d,"type","text"),c(d,"id","title"),c(d,"placeholder","Title"),c(d,"class","shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),d.required=!0,c(l,"class","mb-4"),c(_,"for","description"),c(_,"class","block text-gray-700 text-sm font-bold mb-2"),c(m,"id","description"),c(m,"placeholder","Description"),c(m,"class","shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),c(C,"class","mb-4"),c(w,"class","flex items-center justify-between"),c(a,"class","bg-white shadow-md rounded px-6 pt-6 pb-8 mb-4"),c(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12")},m(D,S){M(D,e,S),f(e,s),f(e,o),f(e,a),f(a,l),f(l,t),f(l,r),f(l,d),W(d,n[1]),f(a,j),f(a,C),f(C,_),f(C,U),f(C,m),W(m,n[2]),f(a,g),x&&x.m(a,null),f(a,E),f(a,w),L||(N=[R(d,"input",n[25]),R(m,"input",n[26]),R(a,"submit",Ne(n[22]))],L=!0)},p(D,S){S[0]&2&&d.value!==D[1]&&W(d,D[1]),S[0]&4&&W(m,D[2]),D[4]?x?x.p(D,S):(x=ce(D),x.c(),x.m(a,E)):x&&(x.d(1),x=null)},d(D){D&&h(e),x&&x.d(),L=!1,pe(N)}}}function ce(n){let e,s,u,o,a,l,t,i=n[7]!==null&&n[8]!==null&&ue(n);return{c(){e=b("div"),s=b("object"),u=I(),o=b("div"),a=I(),i&&i.c(),this.h()},l(r){e=v(r,"DIV",{class:!0,style:!0});var d=y(e);s=v(d,"OBJECT",{data:!0,type:!0,class:!0}),y(s).forEach(h),u=T(d),o=v(d,"DIV",{class:!0}),y(o).forEach(h),a=T(d),i&&i.l(d),d.forEach(h),this.h()},h(){c(s,"data",n[4]),c(s,"type","application/pdf"),c(s,"class","w-full h-full svelte-1k2ncur"),c(o,"class","absolute top-0 left-0 w-full h-full cursor-crosshair svelte-1k2ncur"),c(e,"class","relative overflow-auto mb-4 svelte-1k2ncur"),P(e,"height",n[6])},m(r,d){M(r,e,d),f(e,s),f(e,u),f(e,o),f(e,a),i&&i.m(e,null),l||(t=R(o,"click",n[20]),l=!0)},p(r,d){d[0]&16&&c(s,"data",r[4]),r[7]!==null&&r[8]!==null?i?i.p(r,d):(i=ue(r),i.c(),i.m(e,null)):i&&(i.d(1),i=null),d[0]&64&&P(e,"height",r[6])},d(r){r&&h(e),i&&i.d(),l=!1,t()}}}function ue(n){let e,s,u,o,a,l,t;return{c(){e=b("div"),s=b("div"),u=I(),o=b("div"),a=b("input"),this.h()},l(i){e=v(i,"DIV",{class:!0,style:!0});var r=y(e);s=v(r,"DIV",{class:!0,style:!0}),y(s).forEach(h),u=T(r),o=v(r,"DIV",{class:!0,style:!0});var d=y(o);a=v(d,"INPUT",{type:!0,min:!0,max:!0,class:!0}),d.forEach(h),r.forEach(h),this.h()},h(){c(s,"class","bg-red-500 rounded-full"),P(s,"width",n[9]+"px"),P(s,"height",n[9]/2+"px"),c(a,"type","range"),c(a,"min","10"),c(a,"max","200"),c(a,"class","w-full"),c(o,"class","absolute bg-white p-2 border rounded shadow-md svelte-1k2ncur"),P(o,"top","-60px"),P(o,"left","0"),P(o,"width","200px"),c(e,"class","absolute svelte-1k2ncur"),P(e,"top",n[8]+"px"),P(e,"left",n[7]+"px")},m(i,r){M(i,e,r),f(e,s),f(e,u),f(e,o),f(o,a),W(a,n[9]),l||(t=[R(a,"change",n[27]),R(a,"input",n[27])],l=!0)},p(i,r){r[0]&512&&P(s,"width",i[9]+"px"),r[0]&512&&P(s,"height",i[9]/2+"px"),r[0]&512&&W(a,i[9]),r[0]&256&&P(e,"top",i[8]+"px"),r[0]&128&&P(e,"left",i[7]+"px")},d(i){i&&h(e),l=!1,pe(t)}}}function de(n){let e,s,u,o;return{c(){e=b("div"),s=b("div"),u=b("span"),o=Q(n[10]),this.h()},l(a){e=v(a,"DIV",{class:!0});var l=y(e);s=v(l,"DIV",{class:!0,role:!0});var t=y(s);u=v(t,"SPAN",{class:!0});var i=y(u);o=Z(i,n[10]),i.forEach(h),t.forEach(h),l.forEach(h),this.h()},h(){c(u,"class","block sm:inline"),c(s,"class","bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative svelte-1k2ncur"),c(s,"role","alert"),c(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4")},m(a,l){M(a,e,l),f(e,s),f(s,u),f(u,o)},p(a,l){l[0]&1024&&$(o,a[10])},d(a){a&&h(e)}}}function Re(n){let e,s,u,o=n[3]===1&&ae(n),a=n[3]===2&&re(n),l=n[3]===3&&de(n);return{c(){o&&o.c(),e=I(),a&&a.c(),s=I(),l&&l.c(),u=te()},l(t){o&&o.l(t),e=T(t),a&&a.l(t),s=T(t),l&&l.l(t),u=te()},m(t,i){o&&o.m(t,i),M(t,e,i),a&&a.m(t,i),M(t,s,i),l&&l.m(t,i),M(t,u,i)},p(t,i){t[3]===1?o?o.p(t,i):(o=ae(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),t[3]===2?a?a.p(t,i):(a=re(t),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null),t[3]===3?l?l.p(t,i):(l=de(t),l.c(),l.m(u.parentNode,u)):l&&(l.d(1),l=null)},i:K,o:K,d(t){t&&(h(e),h(s),h(u)),o&&o.d(t),a&&a.d(t),l&&l.d(t)}}}const fe="http://localhost:8080";function Xe(n,e,s){let u,o,a,l,t,i,r,d;const j=B(1);X(n,j,p=>s(3,u=p));const C=B("");X(n,C,p=>s(4,o=p));const _=B("500px");X(n,_,p=>s(6,l=p));const k=B(null);X(n,k,p=>s(7,t=p));const U=B(null);X(n,U,p=>s(8,i=p));const m=B(50);X(n,m,p=>s(9,r=p));const g=B("");X(n,g,p=>s(10,d=p));const E=B([]);X(n,E,p=>s(5,a=p));let w,H,L="",N="",x="",D;Ue(()=>{D=z(Ae),D?F(D):window.location.href="/login"});const S=()=>new Promise((p,V)=>{if(window.pdfjsLib){p();return}const A=document.createElement("script");A.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js",A.onload=()=>p(),A.onerror=()=>V(new Error("Failed to load PDF.js")),document.head.appendChild(A)});async function F(p){try{const V=await fetch(`${fe}/api/templates/user/${p}`,{method:"GET"});V.ok?E.set(await V.json()):x="Failed to fetch templates"}catch(V){console.error("Error fetching templates:",V),x="Error fetching templates"}}const Y=async p=>{const V=p.target.files;if(V.length>0){w=V[0];const A=URL.createObjectURL(w);C.set(A),await S();const J=(await(await pdfjsLib.getDocument(A).promise).getPage(1)).getViewport({scale:1});_.set(`${J.height}px`)}};function q(p){const V=p.currentTarget.getBoundingClientRect(),A=p.clientX-V.left,ee=p.clientY-V.top,G=595.28,J=841.89,xe=V.width,ye=V.height,Ee=G/xe,Ce=J/ye,De=A*Ee,Ie=ee*Ce,Te=Math.min(Math.max(De,0),G),Ve=Math.min(Math.max(Ie,0),J);k.set(Te),U.set(Ve)}async function he(){if(!w||!L||!N||z(k)===null||z(U)===null){x="All fields are required";return}const p=new FormData;p.append("file",w),p.append("title",L),p.append("description",N),p.append("xSignature",z(k)),p.append("ySignature",z(U)),p.append("signatureWidth",z(m).toString()),p.append("userId",D);try{(await fetch(`${fe}/api/templates`,{method:"POST",body:p})).ok?(g.set("Template uploaded successfully"),x="",await F(D),j.set(1)):x="Failed to upload template"}catch(V){console.error("Error uploading template:",V),x="Error uploading template"}}Le(()=>{fileUrl&&URL.revokeObjectURL(fileUrl)});const me=()=>{j.set(2)},be=async()=>{await he(),j.set(3)};function ve(p){Pe[p?"unshift":"push"](()=>{H=p,s(0,H)})}const _e=p=>window.location.href=`/templateid?id=${p.id}`;function ge(){L=this.value,s(1,L)}function we(){N=this.value,s(2,N)}function ke(){r=Fe(this.value),m.set(r)}return[H,L,N,u,o,a,l,t,i,r,d,j,C,_,k,U,m,g,E,Y,q,me,be,ve,_e,ge,we,ke]}class We extends Me{constructor(e){super(),Se(this,e,Xe,Re,je,{},null,[-1,-1])}}export{We as component};
