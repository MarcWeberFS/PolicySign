import{s as Ue,n as Ae,o as Fe,g as qe}from"../chunks/scheduler.FWZUZH0N.js";import{S as Be,i as ze,e as a,s as w,o as T,c as n,g as Z,a as b,h,p as G,f as l,b as i,d as U,k as e,q as z,n as Me,m as Oe}from"../chunks/index.Dtb91vzO.js";import{e as ye}from"../chunks/each.D6YF6ztN.js";import{u as Je}from"../chunks/auth.service.BQJ8pzVI.js";function Te(s,c,r){const f=s.slice();return f[9]=c[r],f}function Ge(s){let c,r;return{c(){c=a("p"),r=T(s[3]),this.h()},l(f){c=n(f,"P",{class:!0});var u=h(c);r=G(u,s[3]),u.forEach(l),this.h()},h(){i(c,"class","text-red-500 text-center")},m(f,u){U(f,c,u),e(c,r)},p(f,u){u&8&&z(r,f[3])},d(f){f&&l(c)}}}function He(s){let c,r,f,u,D=s[9].title+"",p,P,x,F,v,S,o,C,M="UserID:",O,H=s[9].userId+"",k,$,A,g,I,E="Signed by:",L,_=s[9].signedByEmail+"",t,m,d,V,q=s[9].status+"",Q,J,ee,B,y,R,De="Created on:",he,oe=new Date(s[9].creationDate).toLocaleDateString()+"",ne,ve,te,W,X,Ce="Last updated:",pe,ae=new Date(s[9].updateDate).toLocaleDateString()+"",re,_e,se,K,we="Delete",me,Ee,be;function Le(){return s[5](s[9])}return{c(){c=a("div"),r=a("div"),f=a("h2"),u=a("a"),p=T(D),F=w(),v=a("div"),S=a("div"),o=a("p"),C=a("span"),C.textContent=M,O=w(),k=T(H),$=w(),A=a("div"),g=a("p"),I=a("span"),I.textContent=E,L=w(),t=T(_),m=w(),d=a("div"),V=a("p"),Q=T(q),ee=w(),B=a("div"),y=a("p"),R=a("span"),R.textContent=De,he=w(),ne=T(oe),ve=w(),te=a("div"),W=a("p"),X=a("span"),X.textContent=Ce,pe=w(),re=T(ae),_e=w(),se=a("div"),K=a("button"),K.textContent=we,me=w(),this.h()},l(Y){c=n(Y,"DIV",{class:!0});var j=h(c);r=n(j,"DIV",{class:!0});var ce=h(r);f=n(ce,"H2",{class:!0});var ge=h(f);u=n(ge,"A",{href:!0,download:!0});var Ie=h(u);p=G(Ie,D),Ie.forEach(l),ge.forEach(l),F=b(ce),v=n(ce,"DIV",{class:!0});var N=h(v);S=n(N,"DIV",{class:!0});var je=h(S);o=n(je,"P",{});var ie=h(o);C=n(ie,"SPAN",{class:!0,"data-svelte-h":!0}),Z(C)!=="svelte-al04wj"&&(C.textContent=M),O=b(ie),k=G(ie,H),ie.forEach(l),je.forEach(l),$=b(N),A=n(N,"DIV",{class:!0});var xe=h(A);g=n(xe,"P",{});var de=h(g);I=n(de,"SPAN",{class:!0,"data-svelte-h":!0}),Z(I)!=="svelte-13c10p6"&&(I.textContent=E),L=b(de),t=G(de,_),de.forEach(l),xe.forEach(l),m=b(N),d=n(N,"DIV",{class:!0});var ke=h(d);V=n(ke,"P",{class:!0});var Ve=h(V);Q=G(Ve,q),Ve.forEach(l),ke.forEach(l),ee=b(N),B=n(N,"DIV",{class:!0});var Pe=h(B);y=n(Pe,"P",{});var ue=h(y);R=n(ue,"SPAN",{class:!0,"data-svelte-h":!0}),Z(R)!=="svelte-1qy30zs"&&(R.textContent=De),he=b(ue),ne=G(ue,oe),ue.forEach(l),Pe.forEach(l),ve=b(N),te=n(N,"DIV",{class:!0});var Se=h(te);W=n(Se,"P",{});var fe=h(W);X=n(fe,"SPAN",{class:!0,"data-svelte-h":!0}),Z(X)!=="svelte-1hton06"&&(X.textContent=Ce),pe=b(fe),re=G(fe,ae),fe.forEach(l),Se.forEach(l),_e=b(N),se=n(N,"DIV",{class:!0});var Ne=h(se);K=n(Ne,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(K)!=="svelte-18bkf1z"&&(K.textContent=we),Ne.forEach(l),N.forEach(l),ce.forEach(l),me=b(j),j.forEach(l),this.h()},h(){i(u,"href",P=`${le}/api/upload/download/${s[9].id}`),i(u,"download",x=s[9].title+".pdf"),i(f,"class","text-xl font-bold mb-2"),i(C,"class","label svelte-1jop7nh"),i(S,"class","svelte-1jop7nh"),i(I,"class","label svelte-1jop7nh"),i(A,"class","svelte-1jop7nh"),i(V,"class",J="status-label "+(s[9].status==="PENDING"?"status-pending":"status-signed")+" svelte-1jop7nh"),i(d,"class","svelte-1jop7nh"),i(R,"class","label svelte-1jop7nh"),i(B,"class","svelte-1jop7nh"),i(X,"class","label svelte-1jop7nh"),i(te,"class","svelte-1jop7nh"),i(K,"class","delete-button svelte-1jop7nh"),i(se,"class","svelte-1jop7nh"),i(v,"class","document-details svelte-1jop7nh"),i(r,"class","bg-white shadow-md rounded-lg p-6"),i(c,"class","document-card w-full p-4 svelte-1jop7nh")},m(Y,j){U(Y,c,j),e(c,r),e(r,f),e(f,u),e(u,p),e(r,F),e(r,v),e(v,S),e(S,o),e(o,C),e(o,O),e(o,k),e(v,$),e(v,A),e(A,g),e(g,I),e(g,L),e(g,t),e(v,m),e(v,d),e(d,V),e(V,Q),e(v,ee),e(v,B),e(B,y),e(y,R),e(y,he),e(y,ne),e(v,ve),e(v,te),e(te,W),e(W,X),e(W,pe),e(W,re),e(v,_e),e(v,se),e(se,K),e(c,me),Ee||(be=Oe(K,"click",Le),Ee=!0)},p(Y,j){s=Y,j&4&&D!==(D=s[9].title+"")&&z(p,D),j&4&&P!==(P=`${le}/api/upload/download/${s[9].id}`)&&i(u,"href",P),j&4&&x!==(x=s[9].title+".pdf")&&i(u,"download",x),j&4&&H!==(H=s[9].userId+"")&&z(k,H),j&4&&_!==(_=s[9].signedByEmail+"")&&z(t,_),j&4&&q!==(q=s[9].status+"")&&z(Q,q),j&4&&J!==(J="status-label "+(s[9].status==="PENDING"?"status-pending":"status-signed")+" svelte-1jop7nh")&&i(V,"class",J),j&4&&oe!==(oe=new Date(s[9].creationDate).toLocaleDateString()+"")&&z(ne,oe),j&4&&ae!==(ae=new Date(s[9].updateDate).toLocaleDateString()+"")&&z(re,ae)},d(Y){Y&&l(c),Ee=!1,be()}}}function Ke(s){let c,r="Admin Dashboard",f,u,D,p,P,x,F,v,S,o,C,M,O,H,k,$="All Documents",A,g,I,E=s[3]&&Ge(s),L=ye(s[2]),_=[];for(let t=0;t<L.length;t+=1)_[t]=He(Te(s,L,t));return{c(){c=a("h1"),c.textContent=r,f=w(),E&&E.c(),u=w(),D=a("div"),p=a("div"),P=a("div"),x=a("h2"),F=T("User Count: "),v=T(s[0]),S=w(),o=a("div"),C=a("h2"),M=T("Document Count: "),O=T(s[1]),H=w(),k=a("h2"),k.textContent=$,A=w(),g=a("div"),I=a("div");for(let t=0;t<_.length;t+=1)_[t].c();this.h()},l(t){c=n(t,"H1",{class:!0,"data-svelte-h":!0}),Z(c)!=="svelte-1tioth5"&&(c.textContent=r),f=b(t),E&&E.l(t),u=b(t),D=n(t,"DIV",{class:!0});var m=h(D);p=n(m,"DIV",{class:!0});var d=h(p);P=n(d,"DIV",{});var V=h(P);x=n(V,"H2",{class:!0});var q=h(x);F=G(q,"User Count: "),v=G(q,s[0]),q.forEach(l),V.forEach(l),S=b(d),o=n(d,"DIV",{});var Q=h(o);C=n(Q,"H2",{class:!0});var J=h(C);M=G(J,"Document Count: "),O=G(J,s[1]),J.forEach(l),Q.forEach(l),d.forEach(l),m.forEach(l),H=b(t),k=n(t,"H2",{class:!0,"data-svelte-h":!0}),Z(k)!=="svelte-1c01uka"&&(k.textContent=$),A=b(t),g=n(t,"DIV",{class:!0});var ee=h(g);I=n(ee,"DIV",{class:!0});var B=h(I);for(let y=0;y<_.length;y+=1)_[y].l(B);B.forEach(l),ee.forEach(l),this.h()},h(){i(c,"class","text-3xl font-bold text-center mb-6"),i(x,"class","text-2xl font-bold"),i(C,"class","text-2xl font-bold"),i(p,"class","flex justify-between"),i(D,"class","container mx-auto px-4 mb-6"),i(k,"class","text-2xl font-bold mb-4 mt-4 text-center"),i(I,"class","flex flex-wrap -mx-4"),i(g,"class","container mx-auto px-4")},m(t,m){U(t,c,m),U(t,f,m),E&&E.m(t,m),U(t,u,m),U(t,D,m),e(D,p),e(p,P),e(P,x),e(x,F),e(x,v),e(p,S),e(p,o),e(o,C),e(C,M),e(C,O),U(t,H,m),U(t,k,m),U(t,A,m),U(t,g,m),e(g,I);for(let d=0;d<_.length;d+=1)_[d]&&_[d].m(I,null)},p(t,[m]){if(t[3]?E?E.p(t,m):(E=Ge(t),E.c(),E.m(u.parentNode,u)):E&&(E.d(1),E=null),m&1&&z(v,t[0]),m&2&&z(O,t[1]),m&20){L=ye(t[2]);let d;for(d=0;d<L.length;d+=1){const V=Te(t,L,d);_[d]?_[d].p(V,m):(_[d]=He(V),_[d].c(),_[d].m(I,null))}for(;d<_.length;d+=1)_[d].d(1);_.length=L.length}},i:Ae,o:Ae,d(t){t&&(l(c),l(f),l(u),l(D),l(H),l(k),l(A),l(g)),E&&E.d(t),Me(_,t)}}}const le="http://localhost:8080";function Qe(s,c,r){let f=0,u=0,D=[],p="";Fe(async()=>{await P(),await x(),await F()});async function P(){try{const o=await fetch(`${le}/api/users/count`,{method:"GET"});o.ok?r(0,f=await o.json()):r(3,p="Failed to fetch user count")}catch(o){console.error("Error fetching user count:",o),r(3,p="Error fetching user count")}}async function x(){try{const o=await fetch(`${le}/api/upload/count`,{method:"GET"});o.ok?r(1,u=await o.json()):r(3,p="Failed to fetch document count")}catch(o){console.error("Error fetching document count:",o),r(3,p="Error fetching document count")}}async function F(){try{const o=await fetch(`${le}/api/upload/all`,{method:"GET"});o.ok?r(2,D=await o.json()):r(3,p="Failed to fetch documents")}catch(o){console.error("Error fetching documents:",o),r(3,p="Error fetching documents")}}async function v(o){try{(await fetch(`${le}/api/upload/delete/${o}`,{method:"POST"})).ok?(r(2,D=D.filter(M=>M.id!==o)),window.location.reload()):r(3,p="Failed to delete document")}catch(C){console.error("Error deleting document:",C),r(3,p="Error deleting document")}}const S=o=>v(o.id);return qe(Je)||(window.location.href="/login"),[f,u,D,p,v,S]}class Ze extends Be{constructor(c){super(),ze(this,c,Qe,Ke,Ue,{})}}export{Ze as component};
