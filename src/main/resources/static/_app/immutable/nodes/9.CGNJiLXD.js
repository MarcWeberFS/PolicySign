import{s as Te,n as K,c as X,o as je,f as Ue,r as fe,g as z,d as Le}from"../chunks/scheduler.Dw9uJjIS.js";import{S as Pe,i as Me,s as j,v as te,a as U,d as H,f as b,e as h,c as m,h as E,g as O,b as r,k as u,m as R,n as Se,o as Q,p as Z,q as $,j as W,u as Ne,w as F,t as Fe}from"../chunks/index.Bg7T64vi.js";import{e as le}from"../chunks/each.D6YF6ztN.js";import{w as B}from"../chunks/index.CdM32__g.js";import{u as He}from"../chunks/auth.service.CXw14WGm.js";function se(o,e,t){const d=o.slice();return d[34]=e[t],d}function ae(o){let e,t,d="Upload Template",n,l,a,s,i="Upload PDF",f,c,L,V,k,x,P,C,y=o[4]&&oe(o),M=le(o[5]),g=[];for(let w=0;w<M.length;w+=1)g[w]=ne(se(o,M,w));return{c(){e=h("div"),t=h("h1"),t.textContent=d,n=j(),l=h("div"),a=h("div"),s=h("label"),s.textContent=i,f=j(),c=h("input"),L=j(),y&&y.c(),V=j(),k=h("div"),x=h("div");for(let w=0;w<g.length;w+=1)g[w].c();this.h()},l(w){e=m(w,"DIV",{class:!0});var D=E(e);t=m(D,"H1",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-16savsz"&&(t.textContent=d),n=U(D),l=m(D,"DIV",{class:!0});var v=E(l);a=m(v,"DIV",{class:!0});var _=E(a);s=m(_,"LABEL",{class:!0,"data-svelte-h":!0}),O(s)!=="svelte-113yvb9"&&(s.textContent=i),f=U(_),c=m(_,"INPUT",{type:!0,accept:!0,class:!0}),_.forEach(b),L=U(v),y&&y.l(v),v.forEach(b),V=U(D),k=m(D,"DIV",{class:!0});var I=E(k);x=m(I,"DIV",{class:!0});var S=E(x);for(let N=0;N<g.length;N+=1)g[N].l(S);S.forEach(b),I.forEach(b),D.forEach(b),this.h()},h(){r(t,"class","text-3xl font-bold text-center mb-6"),r(s,"class","block text-gray-700 text-sm font-bold mb-2"),r(c,"type","file"),r(c,"accept","application/pdf"),r(c,"class","shadow border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),r(a,"class","mb-4"),r(l,"class","bg-white shadow-md rounded px-6 pt-6 pb-8 mb-4"),r(x,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"),r(k,"class","mt-4"),r(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12")},m(w,D){H(w,e,D),u(e,t),u(e,n),u(e,l),u(l,a),u(a,s),u(a,f),u(a,c),o[23](c),u(l,L),y&&y.m(l,null),u(e,V),u(e,k),u(k,x);for(let v=0;v<g.length;v+=1)g[v]&&g[v].m(x,null);P||(C=R(c,"change",o[19]),P=!0)},p(w,D){if(w[4]?y?y.p(w,D):(y=oe(w),y.c(),y.m(l,null)):y&&(y.d(1),y=null),D[0]&32){M=le(w[5]);let v;for(v=0;v<M.length;v+=1){const _=se(w,M,v);g[v]?g[v].p(_,D):(g[v]=ne(_),g[v].c(),g[v].m(x,null))}for(;v<g.length;v+=1)g[v].d(1);g.length=M.length}},d(w){w&&b(e),o[23](null),y&&y.d(),Se(g,w),P=!1,C()}}}function oe(o){let e,t,d="Next",n,l;return{c(){e=h("div"),t=h("button"),t.textContent=d,this.h()},l(a){e=m(a,"DIV",{class:!0});var s=E(e);t=m(s,"BUTTON",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-lly8x1"&&(t.textContent=d),s.forEach(b),this.h()},h(){r(t,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"),r(e,"class","flex items-center justify-between")},m(a,s){H(a,e,s),u(e,t),n||(l=R(t,"click",o[21]),n=!0)},p:K,d(a){a&&b(e),n=!1,l()}}}function ne(o){let e,t,d=o[34].title+"",n,l,a,s=o[34].description+"",i,f,c,L;function V(){return o[24](o[34])}return{c(){e=h("div"),t=h("h2"),n=Q(d),l=j(),a=h("p"),i=Q(s),f=j(),this.h()},l(k){e=m(k,"DIV",{class:!0});var x=E(e);t=m(x,"H2",{class:!0});var P=E(t);n=Z(P,d),P.forEach(b),l=U(x),a=m(x,"P",{class:!0});var C=E(a);i=Z(C,s),C.forEach(b),f=U(x),x.forEach(b),this.h()},h(){r(t,"class","text-xl font-bold mb-2"),r(a,"class","text-gray-600"),r(e,"class","bg-white shadow-md rounded px-6 pt-6 pb-8 mb-4 cursor-pointer")},m(k,x){H(k,e,x),u(e,t),u(t,n),u(e,l),u(e,a),u(a,i),u(e,f),c||(L=R(e,"click",V),c=!0)},p(k,x){o=k,x[0]&32&&d!==(d=o[34].title+"")&&$(n,d),x[0]&32&&s!==(s=o[34].description+"")&&$(i,s)},d(k){k&&b(e),c=!1,L()}}}function ie(o){let e,t,d="Complete the Form",n,l,a,s,i="Title",f,c,L,V,k,x="Description",P,C,y,M,g,w='<button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Submit</button>',D,v,_=o[4]&&re(o);return{c(){e=h("div"),t=h("h1"),t.textContent=d,n=j(),l=h("form"),a=h("div"),s=h("label"),s.textContent=i,f=j(),c=h("input"),L=j(),V=h("div"),k=h("label"),k.textContent=x,P=j(),C=h("textarea"),y=j(),_&&_.c(),M=j(),g=h("div"),g.innerHTML=w,this.h()},l(I){e=m(I,"DIV",{class:!0});var S=E(e);t=m(S,"H1",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-5iv4uu"&&(t.textContent=d),n=U(S),l=m(S,"FORM",{class:!0});var N=E(l);a=m(N,"DIV",{class:!0});var Y=E(a);s=m(Y,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(s)!=="svelte-1hfxn5w"&&(s.textContent=i),f=U(Y),c=m(Y,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),Y.forEach(b),L=U(N),V=m(N,"DIV",{class:!0});var q=E(V);k=m(q,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(k)!=="svelte-199vnqc"&&(k.textContent=x),P=U(q),C=m(q,"TEXTAREA",{id:!0,placeholder:!0,class:!0}),E(C).forEach(b),q.forEach(b),y=U(N),_&&_.l(N),M=U(N),g=m(N,"DIV",{class:!0,"data-svelte-h":!0}),O(g)!=="svelte-13i0lts"&&(g.innerHTML=w),N.forEach(b),S.forEach(b),this.h()},h(){r(t,"class","text-3xl font-bold text-center mb-6"),r(s,"for","title"),r(s,"class","block text-gray-700 text-sm font-bold mb-2"),r(c,"type","text"),r(c,"id","title"),r(c,"placeholder","Title"),r(c,"class","shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),c.required=!0,r(a,"class","mb-4"),r(k,"for","description"),r(k,"class","block text-gray-700 text-sm font-bold mb-2"),r(C,"id","description"),r(C,"placeholder","Description"),r(C,"class","shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),r(V,"class","mb-4"),r(g,"class","flex items-center justify-between"),r(l,"class","bg-white shadow-md rounded px-6 pt-6 pb-8 mb-4"),r(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12")},m(I,S){H(I,e,S),u(e,t),u(e,n),u(e,l),u(l,a),u(a,s),u(a,f),u(a,c),W(c,o[1]),u(l,L),u(l,V),u(V,k),u(V,P),u(V,C),W(C,o[2]),u(l,y),_&&_.m(l,null),u(l,M),u(l,g),D||(v=[R(c,"input",o[25]),R(C,"input",o[26]),R(l,"submit",Ne(o[22]))],D=!0)},p(I,S){S[0]&2&&c.value!==I[1]&&W(c,I[1]),S[0]&4&&W(C,I[2]),I[4]?_?_.p(I,S):(_=re(I),_.c(),_.m(l,M)):_&&(_.d(1),_=null)},d(I){I&&b(e),_&&_.d(),D=!1,fe(v)}}}function re(o){let e,t,d,n,l,a,s,i=o[7]!==null&&o[8]!==null&&ce(o);return{c(){e=h("div"),t=h("object"),d=j(),n=h("div"),l=j(),i&&i.c(),this.h()},l(f){e=m(f,"DIV",{class:!0,style:!0});var c=E(e);t=m(c,"OBJECT",{data:!0,type:!0,class:!0}),E(t).forEach(b),d=U(c),n=m(c,"DIV",{class:!0}),E(n).forEach(b),l=U(c),i&&i.l(c),c.forEach(b),this.h()},h(){r(t,"data",o[4]),r(t,"type","application/pdf"),r(t,"class","w-full h-full svelte-1k2ncur"),r(n,"class","absolute top-0 left-0 w-full h-full cursor-crosshair svelte-1k2ncur"),r(e,"class","relative overflow-auto mb-4 svelte-1k2ncur"),F(e,"height",o[6])},m(f,c){H(f,e,c),u(e,t),u(e,d),u(e,n),u(e,l),i&&i.m(e,null),a||(s=R(n,"click",o[20]),a=!0)},p(f,c){c[0]&16&&r(t,"data",f[4]),f[7]!==null&&f[8]!==null?i?i.p(f,c):(i=ce(f),i.c(),i.m(e,null)):i&&(i.d(1),i=null),c[0]&64&&F(e,"height",f[6])},d(f){f&&b(e),i&&i.d(),a=!1,s()}}}function ce(o){let e,t,d,n,l,a,s;return{c(){e=h("div"),t=h("div"),d=j(),n=h("div"),l=h("input"),this.h()},l(i){e=m(i,"DIV",{class:!0,style:!0});var f=E(e);t=m(f,"DIV",{class:!0,style:!0}),E(t).forEach(b),d=U(f),n=m(f,"DIV",{class:!0,style:!0});var c=E(n);l=m(c,"INPUT",{type:!0,min:!0,max:!0,class:!0}),c.forEach(b),f.forEach(b),this.h()},h(){r(t,"class","bg-red-500 rounded-full"),F(t,"width",o[9]+"px"),F(t,"height",o[9]/2+"px"),r(l,"type","range"),r(l,"min","10"),r(l,"max","200"),r(l,"class","w-full"),r(n,"class","absolute bg-white p-2 border rounded shadow-md svelte-1k2ncur"),F(n,"top","-60px"),F(n,"left","0"),F(n,"width","200px"),r(e,"class","absolute svelte-1k2ncur"),F(e,"top",o[8]+"px"),F(e,"left",o[7]+"px")},m(i,f){H(i,e,f),u(e,t),u(e,d),u(e,n),u(n,l),W(l,o[9]),a||(s=[R(l,"change",o[27]),R(l,"input",o[27])],a=!0)},p(i,f){f[0]&512&&F(t,"width",i[9]+"px"),f[0]&512&&F(t,"height",i[9]/2+"px"),f[0]&512&&W(l,i[9]),f[0]&256&&F(e,"top",i[8]+"px"),f[0]&128&&F(e,"left",i[7]+"px")},d(i){i&&b(e),a=!1,fe(s)}}}function ue(o){let e,t,d,n;return{c(){e=h("div"),t=h("div"),d=h("span"),n=Q(o[10]),this.h()},l(l){e=m(l,"DIV",{class:!0});var a=E(e);t=m(a,"DIV",{class:!0,role:!0});var s=E(t);d=m(s,"SPAN",{class:!0});var i=E(d);n=Z(i,o[10]),i.forEach(b),s.forEach(b),a.forEach(b),this.h()},h(){r(d,"class","block sm:inline"),r(t,"class","bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative svelte-1k2ncur"),r(t,"role","alert"),r(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4")},m(l,a){H(l,e,a),u(e,t),u(t,d),u(d,n)},p(l,a){a[0]&1024&&$(n,l[10])},d(l){l&&b(e)}}}function Ae(o){let e,t,d,n=o[3]===1&&ae(o),l=o[3]===2&&ie(o),a=o[3]===3&&ue(o);return{c(){n&&n.c(),e=j(),l&&l.c(),t=j(),a&&a.c(),d=te()},l(s){n&&n.l(s),e=U(s),l&&l.l(s),t=U(s),a&&a.l(s),d=te()},m(s,i){n&&n.m(s,i),H(s,e,i),l&&l.m(s,i),H(s,t,i),a&&a.m(s,i),H(s,d,i)},p(s,i){s[3]===1?n?n.p(s,i):(n=ae(s),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),s[3]===2?l?l.p(s,i):(l=ie(s),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null),s[3]===3?a?a.p(s,i):(a=ue(s),a.c(),a.m(d.parentNode,d)):a&&(a.d(1),a=null)},i:K,o:K,d(s){s&&(b(e),b(t),b(d)),n&&n.d(s),l&&l.d(s),a&&a.d(s)}}}const de="http://localhost:8080";function Re(o,e,t){let d,n,l,a,s,i,f,c;const L=B(1);X(o,L,p=>t(3,d=p));const V=B("");X(o,V,p=>t(4,n=p));const k=B("500px");X(o,k,p=>t(6,a=p));const x=B(null);X(o,x,p=>t(7,s=p));const P=B(null);X(o,P,p=>t(8,i=p));const C=B(50);X(o,C,p=>t(9,f=p));const y=B("");X(o,y,p=>t(10,c=p));const M=B([]);X(o,M,p=>t(5,l=p));let g,w,D="",v="",_="",I;je(()=>{I=z(He),I?N(I):window.location.href="/login"});const S=()=>new Promise((p,T)=>{if(window.pdfjsLib){p();return}const A=document.createElement("script");A.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js",A.onload=()=>p(),A.onerror=()=>T(new Error("Failed to load PDF.js")),document.head.appendChild(A)});async function N(p){try{const T=await fetch(`${de}/api/templates/user/${p}`,{method:"GET"});T.ok?M.set(await T.json()):_="Failed to fetch templates"}catch(T){console.error("Error fetching templates:",T),_="Error fetching templates"}}const Y=async p=>{const T=p.target.files;if(T.length>0){g=T[0];const A=URL.createObjectURL(g);V.set(A),await S();const J=(await(await pdfjsLib.getDocument(A).promise).getPage(1)).getViewport({scale:1});k.set(`${J.height}px`)}};function q(p){const T=p.currentTarget.getBoundingClientRect(),A=p.clientX-T.left,ee=p.clientY-T.top,G=595.28,J=841.89,ke=T.width,xe=T.height,ye=G/ke,Ee=J/xe,De=A*ye,Ce=ee*Ee,Ie=Math.min(Math.max(De,0),G),Ve=Math.min(Math.max(Ce,0),J);x.set(Ie),P.set(Ve)}async function pe(){if(!g||!D||!v||z(x)===null||z(P)===null){_="All fields are required";return}const p=new FormData;p.append("file",g),p.append("title",D),p.append("description",v),p.append("xSignature",z(x)),p.append("ySignature",z(P)),p.append("signatureWidth",z(C).toString()),p.append("userId",I);try{(await fetch(`${de}/api/templates`,{method:"POST",body:p})).ok?(y.set("Template uploaded successfully"),_="",await N(I),L.set(1)):_="Failed to upload template"}catch(T){console.error("Error uploading template:",T),_="Error uploading template"}}Ue(()=>{fileUrl&&URL.revokeObjectURL(fileUrl)});const he=()=>{L.set(2)},me=async()=>{await pe(),L.set(3)};function be(p){Le[p?"unshift":"push"](()=>{w=p,t(0,w)})}const ve=p=>window.location.href=`/template/${p.id}`;function _e(){D=this.value,t(1,D)}function ge(){v=this.value,t(2,v)}function we(){f=Fe(this.value),C.set(f)}return[w,D,v,d,n,l,a,s,i,f,c,L,V,k,x,P,C,y,M,Y,q,he,me,be,ve,_e,ge,we]}class ze extends Pe{constructor(e){super(),Me(this,e,Re,Ae,Te,{},null,[-1,-1])}}export{ze as component};
