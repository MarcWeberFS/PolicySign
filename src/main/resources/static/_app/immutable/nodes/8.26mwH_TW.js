import{s as Ue,n as K,c as R,o as Le,e as Pe,r as pe,g as q,b as Me}from"../chunks/scheduler.Dl-qE2gW.js";import{S as Se,i as He,s as I,q as te,a as j,d as M,f as m,e as b,c as v,h as k,g as z,b as c,j as f,l as B,o as Ne,t as Q,m as Z,n as $,k as W,p as Ae,r as P,u as Fe}from"../chunks/index.DsPxIqaf.js";import{e as le}from"../chunks/each.D6YF6ztN.js";import{w as X}from"../chunks/index.9Rd9P6Ws.js";import{j as Be,u as Re}from"../chunks/auth.service.i91Jw0BU.js";function se(n,e,s){const u=n.slice();return u[35]=e[s],u}function ae(n){let e,s,u="Upload Template",i,a,l,t,o="Upload PDF",r,d,L,C,_,y,U,h=n[4]&&ie(n),g=n[4]&&oe(n);return{c(){e=b("div"),s=b("h1"),s.textContent=u,i=I(),a=b("div"),l=b("div"),t=b("label"),t.textContent=o,r=I(),d=b("input"),L=I(),h&&h.c(),C=I(),_=b("div"),g&&g.c(),this.h()},l(E){e=v(E,"DIV",{class:!0});var w=k(e);s=v(w,"H1",{class:!0,"data-svelte-h":!0}),z(s)!=="svelte-16savsz"&&(s.textContent=u),i=j(w),a=v(w,"DIV",{class:!0});var S=k(a);l=v(S,"DIV",{class:!0});var H=k(l);t=v(H,"LABEL",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-113yvb9"&&(t.textContent=o),r=j(H),d=v(H,"INPUT",{type:!0,accept:!0,class:!0}),H.forEach(m),L=j(S),h&&h.l(S),S.forEach(m),C=j(w),_=v(w,"DIV",{class:!0});var N=k(_);g&&g.l(N),N.forEach(m),w.forEach(m),this.h()},h(){c(s,"class","text-3xl font-bold text-center mb-6"),c(t,"class","block text-gray-700 text-sm font-bold mb-2"),c(d,"type","file"),c(d,"accept","application/pdf"),c(d,"class","shadow border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),c(l,"class","mb-4"),c(a,"class","bg-white shadow-md rounded px-6 pt-6 pb-8 mb-4"),c(_,"class","mt-4"),c(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12")},m(E,w){M(E,e,w),f(e,s),f(e,i),f(e,a),f(a,l),f(l,t),f(l,r),f(l,d),n[23](d),f(a,L),h&&h.m(a,null),f(e,C),f(e,_),g&&g.m(_,null),y||(U=B(d,"change",n[19]),y=!0)},p(E,w){E[4]?h?h.p(E,w):(h=ie(E),h.c(),h.m(a,null)):h&&(h.d(1),h=null),E[4]?g?g.p(E,w):(g=oe(E),g.c(),g.m(_,null)):g&&(g.d(1),g=null)},d(E){E&&m(e),n[23](null),h&&h.d(),g&&g.d(),y=!1,U()}}}function ie(n){let e,s,u="Next",i,a;return{c(){e=b("div"),s=b("button"),s.textContent=u,this.h()},l(l){e=v(l,"DIV",{class:!0});var t=k(e);s=v(t,"BUTTON",{class:!0,"data-svelte-h":!0}),z(s)!=="svelte-lly8x1"&&(s.textContent=u),t.forEach(m),this.h()},h(){c(s,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"),c(e,"class","flex items-center justify-between")},m(l,t){M(l,e,t),f(e,s),i||(a=B(s,"click",n[21]),i=!0)},p:K,d(l){l&&m(e),i=!1,a()}}}function oe(n){let e,s="My Templates",u,i,a=le(n[5]),l=[];for(let t=0;t<a.length;t+=1)l[t]=ne(se(n,a,t));return{c(){e=b("h1"),e.textContent=s,u=I(),i=b("div");for(let t=0;t<l.length;t+=1)l[t].c();this.h()},l(t){e=v(t,"H1",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1h1cu73"&&(e.textContent=s),u=j(t),i=v(t,"DIV",{class:!0});var o=k(i);for(let r=0;r<l.length;r+=1)l[r].l(o);o.forEach(m),this.h()},h(){c(e,"class","text-3xl font-bold text-center mb-6"),c(i,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4")},m(t,o){M(t,e,o),M(t,u,o),M(t,i,o);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(i,null)},p(t,o){if(o[0]&32){a=le(t[5]);let r;for(r=0;r<a.length;r+=1){const d=se(t,a,r);l[r]?l[r].p(d,o):(l[r]=ne(d),l[r].c(),l[r].m(i,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=a.length}},d(t){t&&(m(e),m(u),m(i)),Ne(l,t)}}}function ne(n){let e,s,u=n[35].title+"",i,a,l,t=n[35].description+"",o,r,d,L;function C(){return n[24](n[35])}return{c(){e=b("div"),s=b("h2"),i=Q(u),a=I(),l=b("p"),o=Q(t),r=I(),this.h()},l(_){e=v(_,"DIV",{class:!0});var y=k(e);s=v(y,"H2",{class:!0});var U=k(s);i=Z(U,u),U.forEach(m),a=j(y),l=v(y,"P",{class:!0});var h=k(l);o=Z(h,t),h.forEach(m),r=j(y),y.forEach(m),this.h()},h(){c(s,"class","text-xl font-bold mb-2"),c(l,"class","text-gray-600"),c(e,"class","bg-white shadow-md rounded px-6 pt-6 pb-8 mb-4 cursor-pointer")},m(_,y){M(_,e,y),f(e,s),f(s,i),f(e,a),f(e,l),f(l,o),f(e,r),d||(L=B(e,"click",C),d=!0)},p(_,y){n=_,y[0]&32&&u!==(u=n[35].title+"")&&$(i,u),y[0]&32&&t!==(t=n[35].description+"")&&$(o,t)},d(_){_&&m(e),d=!1,L()}}}function re(n){let e,s,u="Complete the Form",i,a,l,t,o="Title",r,d,L,C,_,y="Description",U,h,g,E,w,S='<button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Submit</button>',H,N,x=n[4]&&ce(n);return{c(){e=b("div"),s=b("h1"),s.textContent=u,i=I(),a=b("form"),l=b("div"),t=b("label"),t.textContent=o,r=I(),d=b("input"),L=I(),C=b("div"),_=b("label"),_.textContent=y,U=I(),h=b("textarea"),g=I(),x&&x.c(),E=I(),w=b("div"),w.innerHTML=S,this.h()},l(D){e=v(D,"DIV",{class:!0});var V=k(e);s=v(V,"H1",{class:!0,"data-svelte-h":!0}),z(s)!=="svelte-5iv4uu"&&(s.textContent=u),i=j(V),a=v(V,"FORM",{class:!0});var A=k(a);l=v(A,"DIV",{class:!0});var O=k(l);t=v(O,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(t)!=="svelte-1hfxn5w"&&(t.textContent=o),r=j(O),d=v(O,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),O.forEach(m),L=j(A),C=v(A,"DIV",{class:!0});var Y=k(C);_=v(Y,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(_)!=="svelte-199vnqc"&&(_.textContent=y),U=j(Y),h=v(Y,"TEXTAREA",{id:!0,placeholder:!0,class:!0}),k(h).forEach(m),Y.forEach(m),g=j(A),x&&x.l(A),E=j(A),w=v(A,"DIV",{class:!0,"data-svelte-h":!0}),z(w)!=="svelte-13i0lts"&&(w.innerHTML=S),A.forEach(m),V.forEach(m),this.h()},h(){c(s,"class","text-3xl font-bold text-center mb-6"),c(t,"for","title"),c(t,"class","block text-gray-700 text-sm font-bold mb-2"),c(d,"type","text"),c(d,"id","title"),c(d,"placeholder","Title"),c(d,"class","shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),d.required=!0,c(l,"class","mb-4"),c(_,"for","description"),c(_,"class","block text-gray-700 text-sm font-bold mb-2"),c(h,"id","description"),c(h,"placeholder","Description"),c(h,"class","shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),c(C,"class","mb-4"),c(w,"class","flex items-center justify-between"),c(a,"class","bg-white shadow-md rounded px-6 pt-6 pb-8 mb-4"),c(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12")},m(D,V){M(D,e,V),f(e,s),f(e,i),f(e,a),f(a,l),f(l,t),f(l,r),f(l,d),W(d,n[1]),f(a,L),f(a,C),f(C,_),f(C,U),f(C,h),W(h,n[2]),f(a,g),x&&x.m(a,null),f(a,E),f(a,w),H||(N=[B(d,"input",n[25]),B(h,"input",n[26]),B(a,"submit",Ae(n[22]))],H=!0)},p(D,V){V[0]&2&&d.value!==D[1]&&W(d,D[1]),V[0]&4&&W(h,D[2]),D[4]?x?x.p(D,V):(x=ce(D),x.c(),x.m(a,E)):x&&(x.d(1),x=null)},d(D){D&&m(e),x&&x.d(),H=!1,pe(N)}}}function ce(n){let e,s,u,i,a,l,t,o=n[7]!==null&&n[8]!==null&&ue(n);return{c(){e=b("div"),s=b("object"),u=I(),i=b("div"),a=I(),o&&o.c(),this.h()},l(r){e=v(r,"DIV",{class:!0,style:!0});var d=k(e);s=v(d,"OBJECT",{data:!0,type:!0,class:!0}),k(s).forEach(m),u=j(d),i=v(d,"DIV",{class:!0}),k(i).forEach(m),a=j(d),o&&o.l(d),d.forEach(m),this.h()},h(){c(s,"data",n[4]),c(s,"type","application/pdf"),c(s,"class","w-full h-full svelte-1k2ncur"),c(i,"class","absolute top-0 left-0 w-full h-full cursor-crosshair svelte-1k2ncur"),c(e,"class","relative overflow-auto mb-4 svelte-1k2ncur"),P(e,"height",n[6])},m(r,d){M(r,e,d),f(e,s),f(e,u),f(e,i),f(e,a),o&&o.m(e,null),l||(t=B(i,"click",n[20]),l=!0)},p(r,d){d[0]&16&&c(s,"data",r[4]),r[7]!==null&&r[8]!==null?o?o.p(r,d):(o=ue(r),o.c(),o.m(e,null)):o&&(o.d(1),o=null),d[0]&64&&P(e,"height",r[6])},d(r){r&&m(e),o&&o.d(),l=!1,t()}}}function ue(n){let e,s,u,i,a,l,t;return{c(){e=b("div"),s=b("div"),u=I(),i=b("div"),a=b("input"),this.h()},l(o){e=v(o,"DIV",{class:!0,style:!0});var r=k(e);s=v(r,"DIV",{class:!0,style:!0}),k(s).forEach(m),u=j(r),i=v(r,"DIV",{class:!0,style:!0});var d=k(i);a=v(d,"INPUT",{type:!0,min:!0,max:!0,class:!0}),d.forEach(m),r.forEach(m),this.h()},h(){c(s,"class","bg-red-500 rounded-full"),P(s,"width",n[9]+"px"),P(s,"height",n[9]/2+"px"),c(a,"type","range"),c(a,"min","10"),c(a,"max","200"),c(a,"class","w-full"),c(i,"class","absolute bg-white p-2 border rounded shadow-md svelte-1k2ncur"),P(i,"top","-60px"),P(i,"left","0"),P(i,"width","200px"),c(e,"class","absolute svelte-1k2ncur"),P(e,"top",n[8]+"px"),P(e,"left",n[7]+"px")},m(o,r){M(o,e,r),f(e,s),f(e,u),f(e,i),f(i,a),W(a,n[9]),l||(t=[B(a,"change",n[27]),B(a,"input",n[27])],l=!0)},p(o,r){r[0]&512&&P(s,"width",o[9]+"px"),r[0]&512&&P(s,"height",o[9]/2+"px"),r[0]&512&&W(a,o[9]),r[0]&256&&P(e,"top",o[8]+"px"),r[0]&128&&P(e,"left",o[7]+"px")},d(o){o&&m(e),l=!1,pe(t)}}}function de(n){let e,s,u,i;return{c(){e=b("div"),s=b("div"),u=b("span"),i=Q(n[10]),this.h()},l(a){e=v(a,"DIV",{class:!0});var l=k(e);s=v(l,"DIV",{class:!0,role:!0});var t=k(s);u=v(t,"SPAN",{class:!0});var o=k(u);i=Z(o,n[10]),o.forEach(m),t.forEach(m),l.forEach(m),this.h()},h(){c(u,"class","block sm:inline"),c(s,"class","bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative svelte-1k2ncur"),c(s,"role","alert"),c(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4")},m(a,l){M(a,e,l),f(e,s),f(s,u),f(u,i)},p(a,l){l[0]&1024&&$(i,a[10])},d(a){a&&m(e)}}}function Xe(n){let e,s,u,i=n[3]===1&&ae(n),a=n[3]===2&&re(n),l=n[3]===3&&de(n);return{c(){i&&i.c(),e=I(),a&&a.c(),s=I(),l&&l.c(),u=te()},l(t){i&&i.l(t),e=j(t),a&&a.l(t),s=j(t),l&&l.l(t),u=te()},m(t,o){i&&i.m(t,o),M(t,e,o),a&&a.m(t,o),M(t,s,o),l&&l.m(t,o),M(t,u,o)},p(t,o){t[3]===1?i?i.p(t,o):(i=ae(t),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),t[3]===2?a?a.p(t,o):(a=re(t),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null),t[3]===3?l?l.p(t,o):(l=de(t),l.c(),l.m(u.parentNode,u)):l&&(l.d(1),l=null)},i:K,o:K,d(t){t&&(m(e),m(s),m(u)),i&&i.d(t),a&&a.d(t),l&&l.d(t)}}}const fe="https://policysign.azurewebsites.net";function ze(n,e,s){let u,i,a,l,t,o,r,d,L;Be.subscribe(p=>{L=p});const C=X(1);R(n,C,p=>s(3,u=p));const _=X("");R(n,_,p=>s(4,i=p));const y=X("500px");R(n,y,p=>s(6,l=p));const U=X(null);R(n,U,p=>s(7,t=p));const h=X(null);R(n,h,p=>s(8,o=p));const g=X(50);R(n,g,p=>s(9,r=p));const E=X("");R(n,E,p=>s(10,d=p));const w=X([]);R(n,w,p=>s(5,a=p));let S,H,N="",x="",D="",V;Le(()=>{V=q(Re),V?O(V):window.location.href="/login"});const A=()=>new Promise((p,T)=>{if(window.pdfjsLib){p();return}const F=document.createElement("script");F.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js",F.onload=()=>p(),F.onerror=()=>T(new Error("Failed to load PDF.js")),document.head.appendChild(F)});async function O(p){try{const T=await fetch(`${fe}/api/templates/user/${p}`,{method:"GET",headers:{Authorization:"Bearer "+L}});T.ok?w.set(await T.json()):D="Failed to fetch templates"}catch(T){console.error("Error fetching templates:",T),D="Error fetching templates"}}const Y=async p=>{const T=p.target.files;if(T.length>0){S=T[0];const F=URL.createObjectURL(S);_.set(F),await A();const J=(await(await pdfjsLib.getDocument(F).promise).getPage(1)).getViewport({scale:1});y.set(`${J.height}px`)}};function he(p){const T=p.currentTarget.getBoundingClientRect(),F=p.clientX-T.left,ee=p.clientY-T.top,G=595.28,J=841.89,ye=T.width,Ee=T.height,Ce=G/ye,De=J/Ee,Ie=F*Ce,je=ee*De,Te=Math.min(Math.max(Ie,0),G),Ve=Math.min(Math.max(je,0),J);U.set(Te),h.set(Ve)}async function me(){if(!S||!N||!x||q(U)===null||q(h)===null){D="All fields are required";return}const p=new FormData;p.append("file",S),p.append("title",N),p.append("description",x),p.append("xSignature",q(U)),p.append("ySignature",q(h)),p.append("signatureWidth",q(g).toString()),p.append("userId",V);try{(await fetch(`${fe}/api/templates`,{method:"POST",body:p,headers:{Authorization:"Bearer "+L}})).ok?(E.set("Template uploaded successfully"),D="",await O(V),C.set(1)):D="Failed to upload template"}catch(T){console.error("Error uploading template:",T),D="Error uploading template"}}Pe(()=>{fileUrl&&URL.revokeObjectURL(fileUrl)});const be=()=>{C.set(2)},ve=async()=>{await me(),C.set(3)};function _e(p){Me[p?"unshift":"push"](()=>{H=p,s(0,H)})}const ge=p=>window.location.href=`/templateid?id=${p.id}`;function we(){N=this.value,s(1,N)}function ke(){x=this.value,s(2,x)}function xe(){r=Fe(this.value),g.set(r)}return[H,N,x,u,i,a,l,t,o,r,d,C,_,y,U,h,g,E,w,Y,he,be,ve,_e,ge,we,ke,xe]}class Ge extends Se{constructor(e){super(),He(this,e,ze,Xe,Ue,{},null,[-1,-1])}}export{Ge as component};
