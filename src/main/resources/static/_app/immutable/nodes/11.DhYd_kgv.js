import{s as ve,n as Z,c as R,r as fe}from"../chunks/scheduler.Dw9uJjIS.js";import{S as ge,i as _e,s as U,v as ae,a as V,d as F,f as b,e as h,c as m,h as w,g as Y,b as i,k as d,m as B,j as A,u as xe,x as L,o as we,p as ye,q as Ee,t as ke}from"../chunks/index.BiWYtozJ.js";import{w as X}from"../chunks/index.CdM32__g.js";function ne(r){let e,l,f="Upload Document",a,t,o,s,n="Upload PDF",p,u,N,C,D,g=r[7]&&ie(r);return{c(){e=h("div"),l=h("h1"),l.textContent=f,a=U(),t=h("div"),o=h("div"),s=h("label"),s.textContent=n,p=U(),u=h("input"),N=U(),g&&g.c(),this.h()},l(k){e=m(k,"DIV",{class:!0});var v=w(e);l=m(v,"H1",{class:!0,"data-svelte-h":!0}),Y(l)!=="svelte-1dbxkce"&&(l.textContent=f),a=V(v),t=m(v,"DIV",{class:!0});var M=w(t);o=m(M,"DIV",{class:!0});var y=w(o);s=m(y,"LABEL",{class:!0,"data-svelte-h":!0}),Y(s)!=="svelte-113yvb9"&&(s.textContent=n),p=V(y),u=m(y,"INPUT",{type:!0,accept:!0,class:!0}),y.forEach(b),N=V(M),g&&g.l(M),M.forEach(b),v.forEach(b),this.h()},h(){i(l,"class","text-3xl font-bold text-center mb-6"),i(s,"class","block text-gray-700 text-sm font-bold mb-2"),i(u,"type","file"),i(u,"accept","application/pdf"),i(u,"class","shadow border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),i(o,"class","mb-4"),i(t,"class","bg-white shadow-md rounded px-6 pt-6 pb-8 mb-4"),i(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12")},m(k,v){F(k,e,v),d(e,l),d(e,a),d(e,t),d(t,o),d(o,s),d(o,p),d(o,u),d(t,N),g&&g.m(t,null),C||(D=B(u,"change",r[17]),C=!0)},p(k,v){k[7]?g?g.p(k,v):(g=ie(k),g.c(),g.m(t,null)):g&&(g.d(1),g=null)},d(k){k&&b(e),g&&g.d(),C=!1,D()}}}function ie(r){let e,l,f="Next",a,t;return{c(){e=h("div"),l=h("button"),l.textContent=f,this.h()},l(o){e=m(o,"DIV",{class:!0});var s=w(e);l=m(s,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(l)!=="svelte-lly8x1"&&(l.textContent=f),s.forEach(b),this.h()},h(){i(l,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"),i(e,"class","flex items-center justify-between")},m(o,s){F(o,e,s),d(e,l),a||(t=B(l,"click",r[19]),a=!0)},p:Z,d(o){o&&b(e),a=!1,t()}}}function re(r){let e,l,f="Complete the Form",a,t,o,s,n="E-Mail of the signee",p,u,N,C,D,g="Title",k,v,M,y,P,q="Description",O,I,W,J,H,G='<button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Submit</button>',z,K,E=r[7]&&ue(r);return{c(){e=h("div"),l=h("h1"),l.textContent=f,a=U(),t=h("form"),o=h("div"),s=h("label"),s.textContent=n,p=U(),u=h("input"),N=U(),C=h("div"),D=h("label"),D.textContent=g,k=U(),v=h("input"),M=U(),y=h("div"),P=h("label"),P.textContent=q,O=U(),I=h("textarea"),W=U(),E&&E.c(),J=U(),H=h("div"),H.innerHTML=G,this.h()},l(j){e=m(j,"DIV",{class:!0});var T=w(e);l=m(T,"H1",{class:!0,"data-svelte-h":!0}),Y(l)!=="svelte-5iv4uu"&&(l.textContent=f),a=V(T),t=m(T,"FORM",{class:!0});var S=w(t);o=m(S,"DIV",{class:!0});var c=w(o);s=m(c,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Y(s)!=="svelte-1pq9vec"&&(s.textContent=n),p=V(c),u=m(c,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),c.forEach(b),N=V(S),C=m(S,"DIV",{class:!0});var _=w(C);D=m(_,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Y(D)!=="svelte-1hfxn5w"&&(D.textContent=g),k=V(_),v=m(_,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),_.forEach(b),M=V(S),y=m(S,"DIV",{class:!0});var x=w(y);P=m(x,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Y(P)!=="svelte-199vnqc"&&(P.textContent=q),O=V(x),I=m(x,"TEXTAREA",{id:!0,placeholder:!0,class:!0}),w(I).forEach(b),x.forEach(b),W=V(S),E&&E.l(S),J=V(S),H=m(S,"DIV",{class:!0,"data-svelte-h":!0}),Y(H)!=="svelte-13i0lts"&&(H.innerHTML=G),S.forEach(b),T.forEach(b),this.h()},h(){i(l,"class","text-3xl font-bold text-center mb-6"),i(s,"for","email"),i(s,"class","block text-gray-700 text-sm font-bold mb-2"),i(u,"type","text"),i(u,"id","email"),i(u,"placeholder","E-Mail"),i(u,"class","shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),u.required=!0,i(o,"class","mb-4"),i(D,"for","title"),i(D,"class","block text-gray-700 text-sm font-bold mb-2"),i(v,"type","text"),i(v,"id","title"),i(v,"placeholder","Title"),i(v,"class","shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),v.required=!0,i(C,"class","mb-4"),i(P,"for","description"),i(P,"class","block text-gray-700 text-sm font-bold mb-2"),i(I,"id","description"),i(I,"placeholder","Description"),i(I,"class","shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"),i(y,"class","mb-4"),i(H,"class","flex items-center justify-between"),i(t,"class","bg-white shadow-md rounded px-6 pt-6 pb-8 mb-4"),i(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12")},m(j,T){F(j,e,T),d(e,l),d(e,a),d(e,t),d(t,o),d(o,s),d(o,p),d(o,u),A(u,r[0]),d(t,N),d(t,C),d(C,D),d(C,k),d(C,v),A(v,r[1]),d(t,M),d(t,y),d(y,P),d(y,O),d(y,I),A(I,r[2]),d(t,W),E&&E.m(t,null),d(t,J),d(t,H),z||(K=[B(u,"input",r[21]),B(v,"input",r[22]),B(I,"input",r[23]),B(t,"submit",xe(r[20]))],z=!0)},p(j,T){T&1&&u.value!==j[0]&&A(u,j[0]),T&2&&v.value!==j[1]&&A(v,j[1]),T&4&&A(I,j[2]),j[7]?E?E.p(j,T):(E=ue(j),E.c(),E.m(t,J)):E&&(E.d(1),E=null)},d(j){j&&b(e),E&&E.d(),z=!1,fe(K)}}}function ue(r){let e,l,f,a,t,o,s,n=r[5]!==null&&r[4]!==null&&de(r);return{c(){e=h("div"),l=h("object"),f=U(),a=h("div"),t=U(),n&&n.c(),this.h()},l(p){e=m(p,"DIV",{class:!0,style:!0});var u=w(e);l=m(u,"OBJECT",{data:!0,type:!0,class:!0}),w(l).forEach(b),f=V(u),a=m(u,"DIV",{class:!0}),w(a).forEach(b),t=V(u),n&&n.l(u),u.forEach(b),this.h()},h(){i(l,"data",r[7]),i(l,"type","application/pdf"),i(l,"class","w-full h-full svelte-1g2kwbp"),i(a,"class","absolute top-0 left-0 w-full h-full cursor-crosshair"),i(e,"class","relative overflow-auto mb-4"),L(e,"height",r[8])},m(p,u){F(p,e,u),d(e,l),d(e,f),d(e,a),d(e,t),n&&n.m(e,null),o||(s=B(a,"click",r[18]),o=!0)},p(p,u){u&128&&i(l,"data",p[7]),p[5]!==null&&p[4]!==null?n?n.p(p,u):(n=de(p),n.c(),n.m(e,null)):n&&(n.d(1),n=null),u&256&&L(e,"height",p[8])},d(p){p&&b(e),n&&n.d(),o=!1,s()}}}function de(r){let e,l,f,a,t,o,s;return{c(){e=h("div"),l=h("div"),f=U(),a=h("div"),t=h("input"),this.h()},l(n){e=m(n,"DIV",{class:!0,style:!0});var p=w(e);l=m(p,"DIV",{class:!0,style:!0}),w(l).forEach(b),f=V(p),a=m(p,"DIV",{class:!0,style:!0});var u=w(a);t=m(u,"INPUT",{type:!0,min:!0,max:!0,class:!0}),u.forEach(b),p.forEach(b),this.h()},h(){i(l,"class","bg-red-500 rounded-full"),L(l,"width",r[3]+"px"),L(l,"height",r[3]/2+"px"),i(t,"type","range"),i(t,"min","10"),i(t,"max","200"),i(t,"class","w-full"),i(a,"class","absolute bg-white p-2 border rounded shadow-md"),L(a,"top","-60px"),L(a,"left","0"),L(a,"width","200px"),i(e,"class","absolute"),L(e,"top",r[4]+"px"),L(e,"left",r[5]+"px")},m(n,p){F(n,e,p),d(e,l),d(e,f),d(e,a),d(a,t),A(t,r[3]),o||(s=[B(t,"change",r[24]),B(t,"input",r[24])],o=!0)},p(n,p){p&8&&L(l,"width",n[3]+"px"),p&8&&L(l,"height",n[3]/2+"px"),p&8&&A(t,n[3]),p&16&&L(e,"top",n[4]+"px"),p&32&&L(e,"left",n[5]+"px")},d(n){n&&b(e),o=!1,fe(s)}}}function ce(r){let e,l,f,a;return{c(){e=h("div"),l=h("div"),f=h("span"),a=we(r[9]),this.h()},l(t){e=m(t,"DIV",{class:!0});var o=w(e);l=m(o,"DIV",{class:!0,role:!0});var s=w(l);f=m(s,"SPAN",{class:!0});var n=w(f);a=ye(n,r[9]),n.forEach(b),s.forEach(b),o.forEach(b),this.h()},h(){i(f,"class","block sm:inline"),i(l,"class","bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative"),i(l,"role","alert"),i(e,"class","max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4")},m(t,o){F(t,e,o),d(e,l),d(l,f),d(f,a)},p(t,o){o&512&&Ee(a,t[9])},d(t){t&&b(e)}}}function Ce(r){let e,l,f,a=r[6]===1&&ne(r),t=r[6]===2&&re(r),o=r[6]===3&&ce(r);return{c(){a&&a.c(),e=U(),t&&t.c(),l=U(),o&&o.c(),f=ae()},l(s){a&&a.l(s),e=V(s),t&&t.l(s),l=V(s),o&&o.l(s),f=ae()},m(s,n){a&&a.m(s,n),F(s,e,n),t&&t.m(s,n),F(s,l,n),o&&o.m(s,n),F(s,f,n)},p(s,[n]){s[6]===1?a?a.p(s,n):(a=ne(s),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),s[6]===2?t?t.p(s,n):(t=re(s),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null),s[6]===3?o?o.p(s,n):(o=ce(s),o.c(),o.m(f.parentNode,f)):o&&(o.d(1),o=null)},i:Z,o:Z,d(s){s&&(b(e),b(l),b(f)),a&&a.d(s),t&&t.d(s),o&&o.d(s)}}}const De="http://localhost:8080";function Ie(r,e,l){let f,a,t,o,s,n,p,u,N=X("");R(r,N,c=>l(7,s=c));let C=X("500px");R(r,C,c=>l(8,n=c));let D=X(1);R(r,D,c=>l(6,o=c));let g=X(null);R(r,g,c=>l(5,t=c));let k=X(null);R(r,k,c=>l(4,a=c));let v=X(50);R(r,v,c=>l(3,f=c));const M=X("");let y="",P="",q="",O,I=X("");R(r,I,c=>l(9,p=c));const W=sessionStorage.getItem("user");W?(O=JSON.parse(W).sub,console.log("User ID retrieved from session storage:",O)):console.log("No user found in session storage.");const J=()=>new Promise((c,_)=>{if(window.pdfjsLib){c();return}const x=document.createElement("script");x.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js",x.onload=()=>c(),x.onerror=()=>_(new Error("Failed to load PDF.js")),document.head.appendChild(x)}),H=async c=>{const _=c.target.files;if(_.length>0){u=_[0];const x=URL.createObjectURL(u);N.set(x),await J();const Q=(await pdfjsLib.getDocument(x).promise).numPages;C.set(`${Q*842+60}px`)}};function G(c){const _=c.currentTarget.getBoundingClientRect(),x=c.clientX-_.left,$=c.clientY-_.top,Q=595.28,ee=841.89,te=_.width,le=_.height;console.log("displayedWidth",te),console.log("displayedHeight",le);const pe=Q/te,he=ee/le,me=x*pe,be=$*he,se=Math.min(Math.max(me,0),Q),oe=Math.min(Math.max(be,0),ee);console.log(`Clicked coordinates: X=${se}, Y=${oe}`),g.set(se),k.set(oe)}const z=()=>{D.set(2)},K=async()=>{if(D.set(3),!O){alert("User ID is not set. Please login again.");return}const c=new FormData;c.append("file",u),c.append("signedByEmail",y),c.append("xSignature",t),c.append("ySignature",a),c.append("signatureWidth",f.toString()),c.append("title",P),c.append("description",q),c.append("userId",O);try{const _=await fetch(De+"/api/upload",{method:"POST",body:c});if(_.ok){const x=await _.json();M.set(x.fileUrl),I.set("File uploaded successfully!"),console.log("Upload successful:",x)}else{const x=await _.json();I.set(`Error: ${x.message}`)}}catch(_){console.error("Error uploading file:",_),I.set("Error uploading file. Please try again.")}};function E(){y=this.value,l(0,y)}function j(){P=this.value,l(1,P)}function T(){q=this.value,l(2,q)}function S(){f=ke(this.value),v.set(f)}return[y,P,q,f,a,t,o,s,n,p,N,C,D,g,k,v,I,H,G,z,K,E,j,T,S]}class Pe extends ge{constructor(e){super(),_e(this,e,Ie,Ce,ve,{})}}export{Pe as component};
